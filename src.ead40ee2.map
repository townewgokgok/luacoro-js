{"version":3,"sources":["node_modules/luacoro/dist/index.js","src/inn.ts","src/vector.ts","src/guide.ts","src/basic.ts","src/concurrent.ts","src/recursion.ts","src/index.ts"],"names":[],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AEvZA,IAAA,SAAA,aAAA,YAAA;AAIE,aAAA,MAAA,CAAa,CAAb,EAA6B,CAA7B,EAA2C;AAA9B,YAAA,MAAA,KAAA,CAAA,EAAA;AAAA,gBAAA,EAAA;AAAc;AAAE,YAAA,MAAA,KAAA,CAAA,EAAA;AAAA,gBAAA,EAAA;AAAc;AACzC,aAAK,CAAL,GAAS,CAAT;AACA,aAAK,CAAL,GAAS,CAAT;AACD;AAED,WAAA,SAAA,CAAA,KAAA,GAAA,YAAA;AACE,eAAO,IAAI,MAAJ,CAAW,KAAK,CAAhB,EAAmB,KAAK,CAAxB,CAAP;AACD,KAFD;AAIA,WAAA,SAAA,CAAA,IA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S,IENT,EDYA,EDNiB,CCMjB,SDNS,CAAmB,CEN5B,AFM8B,OAAF,CEN5B,AFMS,CAAP,SENF,CAAA,CAAA;AAEA,AFME,AFQF,AKjBA,IDGM,AJcF,AKjBJ,ODGa,EFMX,AFQF,CIdA,ACHA,KHSE,GAAA,KGTF,QAAA,SAAA,CAAA,CAAA;ADIA,AFMI,AFQJ,AKjBA,IDGM,ACHN,KLiBA,IERS,CENO,CCHhB,GDGoB,CFMhB,KFQJ,GIdoB,AJcpB,IKjBA,GDGgB,CAAW,ICH3B,GDGkC,EAAlB,EAAsB,GCHtC,CAAA,CAAA,EDG6C,EAA7B,CAAhB;AACA,AFMI,AFQF,AKhBF,IDEM,ACFA,ILgBE,EKhBI,ELgBA,CKhBZ,EDEiB,GFMH,CENO,EJcA,OIdA,OAAJ,AJcL,CIdgB,AJcQ,IERA,GEND,EAAlB,CFMH,CENyB,AFMnC,EFQQ,CAAV,IId4C,EAA7B,CAAjB;ADSE,ACRF,AFMG,AFQD,AKhBF,IDEM,ACFA,ELgBF,KAAF,AKhBW,CLgBH,EKhBV,IDEoB,IAAI,AJctB,CGNA,CAAA,CAAA,AHMqB,CGNrB,KCRsB,GJcM,CGN5B,EAAM,CCRY,CDQV,ACRqB,IJcR,EGNP,CCRsB,AJcC,EIdnB,CDQZ,CCRkC,AJcnB,CGND,EHMsB,IGNhB,ACRqB,EAA7B,CAApB,EJcuB,GAA8B,IAA9B,GAAmC,SAAnC,GAA4C,GAAjE;AGLgC,ACRlC,AFOE,AFOD,AKfD,IDCM,KCDN,IAAA,CHQY,AGRI,CAAhB,EDCmB,ACDM,IDCF,SAAA,MFOW,CEPf,CAAW,IFOlB,CAAV,EEPmC,EAAlB,EAAsB,OAAO,EAA7B,CAAnB;ADOQ,ACNR,AFOC,AFQD,IIfM,KJeN,OAAA,CGTE,AHSgB,CGThB,EAAgC,AHSlC,EAA6B,CIfJ,CAAzB;AAEA,AFJA,AFkBE,IIdF,IFJA,AFkBQ,IAAI,CIdZ,AFJA,GAAA,KAAA,AFkBqB,KIdrB,QJcY,CAAuB,GIdnC,EJcY,CAAV;AGVA,ACAA,AFGF,AFQE,MAAE,GERJ,IEHE,AFGF,GAAA,CFQE,EGXA,ACAA,CAAa,AJWG,GGXhB,AHWA,EIXA,EDAgC,ACAJ,GAA5B,EAAuC;ADCP,ACA9B,AFGF,AFQA,QERI,KEHG,AJWE,EERT,EAAa,CEHX,GAAa,KAAb,CJWF,CAAwB,UERU,GFQlC,EAAuC,EER1B,SFQb,CAAmD,CAAnD;AGVA,ACAE,AFGF,AFQD,aIXQ,CFGG,EEHR,EFGF,CEHa,GCTT,CFSJ,ACAiB,CDAjB,AETM,CFSN,CAAA,ECAa,ACTT,EDSF,ICTc,CFShB,EAAM,EAAE,CETJ,KFSU,EETV,CAAA,CAAA,CFSE,AETF,EFSiB,MAAM,CETvB,CFSE,CETF,CFSJ,AETI,CFSJ,AETI;ADUH,AFGD,AFSF,AKrBI,ILqBA,OETK,IAAP,EFSF,MKrBI,CAAA,CAAA,CAAA,SAAA,EAAM;AFOwB,ACI/B,AFED,AFUF,AKtBY,ILsBR,OIZD,GJYmB,IAAtB,EIZG,CAAA,IAAA,GAAD,UAAO,EAAP,EAAiB;ADHjB,ADMD,AFWD,AKzBI,SLyBJ,KAAA,GAAA,AKzBI,EFQF,AERU,IFQV;AACA,ADAF,AFiBE,QEjBF,GFiBS,CEjBT,GAAA,IAAA,AFiBE,IGjBA,CAAA,CAAA,CAAA,SAAA,EAAM,EAAE,MAAM,MAAR,EAAgB,MAAM,EAAtB,EAAN,CAAA;ADOF,AFWE,AK3BE,gBL2BU,GK3BV,CL2BF,GK3BE,IAAQ;AFSV,ADQF,AFWE,AK3BU,cL2BA,IAAV,CGnBA,IAAA;AACA,ACEQ,AFOV,AFUE,AK3BE,SHiBJ,OFUc,GAAZ,CEVF,GCTE,ADSF,AGjBI,CFQF,AERE,CFQF,AERE,CFQF,AERE,KDUiB,GAAG,CDFtB,CERE,CFQI,ACEa,ACVjB,CDUwB,CDFlB,AERC,IDUsB,EDFjB,CCEK,CAAX,EDFF,EAAc,MAAM,EAApB,EAAN,CAAA;ACGQ,AFOR,AFUA,QEVM,IAAI,SAAS,WEPC,GFOV,CAAwB,KEPL,SAAT,EAAZ,EFOE,CAAV;ACVA,ACIQ,AFOR,AFUA,AK3BM,aHiBG,MCXT,CHqBgB,AK3BN,CL2BV,CK3BY,CFMZ,EENU,CAAM,CHiBhB,CAAwB,GEPL,CCVG,GAAZ,CAAJ,KDUuB,GAAV,CAAc,IFOjC,EAA+C,UEP5B,CAAX,AFOR,GAA6D,EAAE,KAA/D;AENQ,AFOT,AFUC,AK3BqC,aL2B5B,cAAT,CAAwB,GIjBL,KAAK,IAAL,CAAU,AJiB7B,EAAuC,OIjBD,EJiBtC,EIjB6B,CJiBsB,EAAnD,EIjB+C,gBAA5B,CAAX;AACG,AFOb,AFWE,AK5BA,QL4BI,CEXG,MFWI,QEXb,AFWqB,AK5BnB,CDUe,AFOO,AGjBtB,CDUW,ACVX,CAAA,GL4BW,CAAe,KAAf,AK5BX,CL4BA,CK5BM,KHiBR,AGjBa,CAAL,CHiBoC,AGjB1C,CAAA,EAAqC,aHiBvC,CAA6D,OAA7D,EAAsE,WAAtE;AAEA,AFUE,QAAI,CEVN,OFUc,CAAZ,KEVF,GAAA;ACdC,ADeC,AFWA,AKhCqC,QHqB/B,IAAI,CFWV,MAAA,GAAA,CEXsB,SAAS,cAAT,CAAwB,oBAAxB,EAAmE,KAA/E,CAAV;ACbF,ADcE,AFWE,AKhCF,QHqBM,CCdR,GDcY,MFWE,CGzBd,AEPE,CFOoB,EHyBlB,CEXoB,AGrBtB,GDUkB,CCVmB,GDUf,CDHxB,CDciC,CCdU,QCGX,KFWR,CAAwB,CEXhB,CAAA,CAAA,CAAA,SAAA,EAAA,CAAA,CAAA,GFWR,EAAmE,KAA/E,CAAV;AEVI,AFWJ,AFYE,AKjCF,QHqBM,IAAI,AFYJ,CAAJ,UEZoB,AGrBtB,CAAA,CDUS,ACVT,CAAA,EDUI,GAAW,CFWgB,GGrB/B,CDUoB,CCVd,EDUS,CAAS,ECVb,CDUI,CAAa,ACVf,EHqBS,CAAwB,GGrBnC,CAAS,CDUL,ACVM,CDUjB,ICVsB,EAAN,GAAW,GAApB,CAAL,CHqBgB,AGrBtB,CAAA,CHqByF,CGrBpD,IHqB3B,CAAV;AEVI,AFWJ,AFYE,YAAM,CEZC,GFYG,SAAS,EIvBjB,AFWJ,CEXI,AFWoB,CEXpB,CAAA,SAAA,AJuBQ,CIvBR,AJuBgC,EIvB1B,CFWV,EAAyC,KAAzC,CAA+C,EFYnC,CAAV,YEZF,GAAiE,SAAO,CAAP,GAAQ,IAAR,GAAa,CAAb,GAAc,IAAd,GAAmB,CAAnB,GAAoB,GAArF;AACD,AFYG,AKnCF,ULmCI,SAAF,AKnCF,CLmCc,GKnCd,GLmCE,CAAmB,AKnCgB,YLmCnC;AG5BF,ACII,AFaN,AFYI,AKnCF,SHuBO,OFYG,IAAR,GG7BF,ACII,AFaN,AGvBE,CFMA,ADiBsB,AGvBtB,CFMA,AENA,CFMA,AENA,CDUI,IAAM,IDJV,AENA,EFMM,AENA,EFME,GENG,EHuBb,AGvBe,CFMC,CDiB8B,ICjBtC,AENK,CAAS,CFMC,IENI,EFME,AENP,EFMd,CENwB,CFM9B,ADiBF,CCjBE,ADiB6D,CGvBlD,CAAL,CAAN,CAAA,EAAqC,CHuBvC,EAAwE,aAAxE;AACA,AFYM,SEZG,QFYE,MEZX,CAAwB,EFYlB,kBEZN,EAA8C,gBAA9C,CAA+D,OAA/D,EAAwE,aAAxE;AClBE,ADmBF,AFYQ,AKrCN,SHyBO,UCnBP,AENA,CLqCU,GG/BV,ADmBF,AGzBE,CHyBsB,GGzBe,CLqCnB,EAAR,GAAa,EAAjB,EAAqB,OEZ7B,EAA8C,gBAA9C,CAA+D,OAA/D,EAAwE,aAAxE;AClBE,ACCgC,AFmBlC,AFWU,AKrCR,SH0BF,UAAA,GAAA,AFWY,CG/BV,AENA,CFMA,AENA,CFMA,AENA,CFMA,AENA,KLqCQ,CAAY,GG/BpB,AH+BQ,AKrCR,CLqCwB,CG/BlB,AENA,EFME,GENG,CAAL,EFMQ,GH+BN,GG/BF,EAAgB,MAAM,EAAtB,EAAN,CAAA;ADqBA,AFWO,AKrCP,aH0BS,cAAT,CAAwB,cAAxB,EAAwC,KAAxC,CAA8C,OAA9C,GAAwD,OAAxD;ACrBA,ADsBD,AFWO,AKvCN,iBAAA,EFMA,AENqC,IFMrC;AACA,ACIE,AFkBJ,AFYM,SEZG,QFYE,MGlCT,ADsBF,CCtBE,ADsBsB,CCtBtB,ACIO,CDJP,ECIE,AJ8BE,GI9BS,GAAG,CDJhB,CDsBF,CCtBQ,CDsB8B,CCtB5B,ACIK,EAAX,IDJY,OAAR,EAAiB,ADsBzB,CAAuD,KCtBxB,EAAvB,ADsBR,ECtBE,ADsB8D,CCtB9D,SDsBF;AEjBI,AFmBJ,AFWQ,AK1CN,SH+BF,UAAA,AG/BE,GH+BF,CG/BE,IDYE,ACZmC,CDYnC,CAAA,CAAA,SAAA,CAAA,EAAM;ADLR,ADyBA,AFWM,aEXG,MCzBT,CHoCU,GGpCV,IDyBA,CAAwB,SFWG,CAArB,EAAwB,EEX9B,EAAwC,KAAxC,CAA8C,OAA9C,GAAwD,MAAxD;AEpBE,AFqBH,AFWS,qBGpCJ,CAAC,CCIH,IAAA,AJgCa,IIhCP,IDJJ,AHoCI,OGpCJ,CAAA,CAAA,CAAA,SAAA,EAAA,CAAA,CAAA;AACF,ADyBJ,AFWS,SEXA,cCzBL,ADyBJ,CCzBI,ADyBoB,CCzBpB,CAAA,SAAA,EAAM,EAAN,ADyBJ,CCzBI,CDyBqC,gBAAzC,CAA0D,OAA1D,EAAmE,UAAnE;AAEA,AFUQ,AK5CP;AFOG,AD4BJ,AFWM,AK5CN,IAAI,UAAkB,GL4CX,CK5CX,CFKI,IAAA,OHuCE;AInCH,AF0BH,AFUQ,AK3CR,KDJG,IFqCH,AGjCA,KAAA,GAAA,EHiCA,GAAA,OFUqB,CAAb;AIlCL,AFyBD,AFUM,AK3CN,QAAM,GDQL,EFyBQ,EGjCI,KDQZ,AJmCS,CInCT,GCRqB,GHiCtB,CEzBC,AFyBuB,GEzBxB,EJmCuB,CAAjB,EAAoB,EK3Cb,CAAwB,GHiCrC,CEzBA,CFyBwC,KAAxC,CAA8C,KGjCjC,CAAb,CHiCA,GAAwD,OAAxD;AACD,AFUS,AK1CR,QAAM,SAAS,SAAS,ML0CJ,CAAZ,OK1CO,CAAwB,kBAAxB,CAAf;AHkCF,AFSU,AK1CR,SHiCF,EGjCS,KAAP,GHiCF,AGjCiB,GHiCjB,CGjCE,IL0Ce,QAAP;AERR,AFSO,AK1CP,WAAO,EHiCE,IGjCT,GAAgB,IAAhB,GHiCA,CAAwB,cAAxB,EAAwC,KAAxC,CAA8C,OAA9C,GAAwD,MAAxD;ACjCD,ACKG,AF6BH,AFSO,AKzCN,QAAM,MAAM,OAAO,MDGjB,CAAA,CAAA,CAAA,CCHU,CAAkB,IAAlB,CAAZ,EDGE,EAAM,KAAK,IAAL,CAAU,QAAV,CAAN,CAAA,EAA0B;ADH9B,ADkCA,AFQQ,AKzCN,QAAI,CFDN,ADkCA,KAAA,GAAA,AGjCE,GAAgB,OFDlB,EECE,CFDF;ACGI,AFgCF,AFSI,AK1CJ,QAAI,KHiCK,GGjCT,CL0CS,AK1CI,CAAb,EAAgB,CAAhB,EDCE,ACDiB,IDCjB,AFgCF,AGjCA,CHiCwB,CFSpB,AK1CqB,EDCG,ECD5B,UHiCA,EAAyC,KAAzC,CAA+C,OAA/C,GAAyD,MAAzD;AE/BE,AFgCF,AFSM,AKzCN,QAAI,QAAQ,CAAZ,UDAE,CAAA,CAAA,AJyCiB,CIzCjB,AJyCI,SIzCJ,EAAM,KAAK,IAAL,CAAU,WAAV,CAAN,CAAA;AFiCF,AFSM,AKzCN,aAAA,OLyCU,CKzCV,CAAmB,IAAnB,CLyCiB,CKzCgB,EAAjC,EAA2C,ILyCrC,EAAsB;AG7C5B,ACGE,AFkCF,AFSQ,AKzCN,YAAI,SAAJ,EFLF,ACGE,CDHF,CAAA,CAAA,CCGE,KJ2CkB,GG9CpB,AH8CQ,EG9CF,UAAN,CAAA,EAAiB;ACIf,AFkCH,AFSS,AKzCN,YAAI,WAAJ,GAAkB,CDFlB,AJ2Ca,CI3Cb,CAAA,CAAA,KJ2CM,AKzCN,IDFA,EAAM,KAAK,IAAL,CAAU,UAAV,CAAN,CAAA;ADJF,ADwCF,AFQS,AKzCL,SHiCJ,GGjCQ,OFPN,CDwCF,CAAsB,AGjClB,CHiCJ,CCxCE,CDwC+B,AGjCb,CAAhB,EFPe,MDwCnB,EAAmD;ACvCjD,ACGE,AFqCF,AFQM,AKzCJ,QHiCI,IGjCA,KHiCS,CGjCb,CAAW,IFPb,ACGE,CDHF,AEOkB,CFPlB,AEOE,CFPF,CCGE,ACImB,KAAK,CAAxB,EFPF,EAAM,ADwCN,YCxCA,CAAA;ACIE,AFqCF,AFQM,AKzCJ,QHiCE,IAAI,AGjCF,MAAJ,CAAW,EHiCI,CGjCD,CAAd,EAAiB,EDJjB,CAAA,ACIoB,CDJpB,ACIA,CDJA,OFqCM,CACN,CEtCA,CFsCE,CEtCI,AFsCN,GAAM,EEtCK,IAAL,CAAU,AFsCH,OEtCP,CAAN,CAAA,EFqCM,EAEN,EAAE,CAAF,GAAM,OAAO,WAFP,CAAR;ACzCA,AD6CA,AFMI,AK1CF,YAAI,MAAJ,CFTF,IAAA;AACA,ACGE,AF0CF,AFMM,AK1CJ,WHoCK,EGpCA,GHoCK,EAAE,EAAF,AFMF,GGnDV,ACGE,CDHF,AESE,CFTF,AD6CqB,AFMN,CGnDf,CCGE,ACMmB,IL0CX,CENV,CFMM,CENwB,CC7C9B,EAAM,EESyB,KAAV,GAAe,EFTpC,CAAA,QESqB,GAA2B,KAAK,KAAL,CAAW,GAAG,CAAd,CAA3B,GAA2C,IAA3C,GAAgD,KAAK,KAAL,CAAW,GAAG,CAAd,CAAhD,GAAgE,GAAnF;AHqCA,AFMI,AK1CJ,YHoCI,QFMI,CENR,AFMI,EENW,AFMJ,OAAO,CAAP;AGpDb,AD+CI,AF7BF,AKPD,cHoCK,KC/CN,IAAA,AD+CI,CAAY,GAAZ,CAAgB,OAAhB;AC9CJ,AD+CG,AFMD,AKzCF,QAAI,CHiCF,KGjCQ,CHmCD,GGnCK,KFZd,CAAA,CAAA,CAAA,CEYc,OAAJ,CFZV,AEYqB,CAAX,CFZJ,CEYkB,OAAO,EAArB,CAAV,CFZA,CAAA;ACGC,AF6CG,AFMF,AKzCF,KDfC,GCeK,ILyCA,EENA,AGnCM,GLyCD,CKzCK,KHmCZ,CAAY,AFMd,EAAkB,CKzCJ,GHmCZ,CAAmB,GGnCX,CAAW,GHmCnB,CGnCQ,EAAiB,CAAjB,CAAZ;AFbA,ACKC,AF4CE,AFMC,AKzCJ,QAAM,GDTL,ICSY,IFdb,CCKC,CAAA,CJkDa,CGvDd,AEcqB,MAAR,CAAe,GDT3B,ECSgC,CDTjC,ECS4B,CAAf,CAAb,ILyCoC,IIlDpC,EJkDc,CAAV;AGtDJ,ADiDE,AFMC,AKxCH,YHkCM,CGlCN,CHkCQ,KGlCR,GAAA,CFfA,CAAA,CAAA,CAAA,CDiDE,QCjDF,EAAM,UAAN,CAAA;ADkDC,AFMA,AKxCC,kBAAU,IAAV;AFhBF,ADmDD,AFOC,AKxCE,YAAM,ELwCE,EKxCE,GFlBZ,EEkBiB,EFlBjB,IEkBY,EAAV,OLwC8B,MAAtB,CAAV;AGzDA,ACIE,AFgDJ,AFMC,AKxCG,SHkCJ,GGlCQ,CAAJ,EAAO,OHkCX,CCpDE,ADoDsB,CCpDtB,CAAA,ADoDF,CCpDE,CCIE,AFgDgC,CEhDhC,CAAA,CAAA,IFgDJ,CCpDE,CDoDoD,CCpD9C,ECIJ,EAAM,EFgDV,EAAsE,CEhDvD,EDJI,ECIT,CAAU,CDJZ,CAAN,CAAA,QCIQ,CAAN,CAAA;AFiDF,AFxDF,AKsBM,QHkCE,AFxDR,IEwDY,CFxDZ,GAAA,KEwDqB,AFxDrB,AKsBe,GAAT,EAAc,IAAI,GAAJ,CAAQ,CHkChB,AGlCQ,CHkCgB,AGlC9B,EHkCM,CAAV;ACrDA,ACIE,AFkDF,AFMF,AKxCM,QHkCA,CFMN,IAAA,GAAA,EKxCY,CFpBV,ADsDe,GGlCD,CFpBd,ACIE,AFkDF,EAAqB,AGlCX,CAAQ,CDhBhB,ACgBQ,CAAN,OHkC2B,EAAV;ACrDrB,ACIE,AFkDF,AFMA,AKxCG,QHkCC,AFMA,OAAJ,EAAa,EENE,ICtDf,ADsDA,CCtDA,CAAA,ADsDqB,CCtDrB,CCIE,CAAA,CAAA,CAAA,KDJF,ADsD+B,ECtDzB,ADsDe,CFMa,CG5D1B,ACIN,EAAM,IDJM,AH4DD,CIxDA,IAAL,CDJF,ACIY,EDJI,KCId,CDJoB,ACI1B,CAAA,CDJI,EAAN,CAAA;ADuDA,AFMA,AKxCE,QHkCI,IGlCA,ELwCI,CENG,EAAE,AGlCJ,CLwCX,MKxCE,EAAkB,YHkCP,EAAb;ACvDA,ACIE,AFoDF,AFMD,AKxCK,WHkCG,IAAI,ICxDX,GEsBc,CFtBd,ACIE,CFoDS,GEpDT,IFoDK,CACL,OAAO,KGnC2B,MHmClC,AGnCY,CAAV,EHmCmB,KAAK,IAA1B,GAAiC,KAAK,KAAL,GAAa,OADzC,EAEL,OAAO,WAAP,GAAqB,KAAK,GAA1B,GAAgC,KAAK,MAAL,GAAc,OAFzC,CAAP;ACvDA,AD2DD,AFDD,AKpCK,QLoCL,IAAA,GAAA,IAAA,IG1DE,CAAA,CAAA,CAAA,SAAA,EAAM,EAAE,MAAM,SAAR,EAAmB,MAAM,EAAzB,EAAN,CAAA;AD6DF,AFEA,AKxCG,IHsCG,kBAAkB,EAAxB;AC7DE,AD+DF,AFCA,AKvCE,SHsCF,KGtCY,KFzBV,ED+DF,CAAuB,CC/DrB,CD+DF,EAAmC,KAAnC,EAAiD,GGtCf,MAAtB,CAAV;AFxBA,ACGC,AF4DD,AFEF,AKxCC,KDzBE,GF+DK,CFER,GEFY,IFEZ,CAAmB,IEFE,AFErB,EGjEE,AHiEgC,CGjEhC,CAAA,CAAA,SAAA,AD+DU,CAAwB,CC/D5B,CD+DI,CC/DF,AD+DR,MC/Dc,MAAR,EAAgB,MAAM,EAAtB,EAAN,CAAA;ACKA,AF2DA,AGhFF,QHgFM,AGhFN,GDqBE,ECrBF,GAAA,CHgFe,GE3Db,CAAA,AF2DA,AGhFF,EHgFqB,KE3DnB,GAAA,AF2D2B,UE3DlB,CF2D6B,EE3DtC,AF2DwC,EE3DF,GF2DX,CAAR;AChEnB,ACME,AF2DF,AGtCF,QHsCQ,CGtCR,GDrBQ,CCqBR,EHsCe,CGtCf,CHsCiB,ECjEf,ECME,EDNF,CCMkB,KAAK,KAArB,IF2DW,EAAb;AChEA,ACME,AF2DF,AGtCA,QHsCM,AGtCF,IDrBE,AF2DI,GGtCV,EHsCe,AGtCF,GDrBX,CAAa,CF2DL,CCjEV,CAAA,CAAA,ADiEuB,CCjEvB,ACMoB,GAAL,CAAS,CAAT,GAAa,CDN5B,ACME,EDNI,ACMyB,CCqBG,CF3B1B,CDiER,EE3DoC,GDNtB,ACMiB,ACqBlB,CDrB2B,CAAT,GAAa,CAA1C,EDNI,ACMyC,EDNvB,ACMtB,EAAiD,EAAjD,EDN4B,EAAxB,EAAN,CAAA;ACOC,AF2DD,AFDA,AKrCA,KDxBA,GF8DM,MAAM,AGtCF,IAAV,OHsCuB,EAAE,CFDb,EECA,CAAZ,CFDA;AGjEA,ACQF,AF2DE,AFDA,AKrCD,QHsCO,GE3DR,GF2Dc,GE3Dd,EDRE,IAAA,AHkEA,CAAA,CECuB,AFDvB,CAAA,CECyB,GAAb,CAAZ,IFDA,EAAM,SAAN,CAAA;AGjEA,AC/BF,AFkGE,AG1CF,CDxDA,EAAA,KFkGQ,AG1CR,IH0CY,AG1CZ,CH0Ca,EG1Cb,IAAA,EH0CqB,ECnEnB,CAAA,ADmEU,CCnEV,CAAA,GDmE2B,MCnE3B,ADmEiC,ECnE3B,CDmEI,CCnEF,ADmER,MCnEc,KAAR,EAAe,MAAM,EAArB,EAAN,CAAA;ACSF,AF2DE,AFHA,IIxDE,OF2DK,GE3Da,CF2DT,GE3Db,CJwDE,IAAA,CEGW,OAAJ,CACL,OAAO,WAAP,GAAqB,KAAK,IAA1B,GAAiC,kBAAkB,EAAnD,GAAwD,IAAI,CADvD,EAEL,OAAO,WAAP,GAAqB,KAAK,GAA1B,GAAgC,KAAK,MAAL,GAAc,EAFzC,CAAP;ACpEA,ACWF,AF6DC,AFNC,SIvDF,KAAA,GAAA,EDXE,IAAA,AHkEA,CAAA,CAAA,CAAA,UAAA,EAAO,OAAP,CAAA;AGjEA,ACWA,AF8DF,QE9DQ,CF8DR,QE9DiB,IF8DjB,CAAuB,CCzErB,CAAA,ADyEF,CCzEE,CAAA,ACWwB,AF8DS,CAAnC,EAA4C,MCzE1C,EAAM,EAAE,CCWO,CAAwB,IDXzB,OAAR,EAAiB,MAAM,ACWd,CAAf,CDXM,EAAN,CAAA;ACYA,AF8DA,QAAM,GE9DC,CF8DG,IE9DV,GAAe,EF8DI,EE9DnB,YF8DU,CAAwB,EAAxB,CAAV;AC1EA,ACaA,AF8DA,AFTD,QESO,GE9DC,IF8DM,EE9Db,AF8De,EC3Ef,CCagB,GDbhB,CCaA,cF8Da,EAAb;AE5DA,AF6DA,AFRF,QIrDQ,AF6DA,CFRR,GEQY,KAAK,CFRjB,CAAqB,CIrDD,AJqDpB,EEQY,AFRkB,EIrDN,CF6DC,KE7DL,CAAW,KAAX,EAAkB,EF6DpC,KE7DkB,CAAlB;AACA,AF6DA,QE7DM,AF6DA,KAAK,OAAO,CE7DC,IAAI,MAAJ,AF6DR,CE7DmB,EF6DE,IE7Db,CF6DkB,CE7DC,GF6D3B,GAAiC,CE7DzB,CAAnB,gBF6D8D,EAA9D;AE3DA,AF4DA,QAAM,IAAI,CE5DV,IF4De,GE5Df,AF4DU,CAAS,CAAT,CE5DV,CF4DsB,KAAK,GAAL,CAAS,CAAC,IAAI,EAAL,IAAW,CAApB,EAAuB,CAAvB,CAAZ,CAAV;AC7ED,ACkBG,AF4DF,QAAM,IE5DE,EF4DI,IE5DE,OAAO,AF4DE,EAAE,GAAb,CAAZ,IE5Dc,CAAkB,IAAlB,CAAZ;ADhBJ,ACiBI,AF4DF,AFXA,IGlEE,ID6EI,IE5DA,EDjBc,AD6ER,IC7Ed,GCiBI,GAAgB,CF4DK,EAAE,GAAb,CAAZ,CFXgB,CIjDd,AJiDF;AGhEF,ACgBI,AF4DF,AFXA,MEWE,GC5EJ,ED4EE,CE5DM,EDhBR,AD4EY,GC5EZ,GCgBI,AF4DW,CE5DE,CAAb,CJiDF,CIjDkB,AJiDlB,CIjDE,AJiDF,CEWmB,AFXnB,CIjDqB,AF4DD,IE5DlB,EAAyB,AF4DD,EFX1B,CEWmB,CE5DjB,AJiDI,GEW2B,CAAvB,CAAV,MFXA,CAAA;AGhEA,ACgBE,AF4DH,QC5EO,UCgBM,CDhBK,MCgBf,CAAkB,EDhBM,CCgBxB,aDhBe,CAAwB,gBAAxB,CAAjB;AACA,ACgBE,AF6DJ,AFdE,IEcE,SC7EO,MCgBI,AJ+Cb,CEc0B,GFd1B,CG/DA,AD6EF,EE7DI,CDhBqB,ACgBF,EDhBrB,CCgBE;ADdF,ACeC,AF6DH,QC5EQ,CD4ER,MC5Ee,MD4Ef,CAAuB,CC5EA,ED4EvB,EAAkC,EC5EnB,CAAe,oBAAf,CAAb;AAEA,ACeA,AF4DA,QE5DM,AF4DA,KC3EN,AD2EW,EE5DE,IDfb,GAAA,CCeqB,IF4DI,ME5DZ,CAAmB,AF4DrB,CE3DT,CF2DgC,CAAvB,EAA0B,CAA1B,CAAX,EE3DU,OAAR,CAAgB,UAAU,OAAV,CAAkB,IAAlB,CAAuB,SAAvB,CAAhB,CAD8B,EAE9B,QAAQ,OAAR,CAAgB,WAAW,YAAX,CAAwB,IAAxB,CAA6B,UAA7B,CAAhB,CAF8B,CAAnB,CAAb;ADdE,ACmBF,AFwDA,QAAM,IC3EE,AD2EE,CExDV,GDnBY,AD2EE,GExDd,AFwDU,CAAQ,CC3ED,CCmBjB,AFwDU,CAAV,IC3EY,EAAV;AACA,ACmBA,AFwDF,AFjBD,QEiBO,IC3EA,AD2EI,CExDH,IDnBI,EAAE,ACmBX,EFwDiB,EC3EjB,EAAiB,UD2ET,CAAwB,cAAxB,CAAV;AC1EI,ACmBF,AFwDF,AFhBF,MEgBI,GFhBJ,EEgBE,CAAQ,IAAR,GAAkB,CFhBpB,CG3De,AD2EO,CAAF,CFhBpB,EEgBuB,IAArB,GC3EI,IAAwB,EAAE,IAA1B;AACD,ACmBD,AFwDF,MAAE,KAAF,CAAQ,GAAR,GExDY,AFwDK,EAAE,CAAF,GAAG,IAApB,YExDkC,MAAtB,CAAV;ADlBA,ACmBD,AFwDD,QAAI,IC3EE,KAAK,ID2EX,EAAmB,CC3EjB,EAAkB,SD2EW,aAAZ,EAA2B,KAA3B;AC1Ef,ACoBJ,AFuDA,cEvDU,EFuDE,GAAZ,EAAiB,CC3EH,GD2Ed,WEvDgC,MAAtB,CAAV,CDpBoC,MAAtB,CAAV;AACD,ACoBJ,AFuDC,AFnBA,oBEmBgB,GFnBhB,CEmBoB,AFnBpB,CAAA,CAAA,GEmBgB,EAAhB,IFnBA,EAAM,aAAN,CAAA;AGvDC,ACTH,AFoFC,QEpFD,KAAA,GAAA,KAAA;ADWE,ACmBF,AFwDA,AFtBE,SIlCF,AFwDA,IExDA,CDnBY,ECmBZ,AFwDA,CAAkB,EFtBhB,CEsBF,EAA6B,CFtB3B,aGrDgC,MAAtB,CAAV;AA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","file":"src.ead40ee2.map","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [0, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Check if the value is an iterator.\n *\n * @param v The value to check\n */\nfunction isIterator(v) {\n    if (v == null || typeof v !== 'object') {\n        return false;\n    }\n    return 'next' in v && typeof v.next === 'function';\n}\nvar runningCoroutine = null;\n/**\n * The Lua-like pseudo-coroutine that wraps iterators.\n */\nvar Coroutine = /** @class */ (function () {\n    /**\n     * Create a new coroutine to iterate `start` first.\n     * Read `create<T>` for details.\n     *\n     * @param start Iterator to be started to iterate first\n     */\n    function Coroutine(start) {\n        this.waitingFrames = 0;\n        this.iteratorStack = [];\n        if (start) {\n            this.iteratorStack.push({ iterator: start, deferFns: [] });\n        }\n    }\n    Object.defineProperty(Coroutine.prototype, \"isAlive\", {\n        /**\n         * Whether this coroutine is alive.\n         */\n        get: function () {\n            return 0 < this.iteratorStack.length;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Stop this coroutine.\n     */\n    Coroutine.prototype.stop = function () {\n        this.iteratorStack = [];\n    };\n    /**\n     * Resume the current iterator and receive the yielded value at the next frame.\n     * This method will return nulls forever after the coroutine stops.\n     *\n     * @returns The value at the next frame\n     */\n    Coroutine.prototype.resume = function (resumeValue) {\n        var result = null;\n        if (--this.waitingFrames < 1) {\n            if (this.iteratorStack.length === 0) {\n                return null;\n            }\n            var wait = 1; // will be set waitingFrames\n            var exception = void 0;\n            while (0 < this.iteratorStack.length) {\n                // get the next value `yield`ed from the current iterator\n                var frame = this.iteratorStack[this.iteratorStack.length - 1];\n                var iterator = frame.iterator;\n                var r = null;\n                var ex = null;\n                runningCoroutine = this;\n                try {\n                    if (exception != null) {\n                        if (!iterator.throw) {\n                            throw exception;\n                        }\n                        r = iterator.throw(exception);\n                    }\n                    else {\n                        r = iterator.next(resumeValue);\n                    }\n                }\n                catch (e) {\n                    ex = e;\n                }\n                exception = null;\n                runningCoroutine = null;\n                if (ex != null) {\n                    var e = this.popStack();\n                    if (e != null)\n                        ex = e; // TODO: composed error\n                    exception = ex;\n                    continue;\n                }\n                resumeValue = undefined;\n                if (r.done) {\n                    var ex_1 = this.popStack();\n                    if (ex_1 != null) {\n                        exception = ex_1;\n                        continue;\n                    }\n                }\n                var y = r.value;\n                if (typeof y === 'undefined') {\n                    if (r.done) {\n                        // bare `return` (continue the caller iterator on the stack top)\n                        continue;\n                    }\n                    // bare `yield` (wait 1 frame)\n                    y = null;\n                }\n                if (isIterator(y)) {\n                    // pause and save the current iterator and start the `yield`ed iterator\n                    var iterator_1 = y;\n                    this.iteratorStack.push({ iterator: iterator_1, deferFns: [] });\n                    continue;\n                }\n                else if (typeof y === 'number') {\n                    // wait `y` frames\n                    wait = y;\n                    break;\n                }\n                else {\n                    // `y` is a value of `T`\n                    if (r.done && 0 < this.iteratorStack.length) {\n                        // y is `return`ed from the current iterator so it has been stopped,\n                        // and y is to be the value of `yield` expression in the caller iterator\n                        resumeValue = y;\n                        continue;\n                    }\n                    // y is the `resume()` value of the current frame\n                    result = y;\n                    wait = 1;\n                    if (result && typeof result.wait === 'number') {\n                        wait = result.wait;\n                    }\n                    break;\n                }\n            }\n            if (exception != null) {\n                throw exception;\n            }\n            this.waitingFrames = Math.ceil(wait);\n        }\n        return result;\n    };\n    Coroutine.prototype.pushIterator = function (iter) {\n        this.iteratorStack.push({ iterator: iter, deferFns: [] });\n    };\n    Coroutine.prototype.defer = function (fn) {\n        if (this.iteratorStack.length === 0) {\n            throw new Error('luacoro.defer() must be called from within a coroutine');\n        }\n        this.iteratorStack[this.iteratorStack.length - 1].deferFns.push(fn);\n    };\n    Coroutine.prototype.popStack = function () {\n        if (this.iteratorStack.length === 0)\n            return null;\n        var deferFns = this.iteratorStack.pop().deferFns;\n        var ex = null;\n        // TODO: call all deferFns and return composed error\n        try {\n            for (var i = deferFns.length - 1; 0 <= i; i--) {\n                deferFns[i]();\n            }\n        }\n        catch (e) {\n            ex = e;\n        }\n        return ex;\n    };\n    return Coroutine;\n}());\nexports.Coroutine = Coroutine;\n/**\n * Register `fn` to be invoked when exiting the caller iterator.\n * Works like [Golang's defer](https://golang.org/ref/spec#Defer_statements).\n *\n * @param fn Callback\n */\nfunction defer(fn) {\n    if (!runningCoroutine) {\n        throw new Error('luacoro.defer() must be called from within a coroutine');\n    }\n    runningCoroutine.defer(fn);\n}\nexports.defer = defer;\n/**\n * Create a new coroutine to iterate `start` first.\n *\n * `start` normally must be an iterator generated by a generator\n * implemented to `yield` (or `return`) values of the following 3 types:\n *\n * - `o`: An instance of arbitary class or plain `object` | `string` | `Array`\n *   - `resume()` returns `o`.\n *   - If `o` has a `wait` field, `resume()` returns `null`\n *     through `o.wait - 1` frames after that.\n *     The iterator is not resumed while this, which means that\n *     this coroutine waits `n` frames including the current frame.\n *\n * - `n`: A `number`\n *   - `resume()` returns `null`.\n *   - After that, `resume()` returns `null` through `n - 1` frames.\n *     The iterator is not resumed while this, which means that\n *     this coroutine waits `n` frames including the current frame.\n *\n * - `i`: An `Iterator` of the same type as `start`\n *   - When `i` is `return`ed, the current iterator is terminated\n *     and `i` is immediately started to iterate as the replacement.\n *   - When `i` is `yield`ed, the current iterator is paused and pushed onto the stack,\n *     and `i` is immediately started to iterate.\n *     After `i` is terminated, the caller iterator is popped from the stack\n *     and continued to be iterated.\n *     At this time, the return value of `i` can be got.\n *\n * @param start Iterator to be started to iterate first\n */\nfunction create(start) {\n    if (start instanceof Coroutine) {\n        return start;\n    }\n    if (isIterator(start)) {\n        return new Coroutine(start);\n    }\n    return new Coroutine(start());\n}\nexports.create = create;\n/**\n * Coroutine that wraps multiple iterators and yields results in an array.\n */\nvar ComposedCoroutine = /** @class */ (function (_super) {\n    __extends(ComposedCoroutine, _super);\n    /**\n     * Create a new coroutine to iterate all `coroutines`.\n     * Read `all<T>` and `race<T>` for details.\n     *\n     * @param coroutines Coroutines or iterators\n     * @param fnAlive Callback to judge this coroutine is alive or not\n     */\n    function ComposedCoroutine(coroutines, fnAlive) {\n        var _this = _super.call(this) || this;\n        _this.children = [].concat(coroutines);\n        _this.pushIterator(_this.main(fnAlive));\n        return _this;\n    }\n    /**\n     * Add a `coroutine` to iterate together.\n     * @param c Coroutine or iterator\n     */\n    ComposedCoroutine.prototype.add = function (coroutine) {\n        this.children.push(create(coroutine));\n    };\n    ComposedCoroutine.prototype.main = function (fnAlive) {\n        var result, _i, _a, coro;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    if (!true) return [3 /*break*/, 2];\n                    result = [];\n                    for (_i = 0, _a = [].concat(this.children); _i < _a.length; _i++) {\n                        coro = _a[_i];\n                        result.push(coro.resume());\n                    }\n                    if (!fnAlive(this.children))\n                        return [2 /*return*/, result];\n                    return [4 /*yield*/, result];\n                case 1:\n                    _b.sent();\n                    return [3 /*break*/, 0];\n                case 2: return [2 /*return*/];\n            }\n        });\n    };\n    return ComposedCoroutine;\n}(Coroutine));\nexports.ComposedCoroutine = ComposedCoroutine;\n/**\n * Create a new coroutine to iterate all `coroutines` concurrently.\n * This coroutine will never die.\n *\n * Additional coroutines can be added by `add<T>()`.\n * Dead coroutines will be removed automatically.\n *\n * @param coroutines Coroutines or iterators\n * @returns Composed coroutine\n */\nfunction concurrent(coroutines) {\n    return new ComposedCoroutine(coroutines.map(function (c) { return create(c); }), function (children) {\n        for (var i = children.length - 1; 0 <= i; i--) {\n            if (!children[i].isAlive)\n                children.splice(i, 1);\n        }\n        return true;\n    });\n}\nexports.concurrent = concurrent;\n/**\n * Create a new coroutine to iterate all `coroutines`\n * concurrently until the all of them are dead.\n *\n * Dead coroutines will not be removed to keep array indexes of the `yield`ed value.\n * Adding coroutines by `add<T>()` is discouraged.\n *\n * @param coroutines Coroutines or iterators\n * @returns Composed coroutine\n */\nfunction all(coroutines) {\n    return new ComposedCoroutine(coroutines.map(function (c) { return create(c); }), function (children) {\n        for (var _i = 0, children_1 = children; _i < children_1.length; _i++) {\n            var coro = children_1[_i];\n            if (coro.isAlive)\n                return true;\n        }\n        return false;\n    });\n}\nexports.all = all;\n/**\n * Create a new coroutine to iterate all `coroutines`\n * concurrently until one of them is dead.\n *\n * Array indexes of the `yield`ed value will be keeped.\n * Adding coroutines by `add<T>()` is discouraged.\n *\n * @param coroutines Coroutines or iterators\n * @returns Composed coroutine\n */\nfunction race(coroutines) {\n    return new ComposedCoroutine(coroutines.map(function (c) { return create(c); }), function (children) {\n        if (children.length === 0)\n            return false;\n        for (var _i = 0, children_2 = children; _i < children_2.length; _i++) {\n            var coro = children_2[_i];\n            if (!coro.isAlive)\n                return false;\n        }\n        return true;\n    });\n}\nexports.race = race;\n/**\n * Create a new coroutine that repeats\n * generating iterator and iterating it forever.\n *\n * @param generator Generator (instance methods must be `bind`ed, be careful)\n * @returns Composed coroutine\n */\nfunction forever(generator) {\n    return new Coroutine(function () {\n        var coro, isNew, v;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (!true) return [3 /*break*/, 2];\n                    isNew = false;\n                    if (!(coro && coro.isAlive)) {\n                        coro = new Coroutine(generator());\n                        isNew = true;\n                    }\n                    v = coro.resume();\n                    if (!coro.isAlive && v == null && !isNew) {\n                        return [3 /*break*/, 0];\n                    }\n                    return [4 /*yield*/, v];\n                case 1:\n                    _a.sent();\n                    return [3 /*break*/, 0];\n                case 2: return [2 /*return*/];\n            }\n        });\n    }());\n}\nexports.forever = forever;\n//# sourceMappingURL=index.js.map","import * as luacoro from 'luacoro'\n\n///////////////////////////////////////////////////////////////////////////\n// Main game system and API implementations\n\nlet mode: string\n\nlet limitKeys: string[]\nlet lastKey: string\nwindow.addEventListener('keydown', (e: KeyboardEvent) => {\n  if (mode !== 'waitKey') return\n  if (limitKeys && limitKeys.indexOf(e.key) < 0) return\n  lastKey = e.key\n  mode = 'normal'\n  limitKeys = null\n})\n\nlet luminance: number\nfunction updateLuminance () {\n  const e = document.getElementById('inn-content')\n  e.style.background = `rgb(${luminance}, ${luminance}, ${luminance})`\n}\n\nfunction message (msg: string) {\n  const e = document.createElement('div') as HTMLDivElement\n  e.textContent = msg\n  document.getElementById('inn-content').appendChild(e)\n}\n\nlet waitingFrames: number\n\nlet request: number = null\n\nexport function start () {\n  mode = 'normal'\n  limitKeys = null\n  lastKey = null\n  luminance = 255\n  updateLuminance()\n  waitingFrames = 0\n  document.getElementById('inn-content').innerHTML = ''\n\n  let coro = luacoro.create(inn())\n  let frame = 0\n\n  function update () {\n    request = null\n\n    let r\n    const e = document.getElementById('inn-content')\n    e.classList.remove('showCursor')\n    switch (mode) {\n      case 'waitKey':\n        if (frame % 60 < 30) {\n          e.classList.add('showCursor')\n        }\n        break\n\n      case 'waitFrame':\n        waitingFrames--\n        if (waitingFrames <= 0) {\n          mode = 'normal'\n        }\n        break\n\n      case 'waitFadeOut':\n        luminance -= 5\n        if (luminance <= 0) {\n          luminance = 0\n          mode = 'normal'\n        }\n        updateLuminance()\n        break\n\n      case 'waitFadeIn':\n        luminance += 5\n        if (255 <= luminance) {\n          luminance = 255\n          mode = 'normal'\n        }\n        updateLuminance()\n        break\n\n      default:\n        r = coro.resume()\n        if (r) mode = r\n    }\n    frame++\n    if (coro.isAlive) {\n      request = requestAnimationFrame(update)\n    }\n  }\n\n  request = requestAnimationFrame(update)\n}\n\nexport function stop () {\n  if (request) cancelAnimationFrame(request)\n  request = null\n}\n\n///////////////////////////////////////////////////////////////////////////\n// Helpers\n\nfunction* waitKey (keys?: string[]): luacoro.Iterator<string> {\n  limitKeys = keys\n  yield 'waitKey'\n  return lastKey\n}\n\nfunction* waitFrame (f: number): luacoro.Iterator<string> {\n  waitingFrames = f\n  yield 'waitFrame'\n}\n\nfunction* waitFadeOut (): luacoro.Iterator<string> {\n  yield 'waitFadeOut'\n}\n\nfunction* waitFadeIn (): luacoro.Iterator<string> {\n  yield 'waitFadeIn'\n}\n\n///////////////////////////////////////////////////////////////////////////\n// Scenario implementations\n\nfunction* inn (): luacoro.Iterator<string> {\n  message('Welcome to the traveler\\'s Inn.')\n  message('Room and board is 6 GOLD per night.')\n  message('Dost thou want a room? (Y/N)')\n  const key = yield waitKey(['y', 'n'])\n\n  if (key === 'y') {\n    message('Good night.')\n    yield waitFrame(30)\n    yield waitFadeOut()\n    yield waitFrame(30)\n    // player.money -= 6\n    // player.hp = player.maxHP\n    // player.mp = player.maxMP\n    yield waitFadeIn()\n    message('Good morning.')\n    message('Thou hast had a good night\\'s sleep I hope.')\n    yield waitKey()\n  }\n\n  message('I shall see thee again.')\n  yield waitKey()\n}\n","export default class Vector {\n  x: number\n  y: number\n\n  constructor (x: number = .0, y: number = .0) {\n    this.x = x\n    this.y = y\n  }\n\n  clone (): Vector {\n    return new Vector(this.x, this.y)\n  }\n\n  size (): number {\n    return Math.sqrt(this.x * this.x + this.y * this.y)\n  }\n\n  add (v: Vector): Vector {\n    return new Vector(this.x + v.x, this.y + v.y)\n  }\n\n  sub (v: Vector): Vector {\n    return new Vector(this.x - v.x, this.y - v.y)\n  }\n\n  mul (r: number): Vector {\n    return new Vector(this.x * r, this.y * r)\n  }\n\n  div (r: number): Vector {\n    return new Vector(this.x / r, this.y / r)\n  }\n\n  normalize (): Vector {\n    return this.div(this.size())\n  }\n\n  rotate (rad: number): Vector {\n    const c = Math.cos(rad)\n    const s = Math.sin(rad)\n    return new Vector(\n      this.x * c - this.y * s,\n      this.x * s + this.y * c\n    )\n  }\n\n  lerp (v: Vector, r: number): Vector {\n    return new Vector(\n      this.x * (1 - r) + v.x * r,\n      this.y * (1 - r) + v.y * r\n    )\n  }\n}\n","import * as luacoro from 'luacoro'\nimport Vector from './vector'\n\nlet request: number = null\nlet coro: luacoro.ComposedCoroutine<{}>\n\nexport function start () {\n  coro = luacoro.concurrent([ guide() ])\n\n  function update () {\n    coro.resume()\n    request = requestAnimationFrame(update)\n  }\n\n  request = requestAnimationFrame(update)\n}\n\nexport function stop () {\n  if (request) cancelAnimationFrame(request)\n  request = null\n  coro = null\n  reset()\n}\n\n///////////////////////////////////////////////////////////////////////////\n// Event handlers\n\nfunction updateTitle () {\n  const e = document.getElementById('guide-form-title') as HTMLInputElement\n  document.getElementById('guide-preview-title').textContent = e.value\n}\ndocument.getElementById('guide-form-title').addEventListener('input', updateTitle)\n\nfunction updateBgColor () {\n  const r = parseFloat((document.getElementById('guide-form-color-r') as HTMLInputElement).value)\n  const g = parseFloat((document.getElementById('guide-form-color-g') as HTMLInputElement).value)\n  const b = parseFloat((document.getElementById('guide-form-color-b') as HTMLInputElement).value)\n  document.getElementById('guide-preview').style.backgroundColor = `rgb(${r}, ${g}, ${b})`\n}\ndocument.getElementById('guide-form-color-r').addEventListener('input', updateBgColor)\ndocument.getElementById('guide-form-color-g').addEventListener('input', updateBgColor)\ndocument.getElementById('guide-form-color-b').addEventListener('input', updateBgColor)\n\nfunction showDialog () {\n  document.getElementById('guide-dialog').style.display = 'block'\n}\ndocument.getElementById('guide-open').addEventListener('click', showDialog)\n\nfunction hideDialog () {\n  document.getElementById('guide-dialog').style.display = 'none'\n}\ndocument.getElementById('guide-form-ok').addEventListener('click', hideDialog)\n\n///////////////////////////////////////////////////////////////////////////\n// Helpers\n\nfunction showCursor () {\n  document.getElementById('guide-cursor').style.display = 'block'\n}\n\nfunction hideCursor () {\n  document.getElementById('guide-cursor').style.display = 'none'\n}\n\nfunction reset () {\n  document.getElementById('guide-message').style.display = 'none'\n  hideDialog()\n  hideCursor()\n  disableBlocker()\n}\n\nfunction updateHover (p: Vector, isFocused: boolean) {\n  const revert = disableBlockerTemp()\n  let e = document.elementFromPoint(\n    p.x - window.pageXOffset,\n    p.y - window.pageYOffset\n  )\n  revert()\n  while (e && e.id !== 'guide') {\n    if (isFocused) {\n      e.classList.add('hover')\n    } else {\n      e.classList.remove('hover')\n    }\n    e = e.parentElement\n  }\n}\n\nfunction getElementPos (id: string, anchorX?: number, anchorY?: number): Vector {\n  const e = document.getElementById(id) as HTMLElement\n  if (anchorX == null) anchorX = .5\n  if (anchorY == null) anchorY = .5\n  const rect = e.getBoundingClientRect()\n  return new Vector(\n    window.pageXOffset + rect.left + rect.width * anchorX,\n    window.pageYOffset + rect.top + rect.height * anchorY\n  )\n}\n\nconst sliderThumbSize = 12\n\nfunction getSliderPos (id: string, value?: number): Vector {\n  const e = document.getElementById(id) as HTMLInputElement\n  if (value == null) value = parseFloat(e.value)\n  const rect = e.getBoundingClientRect()\n  const w = rect.width - sliderThumbSize\n  const min = parseFloat(e.min)\n  const max = parseFloat(e.max)\n  const r = (value - min) / (max - min)\n  return new Vector(\n    window.pageXOffset + rect.left + sliderThumbSize * .5 + w * r,\n    window.pageYOffset + rect.top + rect.height * .5\n  )\n}\n\nfunction setSliderPos (id: string, x: number) {\n  const e = document.getElementById(id) as HTMLInputElement\n  const rect = e.getBoundingClientRect()\n  const w = rect.width - sliderThumbSize\n  const x0 = window.pageXOffset + rect.left + sliderThumbSize * .5\n  const r = Math.max(0, Math.min((x - x0) / w, 1))\n  const min = parseFloat(e.min)\n  const max = parseFloat(e.max)\n  e.value = `${min + (max - min) * r}`\n}\n\nlet lastCursorPos: Vector = null\nfunction setCursorPos (pos: Vector) {\n  const p0 = getElementPos('guide', 0, 0)\n  const p = pos.sub(p0)\n  const e = document.getElementById('guide-cursor') as HTMLElement\n  e.style.left = `${p.x}px`\n  e.style.top = `${p.y}px`\n  if (lastCursorPos) updateHover(lastCursorPos, false)\n  updateHover(pos, true)\n  lastCursorPos = pos.clone()\n}\n\nfunction message (msg: string) {\n  const e = document.getElementById('guide-message') as HTMLDivElement\n  e.textContent = msg\n  e.style.display = 'block'\n}\n\nfunction enableBlocker () {\n  const e = document.getElementById('guide-blocker') as HTMLDivElement\n  e.style.display = 'block'\n}\n\nfunction disableBlocker () {\n  const e = document.getElementById('guide-blocker') as HTMLDivElement\n  e.style.display = 'none'\n}\n\nfunction disableBlockerTemp () {\n  const e = document.getElementById('guide-blocker') as HTMLDivElement\n  const d = e.style.display\n  e.style.display = 'none'\n  return function () {\n    e.style.display = d\n  }\n}\n\nfunction easingIn (v: number): number {\n  return v * v * v\n}\n\nfunction easingOut (v: number): number {\n  return 1 - easingIn(1 - v)\n}\n\nfunction easingInOut (v: number): number {\n  if (.5 < v) return 1 - easingInOut(1 - v)\n  return easingIn(v * 2) * .5\n}\n\n///////////////////////////////////////////////////////////////////////////\n// Guide implementations\n\n// const waitFrames = 3\n// const longWaitFrames = 12\n// const baseMoveFrames = 1\n// const moveFramesPerDistance = .01\n// const beforeTypeFrames = 2\n// const typeFrames = 1\n\nconst waitFrames = 30\nconst longWaitFrames = 120\nconst baseMoveFrames = 15\nconst moveFramesPerDistance = .15\nconst beforeTypeFrames = 20\nconst typeFrames = 4\n\nconst clickEffectFrames = 30\n\nconst exampleTitles = [\n  'JavaScript tutorial',\n  'My diary'\n]\nconst exampleColors = [\n  [ 128, 192, 255 ],\n  [ 255, 255, 128 ]\n]\nlet trial = 0\n\nfunction *moveTo (to: Vector, fn?: (r: number, p: Vector) => void): luacoro.Iterator<{}> {\n  const from = lastCursorPos.clone()\n  const distance = to.sub(from).size()\n  const frames = Math.ceil(baseMoveFrames + distance * moveFramesPerDistance)\n  for (let i = 1; i < frames; i++) {\n    const r = easingInOut(i / (frames - 1))\n    const p = from.lerp(to, r)\n    setCursorPos(p)\n    if (fn) fn(r, p)\n    yield // wait 1 frame\n  }\n  setCursorPos(to)\n  if (fn) fn(1.0, to)\n  yield // wait 1 frame\n}\n\nfunction *moveSlider (id: string, valueTo: number, fn: () => void) {\n  yield moveTo(getSliderPos(id))\n  yield moveTo(getSliderPos(id, valueTo), (r: number, p: Vector) => {\n    setSliderPos(id, p.x)\n    if (fn) fn()\n  })\n}\n\nfunction *inputText (id: string, text: string, fn?: (e: HTMLInputElement, text: string) => void): luacoro.Iterator<{}> {\n  const e = document.getElementById(id) as HTMLInputElement\n  e.focus()\n  e.setSelectionRange(0, e.value.length)\n  yield beforeTypeFrames\n  for (let i = 1; i <= text.length; i++) {\n    e.value = text.substr(0, i)\n    if (fn) fn(e, e.value)\n    yield typeFrames\n  }\n}\n\nfunction addClickEffect () {\n  coro.add(function* (): luacoro.Iterator<{}> {\n    const p0 = getElementPos('guide', 0, 0)\n    const p = lastCursorPos.sub(p0)\n\n    const e = document.createElement('div')\n    e.classList.add('guide-click-effect')\n    document.getElementById('guide').appendChild(e)\n    luacoro.defer(() => {\n      e.remove()\n    })\n    e.style.left = `${p.x}px`\n    e.style.top = `${p.y}px`\n\n    for (let i = 1; i <= clickEffectFrames; i++) {\n      const s = easingOut(i / clickEffectFrames)\n      e.style.transform = `translate(-50%, -50%) scale(${s}, ${s})`\n      e.style.opacity = `${1 - s}`\n      yield\n    }\n  })\n}\n\nfunction* waitDialogShown (): luacoro.Iterator<{}> {\n  while (document.getElementById('guide-dialog').style.display === 'none') {\n    yield\n  }\n}\n\nfunction* waitDialogHidden (): luacoro.Iterator<{}> {\n  while (document.getElementById('guide-dialog').style.display !== 'none') {\n    yield\n  }\n}\n\nfunction* guide (): luacoro.Iterator<{}> {\n  reset()\n  enableBlocker()\n  setCursorPos(getElementPos('guide'))\n  showCursor()\n  yield waitFrames\n\n  message('To customize theme, click the gear icon at top-right.')\n  yield waitFrames\n  yield moveTo(getElementPos('guide-open'))\n  yield waitFrames\n  addClickEffect()\n  showDialog()\n  message('The settings dialog is appeared.')\n  yield longWaitFrames\n\n  message('Input your blog title.')\n  yield waitFrames\n  yield moveTo(getElementPos('guide-form-title', .9))\n  yield waitFrames\n  const title = exampleTitles[trial % exampleTitles.length]\n  addClickEffect()\n  yield inputText('guide-form-title', title, () => updateTitle())\n  yield waitFrames\n\n  message('Change background color.')\n  yield waitFrames\n  const color = exampleColors[trial % exampleColors.length]\n  yield moveSlider('guide-form-color-r', color[0], () => updateBgColor())\n  yield moveSlider('guide-form-color-g', color[1], () => updateBgColor())\n  yield moveSlider('guide-form-color-b', color[2], () => updateBgColor())\n  trial++\n  yield waitFrames\n\n  message('Click \"OK\" button.')\n  yield waitFrames\n  yield moveTo(getElementPos('guide-form-ok'))\n  yield waitFrames\n  addClickEffect()\n  hideDialog()\n  yield longWaitFrames\n\n  hideCursor()\n  disableBlocker()\n  message('Your turn now. Click the gear icon.')\n  yield waitDialogShown()\n\n  message('Good. Cutomize your own blog and click \"OK\" button.')\n  yield waitDialogHidden()\n\n  message('Excellent! This is the end of this tutorial.')\n  yield longWaitFrames\n\n  reset()\n}\n","import * as luacoro from 'luacoro'\n\nconst bpm = 160 // tempo\nconst n8 = Math.round(60 * 60 / bpm / 2) // frame count of 8th note\nconst n4 = n8 * 2\nconst n4d = n8 * 3\nconst n1 = n8 * 8\n\ninterface MessageFrame {\n  text: string\n  wait: number\n}\n\nfunction* maryHadA (): luacoro.Iterator<MessageFrame> {\n  yield { text: 'Ma', wait: n4d } // `resume()` returns this value and\n                                  // wait `n4d` frames with suspending here\n  yield { text: 'ry ', wait: n8 }\n  yield { text: 'had ', wait: n4 }\n  yield { text: 'a ', wait: n4 }\n}\n\nfunction* littleLamb (withoutRest?: boolean): luacoro.Iterator<MessageFrame> {\n  yield { text: 'lit', wait: n4 }\n  yield { text: 'tle ', wait: n4 }\n  yield { text: 'lamb ', wait: n4 }\n  if (!withoutRest) {\n    yield n4\n  }\n}\n\nfunction* maryHadALittleLamb (): luacoro.Iterator<MessageFrame> {\n  yield maryHadA() // To go to another iterator and come back, just yield it\n  yield littleLamb()\n  yield littleLamb()\n  yield littleLamb()\n  yield maryHadA()\n  yield littleLamb(true)\n  yield { text: 'its ', wait: n4 }\n  yield { text: 'fleece ', wait: n4 }\n  yield { text: 'was ', wait: n4 }\n  yield { text: 'white ', wait: n4 }\n  yield { text: 'as ', wait: n4 }\n  yield { text: 'snow ', wait: n1 }\n}\n\nlet request: number = null\n\nexport function start () {\n  const textarea = document.getElementById('basic-textarea') as HTMLTextAreaElement\n  textarea.textContent = ''\n\n  const coro = luacoro.create(maryHadALittleLamb())\n\n  function update () {\n    const v = coro.resume()\n    if (v && v.text) {\n      textarea.textContent += v.text\n    }\n    if (coro.isAlive) {\n      request = requestAnimationFrame(update)\n    }\n  }\n\n  request = requestAnimationFrame(update)\n}\n\nexport function stop () {\n  if (request) cancelAnimationFrame(request)\n  request = null\n}\n","import * as luacoro from 'luacoro'\nimport Vector from './vector'\n\nconst size = 300\nconst topLeft = new Vector(size * .3, size * .3)\nconst topRight = new Vector(size * .7, size * .3)\nconst bottomRight = new Vector(size * .7, size * .7)\nconst bottomLeft = new Vector(size * .3, size * .7)\nconst absoluteVelocity = 3\n\nclass Sprite {\n  style: string\n  pos: Vector\n\n  constructor (style: string, pos: Vector) {\n    this.style = style\n    this.pos = pos.clone()\n  }\n\n  *move (to: Vector): luacoro.Iterator<{}> {\n    const distance = to.sub(this.pos)\n    const direction = distance.normalize()\n    const velocity = direction.mul(absoluteVelocity)\n    const division = Math.ceil(distance.size() / absoluteVelocity)\n    for (let i = 1; i < division; i++) {\n      this.pos = this.pos.add(velocity)\n      yield // wait 1 frame\n    }\n    this.pos = to.clone()\n    yield // wait 1 frame\n  }\n\n  *goRound (): luacoro.Iterator<{}> {\n    yield this.move(topRight) // To go to another iterator and come back, just yield it\n    yield this.move(bottomRight)\n    yield this.move(bottomLeft)\n    yield this.move(topLeft)\n  }\n\n  *backAndForth (): luacoro.Iterator<{}> {\n    yield this.move(bottomRight)\n    yield this.move(topLeft)\n  }\n\n  repaint (ctx: CanvasRenderingContext2D) {\n    ctx.fillStyle = this.style\n    ctx.fillRect(this.pos.x - 8, this.pos.y - 8, 16, 16)\n  }\n}\n\nlet request: number = null\n\nexport function start () {\n  const canvas = document.getElementById('concurrent-canvas') as HTMLCanvasElement\n  canvas.width = size\n  canvas.height = size\n\n  const redSprite = new Sprite('red', topLeft)\n  const blueSprite = new Sprite('blue', topLeft)\n\n  function repaint () {\n    const ctx = canvas.getContext('2d')\n    ctx.fillStyle = '#eeeeee'\n    ctx.fillRect(0, 0, size, size)\n    redSprite.repaint(ctx)\n    blueSprite.repaint(ctx)\n  }\n\n  const coro = luacoro.concurrent([\n    luacoro.forever(redSprite.goRound.bind(redSprite)),\n    luacoro.forever(blueSprite.backAndForth.bind(blueSprite))\n  ])\n\n  function update () {\n    coro.resume()\n    repaint()\n    request = requestAnimationFrame(update)\n  }\n\n  request = requestAnimationFrame(update)\n}\n\nexport function stop () {\n  if (request) cancelAnimationFrame(request)\n  request = null\n}\n","import * as luacoro from 'luacoro'\nimport Vector from './vector'\n\nconst eps = 2.0\nconst size = 300\n\nfunction* koch (v: Vector): luacoro.Iterator<Vector> {\n  if (v.size() <= eps) {\n    yield v // resume() returns v and wait 1 frame\n            // (different from `return v`, be careful)\n    return // back to the caller iterator (with no return value)\n  }\n  const t = v.mul(1.0 / 3.0)\n                                       // /\\\n  yield koch(t)                        // \n  yield koch(t.rotate(-Math.PI / 3.0)) //   /\n  yield koch(t.rotate(Math.PI / 3.0))  //    \\\n  yield koch(t)                        //     \n  // back to the caller iterator (with no return value)\n}\n\nlet request: number = null\n\nexport function start () {\n  const info = document.getElementById('recursion-info') as HTMLDivElement\n\n  const canvas = document.getElementById('recursion-canvas') as HTMLCanvasElement\n  canvas.width = size\n  canvas.height = size\n\n  const ctx = canvas.getContext('2d')\n  ctx.fillStyle = '#eeeeee'\n  ctx.fillRect(0, 0, size, size)\n\n  let frame = 0\n  function drawLine (from: Vector, to: Vector) {\n    ctx.beginPath()\n    ctx.strokeStyle = '#000000'\n    ctx.lineWidth = 1\n    ctx.moveTo(from.x, from.y)\n    ctx.lineTo(to.x, to.y)\n    ctx.stroke()\n    info.textContent = `frame: ${frame} / pos: (${Math.round(to.x)}, ${Math.round(to.y)})`\n    frame++\n  }\n\n  let pos = new Vector(0, size * .8)\n  const vec = new Vector(size, 0)\n  const coro = luacoro.create(koch(vec))\n\n  function update () {\n    request = null\n\n    const v = coro.resume()\n    if (v) {\n      drawLine(pos, pos.add(v))\n      pos = pos.add(v)\n    }\n    if (coro.isAlive) {\n      request = requestAnimationFrame(update)\n    }\n  }\n\n  request = requestAnimationFrame(update)\n}\n\nexport function stop () {\n  if (request) cancelAnimationFrame(request)\n  request = null\n}\n","import * as inn from './inn'\nimport * as guide from './guide'\nimport * as basic from './basic'\nimport * as concurrent from './concurrent'\nimport * as recursion from './recursion'\n\ninterface Demo {\n  start (): void\n  stop (): void\n}\n\nconst examples: {[name: string]: Demo} = {\n  inn,\n  guide,\n  basic,\n  concurrent,\n  recursion\n}\n\nconst buttons = document.getElementById('buttons') as HTMLDivElement\nbuttons.innerHTML = ''\nlet currentDemo: Demo = null\n\nfor (let name in examples) {\n  const button = document.createElement('button') as HTMLButtonElement\n  button.textContent = name\n  buttons.appendChild(button)\n  button.addEventListener('click', function (button: HTMLButtonElement, name: string) {\n    button.blur()\n    startDemo(name)\n  }.bind(null, button, name))\n}\n\nfunction startDemo (name: string) {\n  if (window.location.hash.length < 2 || window.location.hash.substr(1) !== name) {\n    window.location.hash = '#' + name\n  }\n  const demo = examples[name]\n  const divs = document.getElementsByClassName('example')\n  for (let i = 0; i < divs.length; i++) {\n    divs[i].classList.remove('visible')\n  }\n  document.getElementById(name).classList.add('visible')\n  if (currentDemo) currentDemo.stop()\n  demo.start()\n  currentDemo = demo\n}\n\nfunction onHashChange () {\n  if (2 <= window.location.hash.length) {\n    const name = window.location.hash.substr(1)\n    for (let n in examples) {\n      if (name === n) {\n        startDemo(name)\n        break\n      }\n    }\n  }\n}\nwindow.addEventListener('hashchange', onHashChange)\nonHashChange()\n"]}