{"version":3,"sources":["node_modules/luacoro/dist/index.js","src/inn.ts","src/vector.ts","src/guide.ts","src/basic.ts","src/concurrent.ts","src/recursion.ts","src/index.ts"],"names":[],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AEvZA,IAAA,SAAA,aAAA,YAAA;AAIE,aAAA,MAAA,CAAa,CAAb,EAA6B,CAA7B,EAA2C;AAA9B,YAAA,MAAA,KAAA,CAAA,EAAA;AAAA,gBAAA,EAAA;AAAc;AAAE,YAAA,MAAA,KAAA,CAAA,EAAA;AAAA,gBAAA,EAAA;AAAc;AACzC,aAAK,CAAL,GAAS,CAAT;AACA,aAAK,CAAL,GAAS,CAAT;AACD;AAED,WAAA,SAAA,CAAA,KAAA,GAAA,YAAA;AACE,eAAO,IAAI,MAAJ,CAAW,KAAK,CAAhB,EAAmB,KAAK,CAAxB,CAAP;AACD,KAFD;AAIA,WAAA,SAAA,CAAA,IAAA,GAAA,YAAA;AACE,eAAO,KAAK,IAAL,CAAU,KAAK,CAAL,GAAS,KAAK,CAAd,GAAkB,KAAK,CAAL,GAAS,KAAK,CAA1C,CAAP;AACD,KAFD;AAIA,WAAA,SAAA,CAAA,GAAA,GAAA,UAAK,CAAL,EAAc;AKjBhB,ALkBI,IKlBJ,MAAA,KLkBW,IAAI,IKlBf,ELkBW,CAAW,KKlBtB,ALkB2B,CAAL,GAAS,EAAE,CKlBjC,ALkBW,CKlBX,CAAA,ALkBoC,KAAK,CAAL,GAAS,EAAE,CAApC,CAAP;AKjBJ,ALkBG,IKlBH,CLgBE,OKhBF,aAAA,QAAA,SAAA,CAAA,CAAA;AACA,ALmBE,IKnBF,OLmBE,CKnBF,QLmBE,CAAA,GAAA,CKnBF,ELmBE,MKnBF,ILmBO,CAAL,EAAc,EKnBhB,CAAA,CAAA;AACA,ALmBI,IKnBJ,WLmBW,EKnBX,ELmBe,MAAJ,CAAW,IKnBtB,CLmB2B,CAAL,GAAS,EAAE,CKnBjC,ALmBW,EAAyB,KAAK,CAAL,GAAS,EAAE,CKnB/C,ALmBW,CKnBX,ALmBI,CKnBJ;AACA,ALmBG,IKnBH,CLiBE,WKjBF,aAAA,QAAA,aAAA,CAAA,CAAA;AAOA,ALcE,IKdI,OLcJ,IKduC,KLcvC,CAAA,GAAA,GAAA,UAAK,CAAL,EAAc;AKbd,ALcE,SKdC,GADoC,GLe9B,IAAI,MAAJ,CAAW,KAAK,CAAL,GAAS,CAApB,EAAuB,KAAK,CAAL,GAAS,CAAhC,CAAP;AKbF,ALcC,KAFD,MKZK,KAFkC;AAGvC,ALeA,WKfK,ALeL,KKlBuC,ILkBvC,CAAA,GAAA,GAAA,UAAK,CAAL,EAAc;AKdd,ALeE,eAAO,CKfC,GLeG,MAAJ,CKnB8B,ALmBnB,KAAK,CAAL,GAAS,CAApB,EAAuB,KAAK,CAAL,GAAS,CAAhC,CAAP;AKdF,ALeC,KAFD,UKbS;AAL8B,ALsBvC,CKtBF,ULsBE,SAAA,CAAA,SAAA,GAAA,YAAA;AKdF,ALeI,IKfE,UAAU,CLeL,KAAK,GKfS,ALed,CAAS,KAAK,IAAL,EAAT,CAAP,CKfY,CAAwB,SAAxB,CAAhB;AACA,ALeG,KAFD,GKbM,SAAR,GAAoB,EAApB;AACA,ALgBE,IKhBE,OLgBF,OKhBsB,ELgBtB,CAAA,CKhBF,KLgBE,GAAA,UAAQ,GAAR,EAAmB;AKdrB,ALeI,KKfC,IAAI,GLeC,CKfV,GLec,CKfG,ILeE,GAAL,CKfd,ALeuB,EKfI,CLeb,CAAV;AKdF,ALeE,QKfI,ILeE,IAAI,CKfG,ILeE,GAAL,CAAS,CKfG,ELeZ,CAAV,UKfa,CAAuB,QAAvB,CAAf;AACA,ALeE,WKfK,ILeE,IAAI,GKfb,GAAqB,ALeZ,CACL,GKhBJ,ELgBS,CAAL,GAAS,CAAT,GAAa,KAAK,CAAL,GAAS,CADjB,EAEL,KAAK,CAAL,GAAS,CAAT,GAAa,KAAK,CAAL,GAAS,CAFjB,CAAP;AKdF,ALkBC,KAPD,OKXQ,WAAR,CAAoB,MAApB;AACA,ALmBA,WKnBO,ALmBP,SAAA,CAAA,IAAA,EKnBA,CAAwB,ALmBxB,OKnBA,EAAiC,CLmB3B,CAAN,EAAiB,CAAjB,EAA0B,GKnBiB,MAAV,EAAqC,IAArC,EAAiD;AAChF,ALmBA,eKnBO,ALmBA,IKnBP,ALmBW,MAAJ,CACL,KAAK,CAAL,IAAU,IAAI,CAAd,IAAmB,EAAE,CAAF,GAAM,CADpB,EAEL,KAAK,CAAL,IAAU,IAAI,CAAd,IAAmB,EAAE,CAAF,GAAM,CAFpB,CAAP;AKlBA,ALsBD,KALD,UKjBS,QAAP,CAAgB,IAAhB,GAAuB,MAAM,IAA7B;AACD,ALsBH,KKzBmC,CAG/B,IAH+B,CAG1B,ALsBT,IKzBmC,EAGpB,ALsBf,MKzBmC,EAGZ,IAHY,CAAjC;AAID,AL/BD,CAAA,EAAA;AKiCA,SAAA,SAAA,CAAoB,IAApB,EAAgC;AAC9B,QAAM,OAAO,SAAS,IAAT,CAAb;AACA,QAAM,OAAO,SAAS,sBAAT,CAAgC,SAAhC,CAAb;AACA,SAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,KAAK,MAAzB,EAAiC,GAAjC,EAAsC;AACpC,aAAK,CAAL,EAAQ,SAAR,CAAkB,MAAlB,CAAyB,SAAzB;AACD;AACD,aAAS,cAAT,CAAwB,IAAxB,EAA8B,SAA9B,CAAwC,GAAxC,CAA4C,SAA5C;AACA,QAAI,WAAJ,EAAiB,YAAY,IAAZ;AACjB,SAAK,KAAL;AACA,kBAAc,IAAd;AACD;AAED,SAAA,YAAA,GAAA;AACE,QAAI,KAAK,OAAO,QAAP,CAAgB,IAAhB,CAAqB,MAA9B,EAAsC;AACpC,YAAM,OAAO,OAAO,QAAP,CAAgB,IAAhB,CAAqB,MAArB,CAA4B,CAA5B,CAAb;AACA,aAAK,IAAI,CAAT,IAAc,QAAd,EAAwB;AACtB,gBAAI,SAAS,CAAb,EAAgB;AACd,0BAAU,IAAV;AACA;AACD;AACF;AACF,ANtDH,IAAA,UAAA,aAAA,QAAA,SAAA,CAAA,CAAA;AMuDC,ANrDD;AMsDA,ANrDA,OMqDO,gBAAP,CAAwB,YAAxB,EAAsC,YAAtC;AACA,ANpDA,IAAI,IAAJ;AAEA,IAAI,SAAJ;AACA,IAAI,OAAJ;AGRA,AHSA,IGTA,GHSO,OGTP,SHSA,CAAwB,GGTxB,MHSA,EGTA,AHSmC,SGTnC,CAAA,AHSoC,CGTpC,AHSmC,EAAiB;AGPpD,ADFA,AFUE,IGRI,ADFN,IFUM,EGRM,GAAZ,CDFA,CCEgB,EHQD,SAAb,CEVF,CFU0B,OEV1B,SAAA,CAAA,CAAA;ACGA,ADFA,AFUE,IGRI,ADFN,IFUM,CGRK,KAAK,CDFhB,ICEW,CAAW,CHQH,IGRQ,EAAL,GAAU,CDFhC,AFU6B,EGRP,GAAgB,CAA3B,CAAX,AHQmB,CEVnB,AFUqC,CGRI,CHQF,GAApB,IAA2B,CEV9C,AFUE,CEVF,CAAA,AFUiD;AGPjD,ADDA,AFSE,IGRI,ADDF,KCCO,KAAK,ADDM,AFSV,CGRZ,CHQc,EETd,CFSE;AGPF,ADDA,AFSE,IGRI,ADDF,IAAJ,ECCY,CHQH,IGRQ,CAAjB,GHQE;AGPF,ACNA,AFMA,AFQE,IGRI,ACNN,KDMW,ADAX,KCAgB,ACNhB,AFMA,CCAA,CHQc,CERd,GFQE,OIdF,QAAA,SAAA,CAAA,CAAA;ADaA,ACZA,AFME,AFQD,CAND,GIRA,KDYA,EDNS,IENT,EDYA,EDNiB,CCMjB,SDNS,CAAmB,CEN5B,AFM8B,OAAF,CEN5B,AFMS,CAAP,SENF,CAAA,CAAA;AAEA,AFME,AFQF,AKjBA,IDGM,AJcF,AKjBJ,ODGa,EFMX,AFQF,CIdA,ACHA,KHSE,GAAA,KGTF,QAAA,SAAA,CAAA,CAAA;ADIA,AFMI,AFQJ,AKjBA,IDGM,ACHN,KLiBA,IERS,CENO,CCHhB,GDGoB,CFMhB,KFQJ,GIdoB,AJcpB,IKjBA,GDGgB,CAAW,ICH3B,GDGkC,EAAlB,EAAsB,GCHtC,CAAA,CAAA,EDG6C,EAA7B,CAAhB;AACA,AFMI,AFQF,AKhBF,IDEM,ACFA,ILgBE,EKhBI,ELgBA,CKhBZ,EDEiB,GFMH,CENO,EJcA,OIdA,OAAJ,AJcL,CIdgB,AJcQ,IERA,GEND,EAAlB,CFMH,CENyB,AFMnC,EFQQ,CAAV,IId4C,EAA7B,CAAjB;ADSE,ACRF,AFMG,AFQD,AKhBF,IDEM,ACFA,ELgBF,KAAF,AKhBW,CLgBH,EKhBV,IDEoB,IAAI,AJctB,CGNA,CAAA,CAAA,AHMqB,CGNrB,KCRsB,GJcM,CGN5B,EAAM,CCRY,CDQV,ACRqB,IJcR,EGNP,CCRsB,AJcC,EIdnB,CDQZ,CCRkC,AJcnB,CGND,EHMsB,IGNhB,ACRqB,EAA7B,CAApB,EJcuB,GAA8B,IAA9B,GAAmC,SAAnC,GAA4C,GAAjE;AGLgC,ACRlC,AFOE,AFOD,AKfD,IDCM,KCDN,IAAA,CHQY,AGRI,CAAhB,EDCmB,ACDM,IDCF,SAAA,MFOW,CEPf,CAAW,IFOlB,CAAV,EEPmC,EAAlB,EAAsB,OAAO,EAA7B,CAAnB;ADOQ,ACNR,AFOC,AFQD,IIfM,KJeN,OAAA,CGTE,AHSgB,CGThB,EAAgC,AHSlC,EAA6B,CIfJ,CAAzB;AAEA,AFJA,AFkBE,IIdF,IFJA,AFkBQ,IAAI,CIdZ,AFJA,GAAA,KAAA,AFkBqB,KIdrB,QJcY,CAAuB,GIdnC,EJcY,CAAV;AGVA,ACAA,AFGF,AFQE,MAAE,GERJ,IEHE,AFGF,GAAA,CFQE,EGXA,ACAA,CAAa,AJWG,GGXhB,AHWA,EIXA,EDAgC,ACAJ,GAA5B,EAAuC;ADCP,ACA9B,AFGF,AFQA,QERI,KEHG,AJWE,EERT,EAAa,CEHX,GAAa,KAAb,CJWF,CAAwB,UERU,GFQlC,EAAuC,EER1B,SFQb,CAAmD,CAAnD;AGVA,ACAE,AFGF,AFQD,aIXQ,CFGG,EEHR,EFGF,CEHa,GCTT,CFSJ,ACAiB,CDAjB,AETM,CFSN,CAAA,ECAa,ACTT,EDSF,ICTc,CFShB,EAAM,EAAE,CETJ,KFSU,EETV,CAAA,CAAA,CFSE,AETF,EFSiB,MAAM,CETvB,CFSE,CETF,CFSJ,AETI,CFSJ,AETI;ADUH,AFGD,AFSF,AKrBI,ILqBA,OETK,IAAP,EFSF,MKrBI,CAAA,CAAA,CAAA,SAAA,EAAM;AFOwB,ACI/B,AFED,AFUF,AKtBY,ILsBR,OIZD,GJYmB,IAAtB,EIZG,CAAA,IAAA,GAAD,UAAO,EAAP,EAAiB;ADHjB,ADMD,AFWD,AKzBI,SLyBJ,KAAA,GAAA,AKzBI,EFQF,AERU,IFQV;AACA,ADAF,AFiBE,QEjBF,GFiBS,CEjBT,GAAA,IAAA,AFiBE,IGjBA,CAAA,CAAA,CAAA,SAAA,EAAM,EAAE,MAAM,MAAR,EAAgB,MAAM,EAAtB,EAAN,CAAA;ADOF,AFWE,AK3BE,gBL2BU,GK3BV,CL2BF,GK3BE,IAAQ;AFSV,ADQF,AFWE,AK3BU,cL2BA,IAAV,CGnBA,IAAA;AACA,ACEQ,AFOV,AFUE,AK3BE,SHiBJ,OFUc,GAAZ,CEVF,GCTE,ADSF,AGjBI,CFQF,AERE,CFQF,AERE,CFQF,AERE,KDUiB,GAAG,CDFtB,CERE,CFQI,ACEa,ACVjB,CDUwB,CDFlB,AERC,IDUsB,EDFjB,CCEK,CAAX,EDFF,EAAc,MAAM,EAApB,EAAN,CAAA;ACGQ,AFOR,AFUA,QEVM,IAAI,SAAS,WEPC,GFOV,CAAwB,KEPL,SAAT,EAAZ,EFOE,CAAV;ACVA,ACIQ,AFOR,AFUA,AK3BM,aHiBG,MCXT,CHqBgB,AK3BN,CL2BV,CK3BY,CFMZ,EENU,CAAM,CHiBhB,CAAwB,GEPL,CCVG,GAAZ,CAAJ,KDUuB,GAAV,CAAc,IFOjC,EAA+C,UEP5B,CAAX,AFOR,GAA6D,EAAE,KAA/D;AENQ,AFOT,AFUC,AK3BqC,aL2B5B,cAAT,CAAwB,GIjBL,KAAK,IAAL,CAAU,AJiB7B,EAAuC,OIjBD,EJiBtC,EIjB6B,CJiBsB,EAAnD,EIjB+C,gBAA5B,CAAX;AACG,AFOb,AFWE,AK5BA,QL4BI,CEXG,MFWI,QEXb,AFWqB,AK5BnB,CDUe,AFOO,AGjBtB,CDUW,ACVX,CAAA,GL4BW,CAAe,KAAf,AK5BX,CL4BA,CK5BM,KHiBR,AGjBa,CAAL,CHiBoC,AGjB1C,CAAA,EAAqC,aHiBvC,CAA6D,OAA7D,EAAsE,WAAtE;AAEA,AFUE,QAAI,CEVN,OFUc,CAAZ,KEVF,GAAA;ACdC,ADeC,AFWA,AKhCqC,QHqB/B,IAAI,CFWV,MAAA,GAAA,CEXsB,SAAS,cAAT,CAAwB,oBAAxB,EAAmE,KAA/E,CAAV;ACbF,ADcE,AFWE,AKhCF,QHqBM,CCdR,GDcY,MFWE,CGzBd,AEPE,CFOoB,EHyBlB,CEXoB,AGrBtB,GDUkB,CCVmB,GDUf,CDHxB,CDciC,CCdU,QCGX,KFWR,CAAwB,CEXhB,CAAA,CAAA,CAAA,SAAA,EAAA,CAAA,CAAA,GFWR,EAAmE,KAA/E,CAAV;AEVI,AFWJ,AFYE,AKjCF,QHqBM,IAAI,AFYJ,CAAJ,UEZoB,AGrBtB,CAAA,CDUS,ACVT,CAAA,EDUI,GAAW,CFWgB,GGrB/B,CDUoB,CCVd,EDUS,CAAS,ECVb,CDUI,CAAa,ACVf,EHqBS,CAAwB,GGrBnC,CAAS,CDUL,ACVM,CDUjB,ICVsB,EAAN,GAAW,GAApB,CAAL,CHqBgB,AGrBtB,CAAA,CHqByF,CGrBpD,IHqB3B,CAAV;AEVI,AFWJ,AFYE,YAAM,CEZC,GFYG,SAAS,EIvBjB,AFWJ,CEXI,AFWoB,CEXpB,CAAA,SAAA,AJuBQ,CIvBR,AJuBgC,EIvB1B,CFWV,EAAyC,KAAzC,CAA+C,EFYnC,CAAV,YEZF,GAAiE,SAAO,CAAP,GAAQ,IAAR,GAAa,CAAb,GAAc,IAAd,GAAmB,CAAnB,GAAoB,GAArF;AACD,AFYG,AKnCF,ULmCI,SAAF,AKnCF,CLmCc,GKnCd,GLmCE,CAAmB,AKnCgB,YLmCnC;AG5BF,ACII,AFaN,AFYI,AKnCF,SHuBO,OFYG,IAAR,GG7BF,ACII,AFaN,AGvBE,CFMA,ADiBsB,AGvBtB,CFMA,AENA,CFMA,AENA,CDUI,IAAM,IDJV,AENA,EFMM,AENA,EFME,GENG,EHuBb,AGvBe,CFMC,CDiB8B,ICjBtC,AENK,CAAS,CFMC,IENI,EFME,AENP,EFMd,CENwB,CFM9B,ADiBF,CCjBE,ADiB6D,CGvBlD,CAAL,CAAN,CAAA,EAAqC,CHuBvC,EAAwE,aAAxE;AACA,AFYM,SEZG,QFYE,MEZX,CAAwB,EFYlB,kBEZN,EAA8C,gBAA9C,CAA+D,OAA/D,EAAwE,aAAxE;AClBE,ADmBF,AFYQ,AKrCN,SHyBO,UCnBP,AENA,CLqCU,GG/BV,ADmBF,AGzBE,CHyBsB,GGzBe,CLqCnB,EAAR,GAAa,EAAjB,EAAqB,OEZ7B,EAA8C,gBAA9C,CAA+D,OAA/D,EAAwE,aAAxE;AClBE,ACCgC,AFmBlC,AFWU,AKrCR,SH0BF,aFWY,CG/BV,AENA,CFMA,AENA,CFMA,AENA,CFMA,AENA,CH0BF,GAAA,CFWU,CAAY,GG/BpB,AH+BQ,AKrCR,CLqCwB,CG/BlB,AENA,EFME,GENG,CAAL,EFMQ,GH+BN,GG/BF,EAAgB,MAAM,EAAtB,EAAN,CAAA;ADqBA,AFWO,AKrCP,aH0BS,cAAT,CAAwB,cAAxB,EAAwC,KAAxC,CAA8C,OAA9C,GAAwD,OAAxD;ACrBA,ADsBD,AFWO,AKvCN,iBAAA,EFMA,AENqC,IFMrC;AACA,ACIE,AFkBJ,AFYM,SEZG,QFYE,MGlCT,ADsBF,CCtBE,ADsBsB,CCtBtB,ACIO,CDJP,ECIE,AJ8BE,GI9BS,GAAG,CDJhB,CDsBF,CCtBQ,CDsB8B,CCtB5B,ACIK,EAAX,IDJY,OAAR,EAAiB,ADsBzB,CAAuD,KCtBxB,EAAvB,ADsBR,ECtBE,ADsB8D,CCtB9D,iBDsBF;AEjBI,AFmBJ,AFWQ,AK1CN,SH+BF,UG/BE,IAAA,IDYE,AFmBJ,AG/BuC,CDYnC,CAAA,CAAA,AFmBJ,SEnBI,CAAA,EAAM;ADLR,ADyBA,AFWM,aEXG,MCzBT,CHoCU,GGpCV,IDyBA,CAAwB,SFWG,CAArB,EAAwB,EEX9B,EAAwC,KAAxC,CAA8C,OAA9C,GAAwD,MAAxD;AEpBE,AFqBH,AFWS,qBGpCJ,CAAC,CCIH,IAAA,AJgCa,IIhCP,IDJJ,AHoCI,OGpCJ,CAAA,CAAA,CAAA,SAAA,EAAA,CAAA,CAAA;AACF,ADyBJ,AFWS,SEXA,cCzBL,ADyBJ,CCzBI,ADyBoB,CCzBpB,CAAA,SAAA,EAAM,EAAN,ADyBJ,CCzBI,CDyBqC,gBAAzC,CAA0D,OAA1D,EAAmE,kBAAnE;AAEA,AFUQ,AK5CP;AFOG,AD4BJ,AFWM,AK5CN,IAAI,UAAkB,GL4CX,CK5CX,CFKI,IAAA,OHuCE;AInCH,AF0BH,AFUQ,AK3CR,KDJG,IFqCH,AGjCA,KAAA,GAAA,EHiCA,GAAA,OFUqB,CAAb;AIlCL,AFyBD,AFUM,AK3CN,QAAM,GDQL,EFyBQ,EGjCI,KDQZ,AJmCS,CInCT,GCRqB,GHiCtB,CEzBC,AFyBuB,GEzBxB,EJmCuB,CAAjB,EAAoB,EK3Cb,CAAwB,GHiCrC,CEzBA,CFyBwC,KAAxC,CAA8C,KGjCjC,CAAb,CHiCA,GAAwD,OAAxD;AACD,AFUS,AK1CR,QAAM,SAAS,SAAS,ML0CJ,CAAZ,OK1CO,CAAwB,kBAAxB,CAAf;AHkCF,AFSU,AK1CR,SHiCF,EGjCS,GHiCT,EGjCE,CHiCF,EGjCiB,IAAf,IL0Ce,QAAP;AERR,AFSO,AK1CP,WAAO,EHiCE,IGjCT,GAAgB,IAAhB,GHiCA,CAAwB,eAAxB,EAAyC,KAAzC,CAA+C,OAA/C,GAAyD,MAAzD;ACjCD,ACKG,AF6BF,AFSM,AKzCN,QAAM,KHgCG,CGhCG,OAAO,MDGjB,AF6BF,CE7BE,AF6BsB,CE7BtB,CAAA,CCHU,CAAkB,IAAlB,CAAZ,EDGE,EAAM,CF6BR,EAAwC,EE7B3B,GF6Bb,CE7BQ,AF6BsC,CE7B5B,MF6BlB,EE7BQ,CAAN,AF6BsD,CE7BtD,EAA0B,GF6B5B;AChCF,ADiCE,AFSM,AKzCN,QAAI,CFDN,IDiCW,IGhCT,GAAgB,OFDlB,ADiCE,CAAwB,CGhCxB,CFDF,YDiCE,EAAwC,KAAxC,CAA8C,OAA9C,GAAwD,MAAxD;AE9BE,AF+BH,AFUK,AK1CJ,QAAI,QAAJ,CL0CS,AK1CI,CAAb,EAAgB,CAAhB,EDCE,ACDiB,IDCjB,ACDF,EL0CI,AK1CqB,EDCG,ECD5B;ADEE,AFgCJ,AFSQ,AKzCN,QAAI,CHgCN,OGhCc,CAAZ,GHgCF,CAAsB,CAAtB,EAAiC,GEhC7B,CAAA,CAAA,AJyCiB,CIzCjB,AJyCI,GETR,EAAmD,IEhC/C,EAAM,KAAK,IAAL,CAAU,WAAV,CAAN,CAAA;AFiCF,AFSM,AKzCN,QHgCI,IAAI,CGhCR,OLyCU,CETO,AGhCjB,CAAmB,IAAnB,CLyCiB,CKzCgB,EAAjC,EAA2C,ILyCrC,CETE,CAA0B,AFSN,EETQ,CAA5B,EAA+B,EAAE,CAAjC,CAAR;ACpCA,ACGE,AFkCF,AFSQ,AKzCN,WHgCK,CGhCD,IHgCM,EAAE,EAAF,CGhCV,EFLF,ACGE,CDHF,CAAA,ADqCqB,CCrCrB,CCGE,KFkCF,AFSoB,EETU,CCrC9B,AH8CQ,EG9CF,UAAN,CAAA,EAAiB;ACIf,AFkCA,AFSM,AKzCN,YHgCI,AGhCA,SHgCJ,EAAe,AGhCf,GAAkB,CDFlB,AJ2Ca,CI3Cb,CAAA,CAAA,KJ2CM,AKzCN,IDFA,EAAM,KAAK,IAAL,CAAU,UAAV,CAAN,CAAA;ADJF,ADuCI,AFSG,AKzCL,YAAI,EHgCA,KCvCN,EEOE,EFPF,ADuCI,CAAY,AGhCE,CAAhB,EFPe,ADuCb,CAAgB,OAAhB;ACtCJ,ACGE,AFoCC,AFSG,AKzCJ,SH8BA,GG9BI,GHgCG,GGhCP,CAAW,IFPb,ACGE,CDHF,AEOkB,CFPlB,AEOE,CFPF,CCGE,ACImB,KAAK,CAAxB,EFPF,EAAM,YAAN,CAAA;ACIE,AFoCE,AFSE,AKzCJ,YAAI,EHgCA,IGhCJ,CAAW,GAAG,CHgCZ,AGhCF,CHgCc,CGhCG,EDJjB,CAAA,ACIoB,CDJpB,ACIA,CDJA,AFoCE,CAAmB,OAAnB,CEpCF,EAAM,KAAK,IAAL,CAAU,OAAV,CAAN,CAAA;ADJF,ADyCG,AFUC,AK1CF,YAAI,MAAJ,CFTF,IAAA;AACA,ACGE,AFsCA,AFUI,AK1CJ,YHgCI,CGhCC,CHgCC,MFUE,GGnDV,ACGE,CDHF,AESE,CFTF,AHmDe,CGnDf,CCGE,AFsCA,AGhCmB,IL0CX,EAAJ,EGnDN,EAAM,EESyB,KAAV,GAAe,EFTpC,CAAA,QESqB,GAA2B,KAAK,KAAL,CAAW,GAAG,CAAd,CAA3B,GAA2C,IAA3C,GAAgD,KAAK,KAAL,CAAW,GAAG,CAAd,CAAhD,GAAgE,GAAnF;AHiCD,AFUK,AK1CJ,oBL0CQ,CAAJ,EAAO,OAAO,CAAP;AGpDb,AD2CD,AFzBG,AKPD,mBFXD,IAAA;AACA,AD4CF,AFSI,AKzCF,QAAI,CHgCN,KGhCY,IAAI,IHgChB,CC5CE,AD4CsB,CC5CtB,CAAA,AD4CF,CC5CE,CD4CkC,AGhCpB,OHgChB,AGhCY,CFZV,AEYqB,CHgC+B,AGhC1C,CFZJ,CEYkB,KHgC1B,EAAsE,AGhCrC,EAArB,CAAV,CFZA,CAAA;ACGC,AF0CD,AFSE,AKzCF,KDfC,GF+CK,AGhCA,IHgCI,AFSJ,EKzCM,GLyCD,CKzCK,GHgCG,GFSjB,EAAkB,CKzCJ,OAAJ,CHgCF,AGhCa,CHgCW,EAAxB,CAAV,AGhCY,EAAiB,CAAjB,CAAZ;AFbA,ACKC,AFyCD,AFSI,AKzCJ,QHgCI,AGhCE,GDTL,ICSY,IFdb,AD8Ce,CEzCd,CAAA,CJkDa,CGvDd,AD8CA,AGhCqB,EHgCA,IGhCR,CAAe,GDT3B,EFyC8B,AGhCE,CDTjC,CFyCqB,CGhCO,CAAf,CAAb,ILyCoC,IIlDpC,EJkDc,CAAV;AGtDJ,AD8CA,AFSG,AKxCH,QH+BI,KG/BJ,MH+Be,AG/Bf,GAAA,CFfA,AD8CA,CC9CA,CAAA,AD8CqB,CC9CrB,SAAA,AD8C+B,EC9CzB,AD8Ce,UC9CrB,CAAA;AD+CA,AFSC,AKxCC,QH+BI,OAAO,EAAE,CG/BH,IAAV,gBH+BW,EAAb;AC/CA,ADgDA,AFUA,AKxCE,WH8BK,CG9BC,ELwCE,CEVC,CG9BC,GFlBZ,EEkBiB,EFlBjB,CDgDW,GG9BC,EAAV,EH8BK,CACL,IFS8B,GETvB,GFSC,CAAV,OETE,GAAqB,KAAK,IAA1B,GAAiC,KAAK,KAAL,GAAa,OADzC,EAEL,OAAO,WAAP,GAAqB,KAAK,GAA1B,GAAgC,KAAK,MAAL,GAAc,OAFzC,CAAP;AC/CA,ACIE,AF+CH,AFOA,AKxCG,YAAI,CAAJ,EAAO,QFlBT,CAAA,CAAA,CAAA,CCIE,CAAA,CAAA,CAAA,KDJF,EAAM,ECIJ,EAAM,KAAK,EDJI,ECIT,CAAU,CDJZ,CAAN,CAAA,QCIQ,CAAN,CAAA;AFiDJ,AFxDA,AKsBM,IHkCA,IFxDN,KAAA,GAAA,KAAA,AKsBe,CHkCS,EAAxB,AGlCM,EAAc,IAAI,GAAJ,CAAQ,CAAR,CAAd;AFnBJ,ACIE,AFmDJ,AFKA,AKxCM,SHmCN,AFKA,IAAA,GAAA,EKxCY,CFpBV,EDuDF,CAAuB,AGnCP,CFpBd,ACIE,CFmDJ,CGnCY,CHmCuB,AGnCf,CDhBhB,ACgBQ,CAAN,GHmCN,EAAiD;ACtD/C,ACIE,AFmDF,AFKA,AKxCG,QHmCG,AFKF,IELM,GFKV,EAAa,IELM,ECvDnB,CAAA,CAAA,CAAA,CCIE,CAAA,CAAA,CAAA,KDJF,ADuDU,CAAwB,CCvD5B,CDuDI,AFKwB,CG5D1B,ACIN,AFmDF,EEnDQ,IDJM,AH4DD,CIxDA,IAAL,CDJF,ACIY,EDJI,KCId,CDJoB,ACI1B,CAAA,CDJI,EAAN,CAAA;ADwDA,AFKA,AKxCE,QHmCE,IGnCE,ELwCI,GELG,AGnCF,CLwCX,GELA,EAAmB,CGnCjB,EAAkB,KHmCO,WAAW,EAAE,KAAb,CAAR;ACxDnB,ACIE,AFqDF,AFKD,AKxCK,QHmCE,OAAO,EAAE,ECzDf,GEsBc,CFtBd,ACIE,IAAA,WFqDW,EAAb,IGnCoC,MAAtB,CAAV;AFrBJ,ADyDA,AFCF,AKpCK,QHmCG,AFCR,IEDY,AFCZ,GAAA,EEDiB,EFCjB,GEDY,CCzDV,CAAA,CAAA,ADyDuB,CCzDvB,SAAA,EAAM,EAAE,CDyDR,KCzDc,SAAR,EAAmB,MAAM,EAAzB,EAAN,CAAA;AD0DA,AFKF,AKxCG,QHmCK,MAAM,WAAW,EAAE,GAAb,CAAZ;AC1DA,AD2DA,AFKF,AKvCE,QHkCM,MAAM,AGlCF,KFzBV,IAAA,ED2DuB,EAAE,GAAb,CAAZ,KGlCgC,MAAtB,CAAV;AFxBA,ACGC,AFwDD,AFMF,AKxCC,KDzBE,GF2DK,CFMR,GENY,CAAC,GFMb,CAAmB,IENE,AFMrB,EGjEE,AHiEgC,CGjEhC,AD2DU,CC3DV,CAAA,GD2D2B,MC3D3B,AD2DiC,EC3D3B,CD2DI,CC3DF,AD2DR,MC3Dc,MAAR,EAAgB,MAAM,EAAtB,EAAN,CAAA;ACKA,AFuDA,AG5EF,QAAA,GDqBE,AFuDO,EG5ET,EH4Ea,CG5Eb,IDqBE,CAAA,ACrBF,GH4Ea,IEvDX,GAAA,AFuDO,CACL,OAAO,EExDA,GAAT,EAAsC,IFwDpC,GAAqB,KAAK,IAA1B,GAAiC,kBAAkB,EAAnD,GAAwD,IAAI,CADvD,EAEL,OAAO,WAAP,GAAqB,KAAK,GAA1B,GAAgC,KAAK,MAAL,GAAc,EAFzC,CAAP;AC5DA,ACME,AF0DH,AGrCD,SAAA,GDrBQ,CCqBR,GAAA,GF3BE,ECME,EDNF,CCMkB,KAAK,KAArB;ADLF,ACME,AF2DJ,AGtCE,QAAI,CHsCN,GE3DQ,GCqBN,EAAa,GDrBX,CAAa,AF2DjB,CAAuB,CCjErB,CAAA,ADiEF,CCjEE,CAAA,ACMoB,AF2Da,CAAnC,EE3DiB,AF2D2B,CE3DlB,CAAT,GAAa,CDN5B,ACME,EDNI,ACMyB,CCqBG,CF3B1B,GCM4B,GDNtB,ACMiB,ACqBlB,CDrB2B,CAAT,GAAa,CAA1C,EDNI,ACMyC,EDNvB,ACMtB,EAAiD,EAAjD,EDN4B,EAAxB,EAAN,CAAA;ACOC,AF2DD,AFDA,AKrCA,KDxBA,GF8DM,IAAI,EGtCA,IAAV,GHsCmB,OFDP,IAAZ,GECU,CAAwB,EAAxB,CAAV;AClEA,ACQF,AF2DE,AFDA,AKrCD,QHsCO,GE3DR,IF2De,EE3Df,AF2DiB,ECnEf,IAAA,AHkEA,CAAA,CAAA,CAAA,SAAA,EAAM,CECO,EAAb,MFDA,CAAA;AGjEA,AC/BF,AFkGE,AG1CF,CDxDA,EAAA,KFkGQ,AG1CR,IH0CY,AG1CZ,GAAA,EH0CiB,EG1CjB,GH0CY,CCnEV,CAAA,CAAA,ADmEuB,CCnEvB,SAAA,EAAM,EAAE,CDmER,KCnEc,KAAR,EAAe,MAAM,EAArB,EAAN,CAAA;ACSF,AF2DE,AFHA,IIxDE,IF2DI,KAAK,CE3DS,IAAtB,CJwDE,CEGkB,GFHlB,QEGW,GAAqB,KAAK,IAA1B,GAAiC,kBAAkB,EAA9D;ACpEA,ACWF,AF0DE,AFHA,QEGM,CE1DR,GF0DY,EE1DZ,GAAA,AF0DiB,ECrEf,CDqEU,CAAS,CAAT,CCrEV,AHkEA,CEGsB,AFHtB,CAAA,CAAA,GEG2B,GAAL,CAAS,CAAC,EFHhC,EEGoC,AFH7B,EEGwB,IAAW,CAApB,AFHtB,CAAA,CEG6C,CAAvB,CAAZ,CAAV;ACpEA,ACWA,AF0DA,QE1DM,AF0DA,MAAM,GE1DG,MDXf,CAAA,CAAA,ADqEuB,CCrEvB,ACWwB,CF0DC,GAAb,CAAZ,ICrEA,EAAM,EAAE,CCWO,CAAwB,IDXzB,OAAR,EAAiB,MAAM,ACWd,CAAf,CDXM,EAAN,CAAA;ACYA,AF0DA,QAAM,GE1DC,GF0DK,EE1DZ,GAAe,IAAf,EF0DuB,EAAE,GAAb,CAAZ;ACtEA,ACaA,AF0DA,AFLD,MEKG,KE1DK,AF0DP,GAAU,GE1DV,EDbA,CCagB,AF0DH,GCvEb,CCaA,EF0DmB,CAAC,MAAM,GAAP,IAAc,CAAvB,CAAV;AExDA,AFyDD,AFJD,QIrDQ,CJqDR,SAAA,CAAqB,CIrDD,AJqDpB,EAA8B,EIrDN,MAAJ,CAAW,KAAX,EAAkB,OAAlB,CAAlB;AACA,AF0DF,IAAI,IE1DI,YF0DoB,CE1DP,GF0DrB,CE1DyB,MAAJ,CAAW,MAAX,EAAmB,OAAnB,CAAnB;AAEA,AFyDF,SAAA,IEzDE,OAAA,CFyDF,CAAuB,CEzDrB,EFyDF,EAAkC;AC1EjC,ACkBG,AFyDF,QAAM,IEzDE,AFyDE,MEzDI,GFyDK,IEzDE,UAAP,AFyDJ,CEzDsB,AFyDE,IEzDpB,CAAZ,SFyDQ,CAAV;ACzEF,ACiBI,AFyDF,AFRA,IGlEE,ED0EA,KAAF,CEzDM,AFyDE,EC1EY,ED0EpB,EC1EF,CD0EoB,EEzDhB,EFyDoB,CEzDJ,AFyDA,GAAK,IAAvB,CFRgB,CIjDd,AJiDF;AGhEF,ACgBI,AFyDF,AFRA,MEQE,GCzEJ,EDyEE,CEzDM,AFyDE,ECzEV,CDyEE,ECzEF,CDyEmB,EEzDf,CAAa,CAAb,AFyDmB,CAAJ,AFRjB,CIjDkB,AJiDlB,CIjDE,AJiDF,CEQsB,AFRtB,CIjDqB,GFyDrB,CEzDE,EAAyB,EJiD3B,EIjDE,AJiDI,WAAN,CAAA;AGhEA,ACgBE,AFyDF,QCzEM,ADyEF,UEzDQ,CDhBK,EDyEjB,EAAmB,EEzDjB,CAAkB,EDhBM,CCgBxB,MFyD6B,OCzEd,CAAwB,KDyEtB,EAA2B,KAA3B,ICzEF,CAAjB;AACA,ACgBE,AFyDF,AFVA,aG/DS,GDyEG,GEzDC,AFyDb,AFVA,EEUiB,EFVjB,CG/DA,CDyEA,CEzDE,CDhBqB,ACgBF,EDhBrB,CCgBE;ADdF,ACeC,AFyDD,QCxEM,OAAO,KDwEG,GCxEK,CDwED,KCxEP,ADwEG,CCxEY,CDwE5B,mBCxEa,CAAb;AAEA,ACeA,AFwDD,QExDO,KDfN,ECea,IDfb,GAAA,CCeqB,UAAR,CAAmB,CAC9B,QAAQ,OAAR,CAAgB,UAAU,OAAV,CAAkB,IAAlB,CAAuB,SAAvB,CAAhB,CAD8B,EAE9B,QAAQ,OAAR,CAAgB,WAAW,YAAX,CAAwB,IAAxB,CAA6B,UAA7B,CAAhB,CAF8B,CAAnB,CAAb;ADdE,ACmBF,AFqDF,SAAA,GCxEU,CCmBR,GDnBY,ADwEd,CAAkB,EErDhB,CFqDF,CCxEmB,CCmBjB,AFqD2B,KCxEf,EAAV;AACA,ACmBA,AFqDF,AFdD,QEcO,ICxEA,ADwEI,CErDH,IDnBI,EAAE,ACmBX,EFqDiB,ECxEjB,EAAiB,UDwET,CAAwB,eAAxB,CAAV;ACvEI,ACmBF,AFqDF,AFbF,MEaI,GFbJ,QEaE,GAAgB,AFblB,CG3De,EDwEb,AFbF,SG3DM,IAAwB,EAAE,IAA1B;AACD,ACmBD,AFqDF,MAAE,KAAF,CAAQ,MErDI,CFqDZ,GAAkB,OAAlB,WErDkC,MAAtB,CAAV;ADlBA,ACmBD,AFqDF,YCxEO,KAAK,OAAT,EAAkB;AAChB,ACoBJ,AFqDF,SAAA,KErDY,GFqDZ,CAAmB,CAAnB,EAA4B,CCzEZ,cCoBkB,MAAtB,CAAV,CDpBoC,MAAtB,CAAV;AACD,ACoBJ,AFqDC,AFjBA,WEiBO,IAAI,CAAJ,GAAQ,CAAf,GFjBA,CAAA,CAAA,CAAA,SAAA,EAAM,aAAN,CAAA;AGvDC,ACTH,AFkFC,QElFD,KAAA,GAAA,KAAA;ADWE,ACmBF,AFsDA,AFpBE,SIlCF,AFsDA,IEtDA,CDnBY,ECmBZ,EFsDA,CAAoB,AFpBlB,CEoBF,EAA6B,CFpB3B,aGrDgC,MAAtB,CAAV;AACD,ACmBC,AFsDA,QEtDI,GFsDG,IEtDP,AFsDW,EEtDE,OFsDO,IAAI,CAAb,CAAX,QEt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","file":"src.70843f39.map","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [0, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Check if the value is an iterator.\n *\n * @param v The value to check\n */\nfunction isIterator(v) {\n    if (v == null || typeof v !== 'object') {\n        return false;\n    }\n    return 'next' in v && typeof v.next === 'function';\n}\nvar runningCoroutine = null;\n/**\n * The Lua-like pseudo-coroutine that wraps iterators.\n */\nvar Coroutine = /** @class */ (function () {\n    /**\n     * Create a new coroutine to iterate `start` first.\n     * Read `create<T>` for details.\n     *\n     * @param start Iterator to be started to iterate first\n     */\n    function Coroutine(start) {\n        this.waitingFrames = 0;\n        this.iteratorStack = [];\n        if (start) {\n            this.iteratorStack.push({ iterator: start, deferFns: [] });\n        }\n    }\n    Object.defineProperty(Coroutine.prototype, \"isAlive\", {\n        /**\n         * Whether this coroutine is alive.\n         */\n        get: function () {\n            return 0 < this.iteratorStack.length;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Stop this coroutine.\n     */\n    Coroutine.prototype.stop = function () {\n        this.iteratorStack = [];\n    };\n    /**\n     * Resume the current iterator and receive the yielded value at the next frame.\n     * This method will return nulls forever after the coroutine stops.\n     *\n     * @returns The value at the next frame\n     */\n    Coroutine.prototype.resume = function (resumeValue) {\n        var result = null;\n        if (--this.waitingFrames < 1) {\n            if (this.iteratorStack.length === 0) {\n                return null;\n            }\n            var wait = 1; // will be set waitingFrames\n            var exception = void 0;\n            while (0 < this.iteratorStack.length) {\n                // get the next value `yield`ed from the current iterator\n                var frame = this.iteratorStack[this.iteratorStack.length - 1];\n                var iterator = frame.iterator;\n                var r = null;\n                var ex = null;\n                runningCoroutine = this;\n                try {\n                    if (exception != null) {\n                        if (!iterator.throw) {\n                            throw exception;\n                        }\n                        r = iterator.throw(exception);\n                    }\n                    else {\n                        r = iterator.next(resumeValue);\n                    }\n                }\n                catch (e) {\n                    ex = e;\n                }\n                exception = null;\n                runningCoroutine = null;\n                if (ex != null) {\n                    var e = this.popStack();\n                    if (e != null)\n                        ex = e; // TODO: composed error\n                    exception = ex;\n                    continue;\n                }\n                resumeValue = undefined;\n                if (r.done) {\n                    var ex_1 = this.popStack();\n                    if (ex_1 != null) {\n                        exception = ex_1;\n                        continue;\n                    }\n                }\n                var y = r.value;\n                if (typeof y === 'undefined') {\n                    if (r.done) {\n                        // bare `return` (continue the caller iterator on the stack top)\n                        continue;\n                    }\n                    // bare `yield` (wait 1 frame)\n                    y = null;\n                }\n                if (isIterator(y)) {\n                    // pause and save the current iterator and start the `yield`ed iterator\n                    var iterator_1 = y;\n                    this.iteratorStack.push({ iterator: iterator_1, deferFns: [] });\n                    continue;\n                }\n                else if (typeof y === 'number') {\n                    // wait `y` frames\n                    wait = y;\n                    break;\n                }\n                else {\n                    // `y` is a value of `T`\n                    if (r.done && 0 < this.iteratorStack.length) {\n                        // y is `return`ed from the current iterator so it has been stopped,\n                        // and y is to be the value of `yield` expression in the caller iterator\n                        resumeValue = y;\n                        continue;\n                    }\n                    // y is the `resume()` value of the current frame\n                    result = y;\n                    wait = 1;\n                    if (result && typeof result.wait === 'number') {\n                        wait = result.wait;\n                    }\n                    break;\n                }\n            }\n            if (exception != null) {\n                throw exception;\n            }\n            this.waitingFrames = Math.ceil(wait);\n        }\n        return result;\n    };\n    Coroutine.prototype.pushIterator = function (iter) {\n        this.iteratorStack.push({ iterator: iter, deferFns: [] });\n    };\n    Coroutine.prototype.defer = function (fn) {\n        if (this.iteratorStack.length === 0) {\n            throw new Error('luacoro.defer() must be called from within a coroutine');\n        }\n        this.iteratorStack[this.iteratorStack.length - 1].deferFns.push(fn);\n    };\n    Coroutine.prototype.popStack = function () {\n        if (this.iteratorStack.length === 0)\n            return null;\n        var deferFns = this.iteratorStack.pop().deferFns;\n        var ex = null;\n        // TODO: call all deferFns and return composed error\n        try {\n            for (var i = deferFns.length - 1; 0 <= i; i--) {\n                deferFns[i]();\n            }\n        }\n        catch (e) {\n            ex = e;\n        }\n        return ex;\n    };\n    return Coroutine;\n}());\nexports.Coroutine = Coroutine;\n/**\n * Register `fn` to be invoked when exiting the caller iterator.\n * Works like [Golang's defer](https://golang.org/ref/spec#Defer_statements).\n *\n * @param fn Callback\n */\nfunction defer(fn) {\n    if (!runningCoroutine) {\n        throw new Error('luacoro.defer() must be called from within a coroutine');\n    }\n    runningCoroutine.defer(fn);\n}\nexports.defer = defer;\n/**\n * Create a new coroutine to iterate `start` first.\n *\n * `start` normally must be an iterator generated by a generator\n * implemented to `yield` (or `return`) values of the following 3 types:\n *\n * - `o`: An instance of arbitary class or plain `object` | `string` | `Array`\n *   - `resume()` returns `o`.\n *   - If `o` has a `wait` field, `resume()` returns `null`\n *     through `o.wait - 1` frames after that.\n *     The iterator is not resumed while this, which means that\n *     this coroutine waits `n` frames including the current frame.\n *\n * - `n`: A `number`\n *   - `resume()` returns `null`.\n *   - After that, `resume()` returns `null` through `n - 1` frames.\n *     The iterator is not resumed while this, which means that\n *     this coroutine waits `n` frames including the current frame.\n *\n * - `i`: An `Iterator` of the same type as `start`\n *   - When `i` is `return`ed, the current iterator is terminated\n *     and `i` is immediately started to iterate as the replacement.\n *   - When `i` is `yield`ed, the current iterator is paused and pushed onto the stack,\n *     and `i` is immediately started to iterate.\n *     After `i` is terminated, the caller iterator is popped from the stack\n *     and continued to be iterated.\n *     At this time, the return value of `i` can be got.\n *\n * @param start Iterator to be started to iterate first\n */\nfunction create(start) {\n    if (start instanceof Coroutine) {\n        return start;\n    }\n    if (isIterator(start)) {\n        return new Coroutine(start);\n    }\n    return new Coroutine(start());\n}\nexports.create = create;\n/**\n * Coroutine that wraps multiple iterators and yields results in an array.\n */\nvar ComposedCoroutine = /** @class */ (function (_super) {\n    __extends(ComposedCoroutine, _super);\n    /**\n     * Create a new coroutine to iterate all `coroutines`.\n     * Read `all<T>` and `race<T>` for details.\n     *\n     * @param coroutines Coroutines or iterators\n     * @param fnAlive Callback to judge this coroutine is alive or not\n     */\n    function ComposedCoroutine(coroutines, fnAlive) {\n        var _this = _super.call(this) || this;\n        _this.children = [].concat(coroutines);\n        _this.pushIterator(_this.main(fnAlive));\n        return _this;\n    }\n    /**\n     * Add a `coroutine` to iterate together.\n     * @param c Coroutine or iterator\n     */\n    ComposedCoroutine.prototype.add = function (coroutine) {\n        this.children.push(create(coroutine));\n    };\n    ComposedCoroutine.prototype.main = function (fnAlive) {\n        var result, _i, _a, coro;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    if (!true) return [3 /*break*/, 2];\n                    result = [];\n                    for (_i = 0, _a = [].concat(this.children); _i < _a.length; _i++) {\n                        coro = _a[_i];\n                        result.push(coro.resume());\n                    }\n                    if (!fnAlive(this.children))\n                        return [2 /*return*/, result];\n                    return [4 /*yield*/, result];\n                case 1:\n                    _b.sent();\n                    return [3 /*break*/, 0];\n                case 2: return [2 /*return*/];\n            }\n        });\n    };\n    return ComposedCoroutine;\n}(Coroutine));\nexports.ComposedCoroutine = ComposedCoroutine;\n/**\n * Create a new coroutine to iterate all `coroutines` concurrently.\n * This coroutine will never die.\n *\n * Additional coroutines can be added by `add<T>()`.\n * Dead coroutines will be removed automatically.\n *\n * @param coroutines Coroutines or iterators\n * @returns Composed coroutine\n */\nfunction concurrent(coroutines) {\n    return new ComposedCoroutine(coroutines.map(function (c) { return create(c); }), function (children) {\n        for (var i = children.length - 1; 0 <= i; i--) {\n            if (!children[i].isAlive)\n                children.splice(i, 1);\n        }\n        return true;\n    });\n}\nexports.concurrent = concurrent;\n/**\n * Create a new coroutine to iterate all `coroutines`\n * concurrently until the all of them are dead.\n *\n * Dead coroutines will not be removed to keep array indexes of the `yield`ed value.\n * Adding coroutines by `add<T>()` is discouraged.\n *\n * @param coroutines Coroutines or iterators\n * @returns Composed coroutine\n */\nfunction all(coroutines) {\n    return new ComposedCoroutine(coroutines.map(function (c) { return create(c); }), function (children) {\n        for (var _i = 0, children_1 = children; _i < children_1.length; _i++) {\n            var coro = children_1[_i];\n            if (coro.isAlive)\n                return true;\n        }\n        return false;\n    });\n}\nexports.all = all;\n/**\n * Create a new coroutine to iterate all `coroutines`\n * concurrently until one of them is dead.\n *\n * Array indexes of the `yield`ed value will be keeped.\n * Adding coroutines by `add<T>()` is discouraged.\n *\n * @param coroutines Coroutines or iterators\n * @returns Composed coroutine\n */\nfunction race(coroutines) {\n    return new ComposedCoroutine(coroutines.map(function (c) { return create(c); }), function (children) {\n        if (children.length === 0)\n            return false;\n        for (var _i = 0, children_2 = children; _i < children_2.length; _i++) {\n            var coro = children_2[_i];\n            if (!coro.isAlive)\n                return false;\n        }\n        return true;\n    });\n}\nexports.race = race;\n/**\n * Create a new coroutine that repeats\n * generating iterator and iterating it forever.\n *\n * @param generator Generator (instance methods must be `bind`ed, be careful)\n * @returns Composed coroutine\n */\nfunction forever(generator) {\n    return new Coroutine(function () {\n        var coro, isNew, v;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (!true) return [3 /*break*/, 2];\n                    isNew = false;\n                    if (!(coro && coro.isAlive)) {\n                        coro = new Coroutine(generator());\n                        isNew = true;\n                    }\n                    v = coro.resume();\n                    if (!coro.isAlive && v == null && !isNew) {\n                        return [3 /*break*/, 0];\n                    }\n                    return [4 /*yield*/, v];\n                case 1:\n                    _a.sent();\n                    return [3 /*break*/, 0];\n                case 2: return [2 /*return*/];\n            }\n        });\n    }());\n}\nexports.forever = forever;\n//# sourceMappingURL=index.js.map","import * as luacoro from 'luacoro'\n\n///////////////////////////////////////////////////////////////////////////\n// Main game system and API implementations\n\nlet mode: string\n\nlet limitKeys: string[]\nlet lastKey: string\nwindow.addEventListener('keydown', (e: KeyboardEvent) => {\n  if (mode !== 'waitKey') return\n  if (limitKeys && limitKeys.indexOf(e.key) < 0) return\n  lastKey = e.key\n  mode = 'normal'\n  limitKeys = null\n})\n\nlet luminance: number\nfunction updateLuminance () {\n  const e = document.getElementById('inn-content')\n  e.style.background = `rgb(${luminance}, ${luminance}, ${luminance})`\n}\n\nfunction message (msg: string) {\n  const e = document.createElement('div') as HTMLDivElement\n  e.textContent = msg\n  document.getElementById('inn-content').appendChild(e)\n}\n\nlet waitingFrames: number\n\nlet request: number = null\n\nexport function start () {\n  mode = 'normal'\n  limitKeys = null\n  lastKey = null\n  luminance = 255\n  updateLuminance()\n  waitingFrames = 0\n  document.getElementById('inn-content').innerHTML = ''\n\n  let coro = luacoro.create(inn())\n  let frame = 0\n\n  function update () {\n    request = null\n\n    let r\n    const e = document.getElementById('inn-content')\n    e.classList.remove('showCursor')\n    switch (mode) {\n      case 'waitKey':\n        if (frame % 60 < 30) {\n          e.classList.add('showCursor')\n        }\n        break\n\n      case 'waitFrame':\n        waitingFrames--\n        if (waitingFrames <= 0) {\n          mode = 'normal'\n        }\n        break\n\n      case 'waitFadeOut':\n        luminance -= 5\n        if (luminance <= 0) {\n          luminance = 0\n          mode = 'normal'\n        }\n        updateLuminance()\n        break\n\n      case 'waitFadeIn':\n        luminance += 5\n        if (255 <= luminance) {\n          luminance = 255\n          mode = 'normal'\n        }\n        updateLuminance()\n        break\n\n      default:\n        r = coro.resume()\n        if (r) mode = r\n    }\n    frame++\n    if (coro.isAlive) {\n      request = requestAnimationFrame(update)\n    }\n  }\n\n  request = requestAnimationFrame(update)\n}\n\nexport function stop () {\n  if (request) cancelAnimationFrame(request)\n  request = null\n}\n\n///////////////////////////////////////////////////////////////////////////\n// Helpers\n\nfunction* waitKey (keys?: string[]): luacoro.Iterator<string> {\n  limitKeys = keys\n  yield 'waitKey'\n  return lastKey\n}\n\nfunction* waitFrame (f: number): luacoro.Iterator<string> {\n  waitingFrames = f\n  yield 'waitFrame'\n}\n\nfunction* waitFadeOut (): luacoro.Iterator<string> {\n  yield 'waitFadeOut'\n}\n\nfunction* waitFadeIn (): luacoro.Iterator<string> {\n  yield 'waitFadeIn'\n}\n\n///////////////////////////////////////////////////////////////////////////\n// Scenario implementations\n\nfunction* inn (): luacoro.Iterator<string> {\n  message('Welcome to the traveler\\'s Inn.')\n  message('Room and board is 6 GOLD per night.')\n  message('Dost thou want a room? (Y/N)')\n  const key = yield waitKey(['y', 'n'])\n\n  if (key === 'y') {\n    message('Good night.')\n    yield waitFrame(30)\n    yield waitFadeOut()\n    yield waitFrame(30)\n    // player.money -= 6\n    // player.hp = player.maxHP\n    // player.mp = player.maxMP\n    yield waitFadeIn()\n    message('Good morning.')\n    message('Thou hast had a good night\\'s sleep I hope.')\n    yield waitKey()\n  }\n\n  message('I shall see thee again.')\n  yield waitKey()\n}\n","export default class Vector {\n  x: number\n  y: number\n\n  constructor (x: number = .0, y: number = .0) {\n    this.x = x\n    this.y = y\n  }\n\n  clone (): Vector {\n    return new Vector(this.x, this.y)\n  }\n\n  size (): number {\n    return Math.sqrt(this.x * this.x + this.y * this.y)\n  }\n\n  add (v: Vector): Vector {\n    return new Vector(this.x + v.x, this.y + v.y)\n  }\n\n  sub (v: Vector): Vector {\n    return new Vector(this.x - v.x, this.y - v.y)\n  }\n\n  mul (r: number): Vector {\n    return new Vector(this.x * r, this.y * r)\n  }\n\n  div (r: number): Vector {\n    return new Vector(this.x / r, this.y / r)\n  }\n\n  normalize (): Vector {\n    return this.div(this.size())\n  }\n\n  rotate (rad: number): Vector {\n    const c = Math.cos(rad)\n    const s = Math.sin(rad)\n    return new Vector(\n      this.x * c - this.y * s,\n      this.x * s + this.y * c\n    )\n  }\n\n  lerp (v: Vector, r: number): Vector {\n    return new Vector(\n      this.x * (1 - r) + v.x * r,\n      this.y * (1 - r) + v.y * r\n    )\n  }\n}\n","import * as luacoro from 'luacoro'\nimport Vector from './vector'\n\nlet request: number = null\nlet coro: luacoro.ComposedCoroutine<{}>\n\nexport function start () {\n  coro = luacoro.concurrent([ guide() ])\n\n  function update () {\n    coro.resume()\n    request = requestAnimationFrame(update)\n  }\n\n  request = requestAnimationFrame(update)\n}\n\nexport function stop () {\n  if (request) cancelAnimationFrame(request)\n  request = null\n  coro = null\n  reset()\n}\n\n///////////////////////////////////////////////////////////////////////////\n// Event handlers\n\nfunction updateTitle () {\n  const e = document.getElementById('guide-form-title') as HTMLInputElement\n  document.getElementById('guide-preview-title').textContent = e.value\n}\ndocument.getElementById('guide-form-title').addEventListener('input', updateTitle)\n\nfunction updateBgColor () {\n  const r = parseFloat((document.getElementById('guide-form-color-r') as HTMLInputElement).value)\n  const g = parseFloat((document.getElementById('guide-form-color-g') as HTMLInputElement).value)\n  const b = parseFloat((document.getElementById('guide-form-color-b') as HTMLInputElement).value)\n  document.getElementById('guide-preview').style.backgroundColor = `rgb(${r}, ${g}, ${b})`\n}\ndocument.getElementById('guide-form-color-r').addEventListener('input', updateBgColor)\ndocument.getElementById('guide-form-color-g').addEventListener('input', updateBgColor)\ndocument.getElementById('guide-form-color-b').addEventListener('input', updateBgColor)\n\nfunction showSettingsDialog () {\n  document.getElementById('guide-dialog').style.display = 'block'\n}\ndocument.getElementById('guide-open').addEventListener('click', showSettingsDialog)\n\nfunction hideSettingsDialog () {\n  document.getElementById('guide-dialog').style.display = 'none'\n}\ndocument.getElementById('guide-form-ok').addEventListener('click', hideSettingsDialog)\n\n///////////////////////////////////////////////////////////////////////////\n// Helpers\n\nfunction showCursor () {\n  document.getElementById('guide-cursor').style.display = 'block'\n}\n\nfunction reset () {\n  document.getElementById('guide-message').style.display = 'none'\n  document.getElementById('guide-cursor').style.display = 'none'\n  document.getElementById('guide-dialog').style.display = 'none'\n}\n\nfunction updateHover (p: Vector, isFocused: boolean) {\n  let e = document.elementFromPoint(p.x, p.y)\n  while (e && e.id !== 'guide') {\n    if (isFocused) {\n      e.classList.add('hover')\n    } else {\n      e.classList.remove('hover')\n    }\n    e = e.parentElement\n  }\n}\n\nfunction getElementPos (id: string, anchorX?: number, anchorY?: number): Vector {\n  const e = document.getElementById(id) as HTMLElement\n  if (anchorX == null) anchorX = .5\n  if (anchorY == null) anchorY = .5\n  const rect = e.getBoundingClientRect()\n  return new Vector(\n    window.pageXOffset + rect.left + rect.width * anchorX,\n    window.pageYOffset + rect.top + rect.height * anchorY\n  )\n}\n\nconst sliderThumbSize = 12\n\nfunction getSliderPos (id: string, value?: number): Vector {\n  const e = document.getElementById(id) as HTMLInputElement\n  if (value == null) value = parseFloat(e.value)\n  const rect = e.getBoundingClientRect()\n  const w = rect.width - sliderThumbSize\n  const min = parseFloat(e.min)\n  const max = parseFloat(e.max)\n  const r = (value - min) / (max - min)\n  return new Vector(\n    window.pageXOffset + rect.left + sliderThumbSize * .5 + w * r,\n    window.pageYOffset + rect.top + rect.height * .5\n  )\n}\n\nfunction setSliderPos (id: string, x: number) {\n  const e = document.getElementById(id) as HTMLInputElement\n  const rect = e.getBoundingClientRect()\n  const w = rect.width - sliderThumbSize\n  const x0 = window.pageXOffset + rect.left + sliderThumbSize * .5\n  const r = Math.max(0, Math.min((x - x0) / w, 1))\n  const min = parseFloat(e.min)\n  const max = parseFloat(e.max)\n  e.value = `${min + (max - min) * r}`\n}\n\nlet lastCursorPos: Vector = null\nfunction setCursorPos (pos: Vector) {\n  const e = document.getElementById('guide-cursor') as HTMLElement\n  e.style.left = `${pos.x}px`\n  e.style.top = `${pos.y}px`\n  if (lastCursorPos) updateHover(lastCursorPos, false)\n  updateHover(pos, true)\n  lastCursorPos = pos.clone()\n}\n\nfunction message (msg: string) {\n  const e = document.getElementById('guide-message') as HTMLDivElement\n  e.textContent = msg\n  e.style.display = 'block'\n}\n\nfunction easingIn (v: number): number {\n  return v * v * v\n}\n\nfunction easingOut (v: number): number {\n  return 1 - easingIn(1 - v)\n}\n\nfunction easingInOut (v: number): number {\n  if (.5 < v) return 1 - easingInOut(1 - v)\n  return easingIn(v * 2) * .5\n}\n\n///////////////////////////////////////////////////////////////////////////\n// Guide implementations\n\nconst waitFrames = 30\nconst longWaitFrames = 120\nconst baseMoveFrames = 15\nconst moveFramesPerDistance = .15\nconst beforeTypeFrames = 20\nconst typeFrames = 4\nconst clickEffectFrames = 30\nconst exampleTitles = [\n  'JavaScript tutorial',\n  'My diary'\n]\nconst exampleColors = [\n  [ 128, 192, 255 ],\n  [ 255, 255, 128 ]\n]\nlet trial = 0\n\nfunction *moveTo (to: Vector, fn?: (r: number, p: Vector) => void): luacoro.Iterator<{}> {\n  const from = lastCursorPos.clone()\n  const distance = to.sub(from).size()\n  const frames = baseMoveFrames + distance * moveFramesPerDistance\n  for (let i = 0; i < frames; i++) {\n    const r = easingInOut(i / (frames - 1))\n    const p = from.lerp(to, r)\n    setCursorPos(p)\n    if (fn) fn(r, p)\n    yield // wait 1 frame\n  }\n}\n\nfunction *moveSlider (id: string, valueTo: number, fn: () => void) {\n  yield moveTo(getSliderPos(id))\n  yield moveTo(getSliderPos(id, valueTo), (r: number, p: Vector) => {\n    setSliderPos(id, p.x)\n    if (fn) fn()\n  })\n}\n\nfunction *inputText (id: string, text: string, fn?: (e: HTMLInputElement, text: string) => void): luacoro.Iterator<{}> {\n  const e = document.getElementById(id) as HTMLInputElement\n  e.focus()\n  e.setSelectionRange(0, e.value.length)\n  yield beforeTypeFrames\n  for (let i = 1; i <= text.length; i++) {\n    e.value = text.substr(0, i)\n    if (fn) fn(e, e.value)\n    yield typeFrames\n  }\n}\n\nfunction addClickEffect () {\n  coro.add(function* (): luacoro.Iterator<{}> {\n    const e = document.createElement('div')\n    e.classList.add('guide-click-effect')\n    document.getElementById('guide').appendChild(e)\n    luacoro.defer(() => {\n      e.remove()\n    })\n    e.style.left = `${lastCursorPos.x}px`\n    e.style.top = `${lastCursorPos.y}px`\n\n    for (let i = 1; i <= clickEffectFrames; i++) {\n      const s = easingOut(i / clickEffectFrames)\n      e.style.transform = `translate(-50%, -50%) scale(${s}, ${s})`\n      e.style.opacity = `${1 - s}`\n      yield\n    }\n  })\n}\n\nfunction* guide (): luacoro.Iterator<{}> {\n  reset()\n  setCursorPos(getElementPos('guide'))\n  showCursor()\n  yield waitFrames\n\n  message('To customize theme, click the gear icon at top-right.')\n  yield waitFrames\n  yield moveTo(getElementPos('guide-open'))\n  yield waitFrames\n  addClickEffect()\n  showSettingsDialog()\n  message('The settings dialog is appeared.')\n  yield longWaitFrames\n\n  message('Input your blog title.')\n  yield waitFrames\n  yield moveTo(getElementPos('guide-form-title', .9))\n  yield waitFrames\n  const title = exampleTitles[trial % exampleTitles.length]\n  addClickEffect()\n  yield inputText('guide-form-title', title, () => updateTitle())\n  yield waitFrames\n\n  message('Change background color.')\n  yield waitFrames\n  const color = exampleColors[trial % exampleColors.length]\n  yield moveSlider('guide-form-color-r', color[0], () => updateBgColor())\n  yield moveSlider('guide-form-color-g', color[1], () => updateBgColor())\n  yield moveSlider('guide-form-color-b', color[2], () => updateBgColor())\n  trial++\n  yield waitFrames\n\n  message('Click \"OK\" button.')\n  yield waitFrames\n  yield moveTo(getElementPos('guide-form-ok'))\n  yield waitFrames\n  addClickEffect()\n  hideSettingsDialog()\n  yield longWaitFrames\n\n  reset()\n}\n","import * as luacoro from 'luacoro'\n\nconst bpm = 160 // tempo\nconst n8 = Math.round(60 * 60 / bpm / 2) // frame count of 8th note\nconst n4 = n8 * 2\nconst n4d = n8 * 3\nconst n1 = n8 * 8\n\ninterface MessageFrame {\n  text: string\n  wait: number\n}\n\nfunction* maryHadA (): luacoro.Iterator<MessageFrame> {\n  yield { text: 'Ma', wait: n4d } // `resume()` returns this value and\n                                  // wait `n4d` frames with suspending here\n  yield { text: 'ry ', wait: n8 }\n  yield { text: 'had ', wait: n4 }\n  yield { text: 'a ', wait: n4 }\n}\n\nfunction* littleLamb (withoutRest?: boolean): luacoro.Iterator<MessageFrame> {\n  yield { text: 'lit', wait: n4 }\n  yield { text: 'tle ', wait: n4 }\n  yield { text: 'lamb ', wait: n4 }\n  if (!withoutRest) {\n    yield n4\n  }\n}\n\nfunction* maryHadALittleLamb (): luacoro.Iterator<MessageFrame> {\n  yield maryHadA() // To go to another iterator and come back, just yield it\n  yield littleLamb()\n  yield littleLamb()\n  yield littleLamb()\n  yield maryHadA()\n  yield littleLamb(true)\n  yield { text: 'its ', wait: n4 }\n  yield { text: 'fleece ', wait: n4 }\n  yield { text: 'was ', wait: n4 }\n  yield { text: 'white ', wait: n4 }\n  yield { text: 'as ', wait: n4 }\n  yield { text: 'snow ', wait: n1 }\n}\n\nlet request: number = null\n\nexport function start () {\n  const textarea = document.getElementById('basic-textarea') as HTMLTextAreaElement\n  textarea.textContent = ''\n\n  const coro = luacoro.create(maryHadALittleLamb())\n\n  function update () {\n    const v = coro.resume()\n    if (v && v.text) {\n      textarea.textContent += v.text\n    }\n    if (coro.isAlive) {\n      request = requestAnimationFrame(update)\n    }\n  }\n\n  request = requestAnimationFrame(update)\n}\n\nexport function stop () {\n  if (request) cancelAnimationFrame(request)\n  request = null\n}\n","import * as luacoro from 'luacoro'\nimport Vector from './vector'\n\nconst size = 300\nconst topLeft = new Vector(size * .3, size * .3)\nconst topRight = new Vector(size * .7, size * .3)\nconst bottomRight = new Vector(size * .7, size * .7)\nconst bottomLeft = new Vector(size * .3, size * .7)\nconst absoluteVelocity = 3\n\nclass Sprite {\n  style: string\n  pos: Vector\n\n  constructor (style: string, pos: Vector) {\n    this.style = style\n    this.pos = pos.clone()\n  }\n\n  *move (to: Vector): luacoro.Iterator<{}> {\n    const distance = to.sub(this.pos)\n    const direction = distance.normalize()\n    const velocity = direction.mul(absoluteVelocity)\n    const division = Math.ceil(distance.size() / absoluteVelocity)\n    for (let i = 1; i < division; i++) {\n      this.pos = this.pos.add(velocity)\n      yield // wait 1 frame\n    }\n    this.pos = to.clone()\n    yield // wait 1 frame\n  }\n\n  *goRound (): luacoro.Iterator<{}> {\n    yield this.move(topRight) // To go to another iterator and come back, just yield it\n    yield this.move(bottomRight)\n    yield this.move(bottomLeft)\n    yield this.move(topLeft)\n  }\n\n  *backAndForth (): luacoro.Iterator<{}> {\n    yield this.move(bottomRight)\n    yield this.move(topLeft)\n  }\n\n  repaint (ctx: CanvasRenderingContext2D) {\n    ctx.fillStyle = this.style\n    ctx.fillRect(this.pos.x - 8, this.pos.y - 8, 16, 16)\n  }\n}\n\nlet request: number = null\n\nexport function start () {\n  const canvas = document.getElementById('concurrent-canvas') as HTMLCanvasElement\n  canvas.width = size\n  canvas.height = size\n\n  const redSprite = new Sprite('red', topLeft)\n  const blueSprite = new Sprite('blue', topLeft)\n\n  function repaint () {\n    const ctx = canvas.getContext('2d')\n    ctx.fillStyle = '#eeeeee'\n    ctx.fillRect(0, 0, size, size)\n    redSprite.repaint(ctx)\n    blueSprite.repaint(ctx)\n  }\n\n  const coro = luacoro.concurrent([\n    luacoro.forever(redSprite.goRound.bind(redSprite)),\n    luacoro.forever(blueSprite.backAndForth.bind(blueSprite))\n  ])\n\n  function update () {\n    coro.resume()\n    repaint()\n    request = requestAnimationFrame(update)\n  }\n\n  request = requestAnimationFrame(update)\n}\n\nexport function stop () {\n  if (request) cancelAnimationFrame(request)\n  request = null\n}\n","import * as luacoro from 'luacoro'\nimport Vector from './vector'\n\nconst eps = 2.0\nconst size = 300\n\nfunction* koch (v: Vector): luacoro.Iterator<Vector> {\n  if (v.size() <= eps) {\n    yield v // resume() returns v and wait 1 frame\n            // (different from `return v`, be careful)\n    return // back to the caller iterator (with no return value)\n  }\n  const t = v.mul(1.0 / 3.0)\n                                       // /\\\n  yield koch(t)                        // \n  yield koch(t.rotate(-Math.PI / 3.0)) //   /\n  yield koch(t.rotate(Math.PI / 3.0))  //    \\\n  yield koch(t)                        //     \n  // back to the caller iterator (with no return value)\n}\n\nlet request: number = null\n\nexport function start () {\n  const info = document.getElementById('recursion-info') as HTMLDivElement\n\n  const canvas = document.getElementById('recursion-canvas') as HTMLCanvasElement\n  canvas.width = size\n  canvas.height = size\n\n  const ctx = canvas.getContext('2d')\n  ctx.fillStyle = '#eeeeee'\n  ctx.fillRect(0, 0, size, size)\n\n  let frame = 0\n  function drawLine (from: Vector, to: Vector) {\n    ctx.beginPath()\n    ctx.strokeStyle = '#000000'\n    ctx.lineWidth = 1\n    ctx.moveTo(from.x, from.y)\n    ctx.lineTo(to.x, to.y)\n    ctx.stroke()\n    info.textContent = `frame: ${frame} / pos: (${Math.round(to.x)}, ${Math.round(to.y)})`\n    frame++\n  }\n\n  let pos = new Vector(0, size * .8)\n  const vec = new Vector(size, 0)\n  const coro = luacoro.create(koch(vec))\n\n  function update () {\n    request = null\n\n    const v = coro.resume()\n    if (v) {\n      drawLine(pos, pos.add(v))\n      pos = pos.add(v)\n    }\n    if (coro.isAlive) {\n      request = requestAnimationFrame(update)\n    }\n  }\n\n  request = requestAnimationFrame(update)\n}\n\nexport function stop () {\n  if (request) cancelAnimationFrame(request)\n  request = null\n}\n","import * as inn from './inn'\nimport * as guide from './guide'\nimport * as basic from './basic'\nimport * as concurrent from './concurrent'\nimport * as recursion from './recursion'\n\ninterface Demo {\n  start (): void\n  stop (): void\n}\n\nconst examples: {[name: string]: Demo} = {\n  inn,\n  guide,\n  basic,\n  concurrent,\n  recursion\n}\n\nconst buttons = document.getElementById('buttons') as HTMLDivElement\nbuttons.innerHTML = ''\nlet currentDemo: Demo = null\n\nfor (let name in examples) {\n  const button = document.createElement('button') as HTMLButtonElement\n  button.textContent = name\n  buttons.appendChild(button)\n  button.addEventListener('click', function (button: HTMLButtonElement, name: string) {\n    button.blur()\n    window.location.hash = '#' + name\n  }.bind(null, button, name))\n}\n\nfunction startDemo (name: string) {\n  const demo = examples[name]\n  const divs = document.getElementsByClassName('example')\n  for (let i = 0; i < divs.length; i++) {\n    divs[i].classList.remove('visible')\n  }\n  document.getElementById(name).classList.add('visible')\n  if (currentDemo) currentDemo.stop()\n  demo.start()\n  currentDemo = demo\n}\n\nfunction onHashChange () {\n  if (2 <= window.location.hash.length) {\n    const name = window.location.hash.substr(1)\n    for (let n in examples) {\n      if (name === n) {\n        startDemo(name)\n        break\n      }\n    }\n  }\n}\nwindow.addEventListener('hashchange', onHashChange)\nonHashChange()\n"]}