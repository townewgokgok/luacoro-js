{"version":3,"sources":["node_modules/luacoro/dist/index.js","src/basic.ts","src/vector.ts","src/concurrent.ts","src/recursion.ts","src/inn.ts","src/guide.ts","src/index.ts"],"names":[],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AEjZA,IAAA,SAAA,aAAA,YAAA;AAIE,aAAA,MAAA,CAAa,CAAb,EAA6B,CAA7B,EAA2C;AAA9B,YAAA,MAAA,KAAA,CAAA,EAAA;AAAA,gBAAA,EAAA;AAAc;AAAE,YAAA,MAAA,KAAA,CAAA,EAAA;AAAA,gBAAA,EAAA;AAAc;AACzC,aAAK,CAAL,GAAS,CAAT;AACA,aAAK,CAAL,GAAS,CAAT;AACD;AAED,WAAA,SAAA,CAAA,KAAA,GAAA,YAAA;AACE,eAAO,IAAI,MAAJ,CAAW,KAAK,CAAhB,EAAmB,KAAK,CAAxB,CAAP;AACD,KAFD;AAIA,WAAA,SAAA,CAAA,IAAA,GAAA,YAAA;AACE,eAAO,KAAK,IA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AAM,GAAZ,EAAgB;AAChB,IAAM,KAAK,KAAK,KAAL,CAAW,KAAK,EAAL,GAAU,GAAV,GAAgB,CAA3B,CAAX,EAAyC;AACzC,IAAM,KAAK,KAAK,CAAhB;AACA,IAAM,MAAM,KAAK,CAAjB;AACA,IAAM,KAAK,KAAK,CAAhB;AAOA,SAAA,QAAA,GAAA;AEbA,IAAA,UAAA,aAAA,QAAA,SAAA,CAAA,CAAA;AACA,AEDA,IFCA,AEDA,UAAA,CFCA,YEDA,IFCA,IEDA,IFCA,KEDA,CAAA,CAAA,GFCA,CAAA,CAAA;AAEA,AEDA,ADFA,IDGM,ACHN,ODGa,GAAb,ACHA,aAAA,QAAA,SAAA,CAAA,CAAA;AHcE,AEVF,AEDA,ADFA,IDGM,ACHN,UDGgB,CCHhB,GDGoB,KFUlB,CAAA,CAAA,CAAA,CEVkB,ICHpB,GDGgB,CFUd,AEVyB,EFUnB,EAAE,AGbV,GDGkC,EAAlB,CFUA,CEVsB,GFU9B,AGbR,CAAA,CHasB,AGbtB,EDG6C,EAA7B,CAAhB,CFU4B;AACM,AEVlC,AEAA,ADFA,IDEM,AEAF,ADFE,ICEN,EDFY,GAAZ,EDEiB,IAAI,SAAA,OAAJ,CAAW,OAAO,EAAlB,EAAsB,OAAO,EAA7B,CAAjB;AFSQ,AERR,AECA,ADHA,IDEM,AECF,ADHE,OAAO,ECGb,CDHA,GHUE,CAAA,AERkB,EFQc,EERV,SAAA,OAAJ,CAAW,OAAO,EAAlB,EAAsB,OAAO,EAA7B,CAApB;AACA,AGPA,ADQA,ADFA,IDCM,AGPN,ADQI,KDFJ,ECEA,EDFA,CENA,AFMgB,CAAhB,EDCmB,ACDM,IDCF,MGPvB,GHOuB,KGPvB,EHOmB,CAAW,MGP9B,CHOqC,AGPrC,CAAA,CHOmB,EAAsB,OAAO,EAA7B,CAAnB;AFOE,AENF,AGPA,ADQA,IFDM,AGPN,GDQO,QCRP,ILaE,IAAA,AENuB,AECzB,CFDA,AECwB,GJKU,IKblC,EDQA,EAAmC,ICRnC,MDQoC,CAAD,EAAiB,CCRpD,CAAA,CAAA;ALckC,AELlC,AGPA,ADOE,IFAF,AGPI,IDOE,KFAN,CGPsB,GDOP,CCPf,QHOA,AEAE,EAAwB,UFA1B;AFME,AEFA,AGVF,ADOE,ICPE,IAAJ,ADOM,KFGJ,MAAA,CAAa,CEHI,EJKjB,CAAA,CAAA,AEFA,CFEA,CEF4B,GAA5B,CEH2B,CFGY,GFEvC,EAAM,CILW,CJKT,AIL2B,EAAE,GAApB,CJKH,GIL8B,CAA5C,CJKM,CILyC,CJK1B,MAAM,EAArB,EAAN,CAAA;AEDE,AGTJ,ADME,SCNF,IHSS,CGTT,ADMY,EAAE,CCNd,CHSI,CEHF,EFGe,KAAb;AFA8B,AEC9B,AGTF,ADMA,WCNO,ADMA,EFGA,GAAL,GAAW,AGTE,ADMf,GDNI,CDSa,CCTX,IDSO,ACTT,CEAG,CHSL,AGTwB,CAAE,GFAZ,IEAU,CAAnB,CAAP,AFAI,OAAA,CAAA,CAAA,CAAA,SAAA,EAAA,CAAA,CAAA;AHSJ,AECC,AGRD,ADKA,ADNE,aECF,GDKY,GJEZ,AKPA,CDKA,ECLA,CLOA,AGRE,CAAA,CAAA,CAAA,SAAA,EAAM;AHSR,AEEC,AGTC,ADKH,ADNW,CCAZ,UFUG,EGTM,MAAL,CHSD,CAAA,EFFD,CAAA,CAAA,AEEC,CFFD,EEEA,OFFA,EAAM,CEEC,CFFC,CEER,EAAiB,GFFH,MAAR,EAAgB,MAAM,EAAtB,EAAN,CAAA;AKNE,ADMJ,ADTI,ICSA,SAAJ,IDTI,CEGU,CFHF,qBEGwB,MAAtB,CAAV;ALMF,AKLC,ADMH,SAAA,UJDE,IAAA,CICF,GAAA;AJAE,AKJA,ADKA,ADXE,QCWI,IAAI,ECLA,KFNR,ECWiB,EJDnB,AGVE,CHUF,CAAA,CAAA,CGVU,QHUV,AICU,CCLsB,ADKE,CJD5B,EAAE,EICE,CCLA,ADKV,CCLA,ELIc,IAAR,EAAc,MAAM,EAApB,EAAN,CAAA;AKHD,ADKC,ADXU,MCWR,KAAF,CAAQ,UAAR,GAAqB,SAAO,SAAP,GAAgB,IAAhB,GAAqB,SAArB,GAA8B,IAA9B,GAAmC,SAAnC,GAA4C,GAAjE;AJFA,AEEQ,AGdV,ADeC,ADXG,QEJJ,KAAA,GAAA,GLYE,EKZF,ELYE,AGRE,CAAA,CAAA,CAAA,KDUiB,GAAG,ECVpB,CDUiB,ACVjB,CDUwB,CCVjB,IDUsB,GAAZ,CAAX;AACA,AGJV,ADMA,SCNA,ADMA,ICNA,GAAA,ADMA,CAAkB,GAAlB,EAA6B,UFFP,SAAS,SAAT,EAAZ;AACA,AGJR,ADMA,ADZM,QEMF,ADME,IAAI,GCNV,EAAa,GFNH,CCYS,CDZP,GAAF,CAAM,KDUG,CCVG,ECYZ,CAAuB,ADZvB,CAAJ,EEM4B,EDMxB,CFFmB,AEE7B,GFFmB,CAAc,AGJpB,gBHIM,CAAX;AACA,AGJR,ADMA,ADZqC,MCYnC,QCNQ,GDMV,CCNA,EDMgB,GAAhB,QFFmB,KAAK,IAAL,CAAU,SAAS,IAAT,KAAkB,gBAA5B,CAAX;AFJT,AEKY,AGJX,ADMA,ADZA,WEMO,EDME,ECNT,QFNA,CDUe,ACVf,CDUW,ACVX,CAAA,CCYA,CAAwB,KAAxB,EAA+B,ADZ/B,EAAM,KAAK,CAAL,CAAN,CAAA,CCYA,CAA2C,ADZN,CCYrC;AJLF,AKAE,ADMD,SJND,UAAA,CAAsB,WAAtB,EAA2C;AKC1C,ADOD,ADhBuC,ICgBnC,aAAJ;ACZA,ADcA,ADjBE,ICiBE,ICdJ,IAAA,EDcsB,CCdtB,GDcA,CCdA,AFHE,IAAA,GDUkB,CCVmB,GDUf,WAAQ,OAAA,CAAA,CAAA,CAAA,SAAA,EAAA,CAAA,CAAA;AAC1B,AGDN,ADSA,ADlBE,SCkBF,KAAA,GAAA,MDlBE,CAAA,CDUS,ACVT,CAAA,EDUI,GAAW,ICVf,CDUoB,CCVd,EDUS,CAAS,ECVb,CDUI,CAAa,ACVf,MAAF,CAAS,CDUL,ACVM,CDUjB,ICVsB,EAAN,GAAW,GAApB,CAAL,CAAN,CAAA,EAAqC;AHOrC,AEII,AGDN,ADSE,WAAO,QAAP,IJZA,CAAA,CAAA,CAAA,CEII,CAAA,CAAA,CAAA,KFJJ,EAAM,EAAE,AEIJ,CAAA,EAAM,GFJI,KAAR,EAAe,MAAM,EAArB,EAAN,CAAA;AKKF,ADQE,ADpBA,SEYF,ODQc,GDpBZ,CEYF,ADQE,GCRF,AFZE,IAAqC;AHOrC,AEII,AGEJ,ADQA,ADpBA,QEYM,IAAI,EDQA,IAAV,CJdA,EKMmB,ELNnB,AEII,ACVJ,CAAA,CAAA,CAAA,CDUI,IAAM,IGEA,AFZV,CEYkC,CFZ5B,KAAK,EAAE,MAAF,CAAS,GEYV,CAAV,CFZyB,EAAL,GAAU,GAAnB,CAAL,CAAN,CAAA,EAAqC;AHOrC,AKMA,ADQA,aCRS,GDQG,GAAZ,IJdA,CAAA,CAAA,CAAA,CKMA,CAAwB,OLNxB,EAAM,EAAE,MAAM,IKMd,ELNM,AKMyC,ELNzB,MAAM,EAAtB,CKMN,CLNA,CAAA,CKM6D,EAAE,KAA/D;AACD,ADQC,ADtBA,mBAAA,IAAA,IAAqC;AHOrC,AECgC,AGOlC,ADQE,ADtBA,SEcO,ULRP,CIgBgB,CAAhB,EJhBA,AKQF,AFdE,CEcsB,AFdtB,CAAA,CAAA,SAAA,EAAM,KEcR,AFda,CAAL,CEcoC,gBAA5C,CAA6D,OAA7D,EAAsE,WAAtE;ALPE,AKSF,ADOE,ADtBA,SEeF,IDOW,SCPX,CLTE,CAAA,CAAA,AKSF,CLTE,CIgBA,CAAwB,KAAxB,EJhBA,AIgB+B,EJhBzB,EAAE,KIgBR,CJhBc,EIgB6B,EAA3C,GJhBM,EAAiB,MAAM,EAAvB,EAAN,CAAA;AKUA,ADQA,ADzBA,QEiBM,ADQF,ICRM,GDQC,EDzBX,EAAqC,IEiBf,ADQH,MAAR,CAAe,ECRK,GDQpB,CAAX,UCRsB,CAAwB,oBAAxB,EAAmE,KAA/E,CAAV;ALVA,AEIE,AGOF,ADQA,QCRM,ADQF,ICRM,IDQE,CAAZ,EJnBA,IAAA,AKWsB,EHPf,GAAL,GAAW,CGOkB,EHPf,KAAH,EAAX,KGOoB,CAAwB,oBAAxB,EAAmE,KAA/E,CAAV;AHNE,AGOF,ADSA,AD5BA,QEmBM,IAAI,CDSV,MAAA,AD5BA,EHQI,CAAC,AIoBL,CCTsB,AFnBtB,IDYE,ACZmC,CDYnC,CAAA,CAAA,EGO6B,GLX3B,IEIF,CAAA,EFJE,AEII,CFJJ,CAAA,CAAA,CKWkB,CAAwB,OLX1C,EAAA,CAAA,CAAA,SKWkB,EAAmE,KAA/E,CAAV;ALVE,AKWF,ADSE,aCTO,KDSG,IAAV,CJpBA,CAAA,CAAA,CAAA,CKWF,CAAwB,OLXtB,EAAM,EAAN,CAAA,GKWF,EAAyC,KAAzC,CAA+C,eAA/C,GAAiE,SAAO,CAAP,GAAQ,IAAR,GAAa,CAAb,GAAc,IAAd,GAAmB,CAAnB,GAAoB,GAArF;AHRE,AGSH,ADUG,YAAI,CAAJ,UFnBA,IAAA,IAAM;AFHN,AKaJ,ADUI,SCVK,GDUC,IAAI,GJvBV,IAAA,AKaJ,CAAwB,CDUD,cAAT,CAAwB,ICVtC,CDUc,CCVgC,ADU1C,gBCVJ,CAA+D,OAA/D,EAAwE,aAAxE;AACA,ADUI,AD/BH,SEqBQ,CDUH,SAAF,CAAY,GCVhB,CAAwB,EDUpB,CAAmB,YAAnB,KCVJ,EAA8C,gBAA9C,CAA+D,OAA/D,EAAwE,aAAxE;AACA,ADUI,AD9BJ,IAAI,KEoBK,KFpBa,EC8BV,ED9BZ,EC8BI,GCVJ,CAAwB,oBAAxB,EAA8C,gBAA9C,CAA+D,OAA/D,EAAwE,aAAxE;AHXG,AGaH,ADSM,AD7BN,KDJG,IGwBH,AFpBA,KAAA,GC6BW,AD7BX,SC6BM,CCTN,GAAA;AHXG,AGYD,ADSM,AD7BN,QAAM,GDQL,EGYQ,EFpBI,KDQZ,AEqBS,CFrBT,GCRqB,GEoBtB,CHZC,AGYuB,ADSN,EAAR,CFrBV,EEqBuB,EAAjB,EAAqB,CD7Bd,CAAwB,GEoBrC,CHZA,CGYwC,KAAxC,CAA8C,KFpBjC,CAAb,CEoBA,GAAwD,OAAxD;AACD,ADSS,AD5BR,QAAM,SAAS,KC4BL,ID5Bc,KC4BhB,CAAY,GAAZ,CAAgB,ID5BT,CAAwB,OC4B/B,WD5BO,CAAf;AHED,AKkBD,ADSS,AD5BP,SEmBO,EFnBA,KAAP,GAAe,IEmBjB,AFnBE,CEmBsB,YAAxB,EAAsC,gBAAtC,CAAuD,OAAvD,EAAgE,kBAAhE;ALhBA,AKkBA,ADQQ,AD5BN,SHEF,AKkBA,EFpBS,MAAP,GAAgB,IAAhB,GHEF,AKkBA,GLlBA,AKkBA;AHfI,AGgBF,ADSI,AD5BJ,QAAM,KEmBG,CFnBG,GC4BH,ID5BU,MDGjB,AGgBF,CHhBE,AGgBsB,ADSpB,CFzBF,CAAA,CCHU,CAAkB,IAAlB,CAAZ,EDGE,EAAM,CGgBR,EAAwC,EHhB3B,GGgBb,CHhBQ,AGgBsC,CHhB5B,MGgBlB,EHhBQ,CAAN,AGgBsD,CHhBtD,EAA0B,GGgB5B;AACD,ADSO,AD5BN,QAAI,SAAJ,GAAgB,SAAhB;ADEE,AGkBJ,ADSQ,AD5BN,QAAI,CEmBG,OFnBP,CAAa,CAAb,EC4BU,AD5BM,CAAhB,EDCE,AGkBJ,AFnBqB,CEmBG,GHlBpB,ACDF,EAAyB,EDCG,ECD5B,IC4B2B,CAArB,CCTR,CDSgC,CCTS,gBAAzC,CAA0D,OAA1D,EAAmE,kBAAnE;ALpBE,AEGE,AGmBJ,ADQU,AD3BR,QAAI,QAAQ,CAAZ,MHHA,CAAA,CAAA,CAAA,CEGE,AE2Ba,CF3Bb,CAAA,CAAA,KFHF,AI8BQ,EJ9BF,EEGJ,EAAM,KAAK,CFHb,CAAA,EAAiB,AEGT,CAAU,WAAV,CAAN,CAAA;AGoBJ,ADQS,AD3BP,aAAA,QAAA,CAAmB,IAAnB,EAAiC,EAAjC,EAA2C;AHJ3C,AEGE,AGsBJ,ADOQ,AD3BJ,SEoBJ,GFpBQ,OHLN,AKyBF,EFpBI,CEoBJ,CLzBE,AEGE,IFHe,AEGf;AFFF,AEGE,AGsBF,ADQI,AD5BF,YAAI,CEoBG,IDQA,MJjCT,AGKE,CHLF,CAAA,CAAA,AGKoB,CDFlB,AGsBF,CHtBE,AGsBsB,CHtBtB,CAAA,AE8BE,KJjCJ,AGKE,EHLI,EEGJ,EAAM,CGsBR,EAAwC,EHtB3B,GFHb,AKyBA,CLzBA,AEGQ,AGsBsC,CHtB5B,MGsBlB,GAAwD,CHtBhD,CAAN,CAAA,IGsBF;AACD,ADQO,AD5BJ,YAAI,SAAJ,GAAgB,CAAhB,IC4BiB,CAAb;AJlCN,AEGE,AGyBJ,ADOQ,AD5BJ,SEqBJ,GFrBQ,EEqBR,GAAA,CFrBI,CHPF,AGOa,CC4BH,GJnCV,AEGE,CCIgB,CAAhB,EDJA,ACImB,KAAK,CC4BH,AD5BrB,CC4BI,EAAoB;AJlC1B,AEGE,AGyBF,ADOQ,AD5BN,YAAI,CEqBG,KFrBP,CAAW,GAAG,CHPhB,AGOE,CHPF,CAAA,AGOmB,CHPnB,CEGE,AGyBF,CHzBE,AGyBsB,AFrBF,CDJpB,ACIA,CDJA,EEgCkB,CAAZ,EJnCR,EAAM,EEGJ,EAAM,EGyBR,EAAyC,CHzB5B,GFHb,CAAA,AEGQ,AGyBR,CHzBkB,AGyB6B,OHzBvC,AGyBR,CHzBE,CAAA,CGyBuD,MAAzD;AACA,ADOQ,AD5BN,YAAI,CEqBG,KFrBP,SEqBF,ADOe,CCPS,ODOhB,OCPR,EAAwC,KAAxC,CAA8C,OAA9C,GAAwD,MAAxD;AL7BA,AEGE,AG2BF,ADOO,AD5BL,aEqBO,AFrBF,MHTP,IAAA,AEGE,CCMA,GDNA,AG2BF,AFrBqB,CEqBG,WFrBO,GEqB/B,EAAwC,AFrBnB,GAAe,EEqBpC,CAA8C,OAA9C,GAAwD,GFrBnC,GEqBrB,AFrBqD,KAAK,KAAL,CAAW,GAAG,CAAd,CAAhC,GAAgD,IAAhD,GAAqD,KAAK,KAAL,CAAW,GAAG,CAAd,CAArD,GAAqE,GAAxF;AHRF,AK8BD,ADOO,AD5BJ,uBHTF,CAAA,CAAA,CAAA,SAAA,EAAM,YAAN,CAAA;AKgCF,ADMQ,AD5BL,SEsBH,WAAA,CAAsB,CAAtB,EAAiC,SAAjC,EAAmD;ALhCjD,AKiCA,ADOI,AD5BJ,QEqBI,AFrBA,IEqBI,EFrBE,GC4BD,CD5BK,CHZd,EKiCiB,ELjCjB,IGYc,EC4BV,KD5BM,CAAW,CAAX,CEqBF,CAA0B,AFrBV,EEqBY,CAA5B,EAA+B,EAAE,AFrBV,CEqBvB,CAAR,AFrBU,CAAV;AHXA,AEEC,AG+BD,ADOM,AD5BN,KDfC,GCeK,GEqBC,GFrBK,EEqBA,EAAE,AFrBE,EEqBJ,GLjCZ,CAAA,CAAA,AKiCqB,CLjCrB,CGYgB,EC4BG,CAAb,ECPN,EAA8B,AFrBlB,CHZZ,AGYuB,EHZjB,EGYM,EAAiB,CAAjB,CAAZ,IHZA,CAAA;AEIC,AG8BC,ADOI,AD5BN,QAAM,GDTL,CG8BK,GFrBO,KDTZ,AEqCS,CFrCT,AG8BC,EAAe,AFrBI,IC4BJ,ED5BJ,CAAe,GDT3B,ECSgC,CDTjC,AEqCM,EAAsB,AD5BA,CAAf,CAAb,QDTA;AFJA,AKmCI,ADOI,AD3BR,aAAA,CEoBM,KLnCN,AGeA,GAAA,CHfA,AKmCI,CAAY,GAAZ,CAAgB,IDOA,GCPhB,ADOI;AJzCR,AKmCG,ADOK,AD3BN,SEkBA,MAEO,GFpBG,IAAV,CHfF,CAAA,CAAA,CAAA,CI0Ce,QJ1Cf,AI0CQ,EJ1CF,WAAW,IAAX,CAAN,CAAA;AKoCI,ADOG,AD1BL,YAAM,EEmBF,EFnBM,KAAK,EEmBb,CAAY,GFnBJ,EAAV,CEmBE,CAAmB,OAAnB;ALpCJ,AEIE,AGiCC,ADOG,AD1BJ,YAAI,CAAJ,EAAO,IHlBT,IAAA,IEIE,CAAA,CAAA,CAAA,SAAA,EAAM,KAAK,IAAL,CAAU,WAAV,CAAN,CAAA;AFHF,AKqCE,ADOI,AD1BF,YEmBE,EAAE,OFnBK,EHlBb,CAAA,AGkBI,CHlBJ,CAAA,AGkBkB,CEmBhB,GFnBoB,GAAJ,CAAQ,CHlB1B,AGkBkB,CAAd,CHlBE,EAAE,MAAM,MAAR,EAAgB,MAAM,EAAtB,EAAN,CAAA;AEGE,AGmCD,ADQG,AD3BA,kBAAM,IAAI,CDhBZ,ECgBQ,CAAQ,CDhBhB,ACgBQ,CAAN;AHnBJ,AEIE,AGmCH,ADQO,AD3BH,mBHpBH,CI+CU,GJ/CV,EI+Ce,EF3Cb,CAAA,CAAA,CAAA,CE2CQ,EAAJ,MF3CJ,EAAM,KAAK,IAAL,CAAU,OAAV,CAAN,CAAA;AFHF,AKwCF,ADOQ,AD3BJ,SEoBJ,GFpBQ,KAAK,GC2BD,CAAJ,CCPR,CLxCE,AKwCsB,ADOT,CJ/Cb,AGoBE,CHpBF,AKwCF,CLxCE,AGoBoB,CEoBc,GDOd,CAAP,GCPf,CLxCE,CKwCoD,CLxC9C,EAAE,IKwCV,ELxCgB,AKwCsD,SLxC9D,EAAmB,MAAM,EAAzB,EAAN,CAAA;AEGE,AGsCF,AD5BE,ADQE,QEoBE,IAAI,SAAS,CFpBL,CDlBZ,IAAA,QGsCQ,CAAwB,EAAxB,CAAV,KFpBoC,MAAtB,CAAV;AHrBJ,AK0CA,ADOE,AD3BC,QEoBC,WL1CJ,AK0Ce,IL1Cf,AK0CA,EAAqB,UAAU,EAAV;ALzCrB,AK0CA,ADOE,AD3BD,QEoBG,IDOE,KAAK,ECPI,IL1Cf,AK0CA,CL1CA,AIiDE,CJjDF,AK0CqB,CL1CrB,AIiDoB,SJjDpB,AK0C+B,EL1CzB,AK0Ce,EL1Cb,MAAM,MAAR,EAAgB,MAAM,EAAtB,EAAN,CAAA;AK2CA,ADOI,AD1BJ,QEmBM,MFnBI,CEmBG,EAAE,KDOD,cD1BkB,EEmBnB,EAAb,EFnBU,CAAV,CC0BoC,MAAtB,CAAV;AJlDJ,AEGC,AGyCD,ADOG,AD1BJ,KDzBE,MG4CM,IAAI,IL5CX,IAAA,CK4CW,OAAJ,CACL,OAAO,WAAP,GAAqB,KAAK,IAA1B,GAAiC,KAAK,KAAL,GAAa,OADzC,EAEL,OAAO,WAAP,GAAqB,KAAK,GAA1B,GAAgC,KAAK,MAAL,GAAc,OAFzC,CAAP;AL3CA,AEIA,AG2CD,ADIE,ADpEH,QAAA,GDqBE,ECrBF,GAAA,IDqBE,CAAA,ACrBF,EHiBE,CAAA,CAAA,CAAA,EEIA,GAAA,IFJA,EAAM,EAAE,EEIC,GAAT,CFJc,CEIwB,OFJhC,EAAkB,MAAM,EAAxB,EAAN,CAAA;AEKE,AG4CJ,ADIE,AD3BF,IEuBM,KFvBN,GDrBQ,CCqBR,CC2BY,ED3BZ,KDrBI,CG4CoB,EH5CJ,AG4CpB,KH5CyB,KAArB,EEgD8B,MAAtB,CAAV;AJrDA,AEME,AG6CJ,ADGC,AD3BC,QAAI,CEwBN,GH7CQ,GCqBN,EAAa,EH3Bb,CEME,CAAa,AG6CjB,CAAuB,CLnDrB,CKmDF,EH7CsB,AG6Ca,GH7ClB,CAAS,CAAT,AG6CjB,EAAiD,CH7CnB,CAA1B,EAA6B,CCqBG,IDrBE,GAAL,ACqBlB,CDrB2B,CAAT,GAAa,CAA1C,EAA6C,EAA7C,EAAiD,EAAjD;AFLF,AEMC,AG6CD,AD3DF,ADmCE,KDxBA,GGgDM,AD3DR,IC2DY,CD3DZ,CDmCY,ECnCZ,EDmCE,GEwBmB,AD3DrB,EJQE,CAAA,CAAA,CAAA,SAAA,AKmDU,CAAwB,CLnD5B,CKmDI,CLnDF,AKmDR,MLnDc,KAAR,EAAe,MAAM,EAArB,EAAN,CAAA;AEOF,AG6CE,ADGF,AD3BC,QEwBK,CDGN,EFhDA,EEgDA,GAAA,CFhDA,AG6Ce,IAAb,EAAmB,QAAQ,WAAW,EAAE,KAAb,CAAR;ALpDnB,AE/BF,AGoFE,ADGA,AD/BF,CDxDA,EAAA,KGoFQ,ADGF,AD/BN,IAAA,GE4Be,ADGb,AD/BF,EE4BiB,ADGF,EJxDb,AGyBF,IHzBE,eKqDa,ADGqB,ECHlC,KDGa;AJvDb,AEQF,AG6CE,ADGA,IFhDE,IG6CI,IAAI,EH7CU,AEgDV,GCHK,CH7CjB,AEgDE,ICHU,CLrDV,CAAA,CAAA,AKqDuB,CLrDvB,SAAA,EAAM,EAAE,CKqDR,KLrDc,OAAR,EAAiB,MAAM,EAAvB,EAAN,CAAA;AEUF,AG4CE,ADGD,QCHO,CH5CR,KAAA,AG4Cc,GH5Cd,QG4CyB,EAAE,GAAb,CAAZ;ALtDA,AEWA,AG4CA,ADDF,QF3CQ,AG4CA,ADDR,IAAA,ECCc,CDDd,EF3CiB,EFXf,AIsDF,IJtDE,EKuDuB,CH5CC,CG4CC,GAAb,CAAZ,SH5Ce,CAAwB,mBAAxB,CAAf;AACA,AG4CA,ADGF,QCHQ,GH5CC,CG4CG,CAAC,GH5CX,GAAe,EG4CI,EH5CnB,CG4CU,KAAiB,MAAM,GAAvB,CAAV;AH3CA,AG4CA,ADGF,WF/CS,AG4CA,IAAI,EH5CX,GAAgB,IAAhB,AG4CW,OAAJ,CACL,OAAO,WAAP,GAAqB,KAAK,IAA1B,GAAiC,kBAAkB,EAAnD,GAAwD,IAAI,CADvD,EAEL,OAAO,WAAP,GAAqB,KAAK,GAA1B,GAAgC,KAAK,MAAL,GAAc,EAFzC,CAAP;AH1CA,AG8CD,ADCD,QF/CQ,CE+CR,OAAA,CAAmB,GF/CC,CE+CpB,EAAkC,CF/CV,MAAJ,CAAW,KAAX,EAAkB,OAAlB,CAAlB;AFdD,AEeC,AG+CF,QH/CQ,CG+CR,YH/CqB,AG+CrB,CAAuB,EAAvB,CH/CyB,CG+CU,CAAnC,EAA4C,EH/CvB,CAAW,MAAX,EAAmB,OAAnB,CAAnB;AFbF,AEeE,AG8CA,IL7DE,IK6DI,IAAI,CH9CV,CFfoB,IAAtB,EEeE,CG8CmB,EH9CnB,YG8CU,CAAwB,EAAxB,CAAV;AL3DF,AEcI,AG8CF,QAAM,CL5DR,GEcU,EFdV,CK4De,EL5Df,AK4DiB,CH9CD,OAAO,UAAP,CAAkB,EG8CnB,EH9CC,AG8Cd,CH9CE;AFbF,AEcE,AG8CF,ADHA,QJzDM,AK4DA,IH9CA,AG8CI,KAAK,EL5DE,EEcf,CG8CQ,EH9CQ,CG8CK,GL5DG,AIyDd,IAAZ,CF3CE,OG8CF,EL5DiB,CAAwB,gBAAxB,CAAjB;AACA,AEcE,AG8CF,ADHA,QCGM,IH9CA,CFdG,AK4DE,OH9CT,AG8CgB,CH9CH,CAAb,CE2CF,CJzDA,AEckB,AE2ClB,CF3CE,AE2CF,CAAA,CJzDuB,AEcF,EFdrB,EEcE,AG8CS,EH9CgB,CG8CK,CDHhC,EF3CE,AE2CI,ECG+B,IAA1B,GAAiC,ADH5C,CAAA,iBCG8D,EAA9D;AL1DA,AEaE,AG8CF,QL3DM,AK2DA,IAAI,GL3DG,EK2DE,CH9CH,EG8CF,CAAS,CAAT,CL3DW,CK2DC,CH9CpB,CAAkB,GFbP,AEaX,AG8CyB,CL3DC,EK2DN,CAAS,CAAC,IAAI,EAAL,IAAW,CAApB,EAAuB,CAAvB,CAAZ,CL3DG,AK2Db,CL3DA;AAEA,AEYE,AG8CF,ADLA,QCKM,KL1DN,CK0DY,KL1DZ,AEYa,AEyCb,GJrDA,CIqDA,ECKuB,CH9CrB,CAAmB,AG8CI,GH9CvB,AG8CU,CAAZ;ALzDE,AEYD,AG8CD,ADLA,QCKM,IL1DE,EK0DI,EL1DA,KAAK,EIqDjB,CAAA,CCKuB,ADLvB,CAAA,CJrDY,AK0Da,EL1DvB,CK0DU,CAAZ,KDLA,EAAO,OAAP,CAAA;AJpDE,AEaF,AG6CA,MAAE,EH7CI,GG6CN,CL1DM,EK0DI,CH7CG,EFbF,EAAE,CK0DA,GL1DX,AEamB,EFbF,CEaN,AG6CM,CH7CM,AG6CL,CH5ClB,KG4CwB,GH5ChB,AG4CS,IAAc,CAAvB,CAAV,CH5CE,CAAgB,UAAU,OAAV,CAAkB,IAAlB,CAAuB,SAAvB,CAAhB,CADuB,EAEvB,QAAQ,OAAR,CAAgB,WAAW,YAAX,CAAwB,IAAxB,CAA6B,UAA7B,CAAhB,CAFuB,CAAZ,CAAb;AFZI,AEiBJ,AGyCD,aHzCC,MAAA,EFjBa,CEiBb,UFjBI,IAAwB,EAAE,IAA1B;AACD,AEiBD,AG0CJ,ADRC,ICQG,SH1CK,MAAL,CG0CwB,IAA5B;AL1DI,AEiBA,AG0CJ,ADPA,SCOA,ADPA,GJpDQ,KAAK,CIoDb,CAAqB,CAArB,CCOA,CAAuB,ADPO,EJpD1B,CK2DJ,CL3DsB,CK2DY;AL1D5B,AEiBF,AG0CF,QAAM,IAAI,MH1CE,GG0CO,CL3DL,aK2DJ,CAAwB,IH1CA,IFjBE,EEiBxB,CAAV,GFjBY,AK2DJ,CL3DN,AK2DJ;AL1DG,AEiBF,AG0CD,MAAE,KAAF,CAAQ,IAAR,GAAkB,IAAI,CAAJ,GAAK,IAAvB;AL1DC,AEkBD,AGyCA,MAAE,KAAF,CAAQ,EHzCE,CGyCV,GAAiB,IAAI,CAAJ,GAAK,IAAtB,MHzCgC,MAAtB,CAAV;AFhBA,AEiBD,AGyCC,ADVA,QCUI,M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","file":"src.e985430a.map","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [0, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Check if the value is an iterator.\n *\n * @param v The value to check\n */\nfunction isIterator(v) {\n    if (v == null || typeof v !== 'object') {\n        return false;\n    }\n    return 'next' in v && typeof v.next === 'function';\n}\nvar runningCoroutine = null;\n/**\n * The Lua-like pseudo-coroutine that wraps iterators.\n */\nvar Coroutine = /** @class */ (function () {\n    /**\n     * Create a new coroutine to iterate `start` first.\n     * Read `create<T>` for details.\n     *\n     * @param start Iterator to be started to iterate first\n     */\n    function Coroutine(start) {\n        this.waitingFrames = 0;\n        this.iteratorStack = [];\n        if (start) {\n            this.iteratorStack.push({ iterator: start, deferFns: [] });\n        }\n    }\n    Object.defineProperty(Coroutine.prototype, \"isAlive\", {\n        /**\n         * Whether this coroutine is alive.\n         */\n        get: function () {\n            return 0 < this.iteratorStack.length;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Stop this coroutine.\n     */\n    Coroutine.prototype.stop = function () {\n        this.iteratorStack = [];\n    };\n    /**\n     * Resume the current iterator and receive the yielded value at the next frame.\n     * This method will return nulls forever after the coroutine stops.\n     *\n     * @returns The value at the next frame\n     */\n    Coroutine.prototype.resume = function (resumeValue) {\n        var result = null;\n        if (--this.waitingFrames < 1) {\n            if (this.iteratorStack.length === 0) {\n                return null;\n            }\n            var wait = 1; // will be set waitingFrames\n            var exception = void 0;\n            while (0 < this.iteratorStack.length) {\n                // get the next value `yield`ed from the current iterator\n                var frame = this.iteratorStack[this.iteratorStack.length - 1];\n                var iterator = frame.iterator;\n                var r = null;\n                var ex = null;\n                runningCoroutine = this;\n                try {\n                    if (exception != null) {\n                        if (!iterator.throw) {\n                            throw exception;\n                        }\n                        r = iterator.throw(exception);\n                    }\n                    else {\n                        r = iterator.next(resumeValue);\n                    }\n                }\n                catch (e) {\n                    ex = e;\n                }\n                exception = null;\n                runningCoroutine = null;\n                if (ex != null) {\n                    var e = this.popStack();\n                    if (e != null)\n                        ex = e; // TODO: composed error\n                    exception = ex;\n                    continue;\n                }\n                resumeValue = undefined;\n                if (r.done) {\n                    var ex_1 = this.popStack();\n                    if (ex_1 != null) {\n                        exception = ex_1;\n                        continue;\n                    }\n                }\n                var y = r.value;\n                if (typeof y === 'undefined') {\n                    if (r.done) {\n                        // bare `return` (continue the caller iterator on the stack top)\n                        continue;\n                    }\n                    // bare `yield` (wait 1 frame)\n                    y = null;\n                }\n                if (isIterator(y)) {\n                    // pause and save the current iterator and start the `yield`ed iterator\n                    var iterator_1 = y;\n                    this.iteratorStack.push({ iterator: iterator_1, deferFns: [] });\n                    continue;\n                }\n                else if (typeof y === 'number') {\n                    // wait `y` frames\n                    wait = y;\n                    break;\n                }\n                else {\n                    // `y` is a value of `T`\n                    if (r.done && 0 < this.iteratorStack.length) {\n                        // y is `return`ed from the current iterator so it has been stopped,\n                        // and y is to be the value of `yield` expression in the caller iterator\n                        resumeValue = y;\n                        continue;\n                    }\n                    // y is the `resume()` value of the current frame\n                    result = y;\n                    wait = 1;\n                    if (result && typeof result.wait === 'number') {\n                        wait = result.wait;\n                    }\n                    break;\n                }\n            }\n            if (exception != null) {\n                throw exception;\n            }\n            this.waitingFrames = Math.ceil(wait);\n        }\n        return result;\n    };\n    Coroutine.prototype.pushIterator = function (iter) {\n        this.iteratorStack.push({ iterator: iter, deferFns: [] });\n    };\n    Coroutine.prototype.defer = function (fn) {\n        if (this.iteratorStack.length === 0) {\n            throw new Error('luacoro.defer() must be called from within a coroutine');\n        }\n        this.iteratorStack[this.iteratorStack.length - 1].deferFns.push(fn);\n    };\n    Coroutine.prototype.popStack = function () {\n        if (this.iteratorStack.length === 0)\n            return null;\n        var deferFns = this.iteratorStack.pop().deferFns;\n        var ex = null;\n        // TODO: call all deferFns and return composed error\n        try {\n            for (var i = deferFns.length - 1; 0 <= i; i--) {\n                deferFns[i]();\n            }\n        }\n        catch (e) {\n            ex = e;\n        }\n        return ex;\n    };\n    return Coroutine;\n}());\nexports.Coroutine = Coroutine;\n/**\n * Register `fn` to be invoked when exiting the caller iterator.\n * Works like [Golang's defer](https://golang.org/ref/spec#Defer_statements).\n *\n * @param fn Callback\n */\nfunction defer(fn) {\n    if (!runningCoroutine) {\n        throw new Error('luacoro.defer() must be called from within a coroutine');\n    }\n    runningCoroutine.defer(fn);\n}\nexports.defer = defer;\n/**\n * Create a new coroutine to iterate `start` first.\n *\n * `start` normally must be an iterator generated by a generator\n * implemented to `yield` (or `return`) values of the following 3 types:\n *\n * - `o`: An instance of arbitary class or plain `object` | `string` | `Array`\n *   - `resume()` returns `o`.\n *   - If `o` has a `wait` field, `resume()` returns `null`\n *     through `o.wait - 1` frames after that.\n *     The iterator is not resumed while this, which means that\n *     this coroutine waits `n` frames including the current frame.\n *\n * - `n`: A `number`\n *   - `resume()` returns `null`.\n *   - After that, `resume()` returns `null` through `n - 1` frames.\n *     The iterator is not resumed while this, which means that\n *     this coroutine waits `n` frames including the current frame.\n *\n * - `i`: An `Iterator` of the same type as `start`\n *   - When `i` is `return`ed, the current iterator is terminated\n *     and `i` is immediately started to iterate as the replacement.\n *   - When `i` is `yield`ed, the current iterator is paused and pushed onto the stack,\n *     and `i` is immediately started to iterate.\n *     After `i` is terminated, the caller iterator is popped from the stack\n *     and continued to be iterated.\n *     At this time, the return value of `i` can be got.\n *\n * @param start Iterator to be started to iterate first\n */\nfunction create(start) {\n    if (start instanceof Coroutine) {\n        return start;\n    }\n    if (isIterator(start)) {\n        return new Coroutine(start);\n    }\n    return new Coroutine(start());\n}\nexports.create = create;\n/**\n * Coroutine that wraps multiple iterators and yields results in an array.\n */\nvar ComposedCoroutine = /** @class */ (function (_super) {\n    __extends(ComposedCoroutine, _super);\n    /**\n     * Create a new coroutine to iterate all `coroutines`.\n     * Read `all<T>` and `race<T>` for details.\n     *\n     * @param coroutines Coroutines or iterators\n     * @param fnAlive Callback to judge this coroutine is alive or not\n     */\n    function ComposedCoroutine(coroutines, fnAlive) {\n        var _this = _super.call(this) || this;\n        _this.children = [].concat(coroutines);\n        _this.pushIterator(_this.main(fnAlive));\n        return _this;\n    }\n    /**\n     * Add a `coroutine` to iterate together.\n     * @param c Coroutine or iterator\n     */\n    ComposedCoroutine.prototype.add = function (coroutine) {\n        this.children.push(create(coroutine));\n    };\n    ComposedCoroutine.prototype.main = function (fnAlive) {\n        var result, _i, _a, coro;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    if (!true) return [3 /*break*/, 2];\n                    result = [];\n                    for (_i = 0, _a = [].concat(this.children); _i < _a.length; _i++) {\n                        coro = _a[_i];\n                        result.push(coro.resume());\n                    }\n                    if (!fnAlive(this.children))\n                        return [2 /*return*/, result];\n                    return [4 /*yield*/, result];\n                case 1:\n                    _b.sent();\n                    return [3 /*break*/, 0];\n                case 2: return [2 /*return*/];\n            }\n        });\n    };\n    return ComposedCoroutine;\n}(Coroutine));\nexports.ComposedCoroutine = ComposedCoroutine;\n/**\n * Create a new coroutine to iterate all `coroutines` concurrently.\n * This coroutine will never die.\n *\n * Additional coroutines can be added by `add<T>()`.\n * Dead coroutines will be removed automatically.\n *\n * @param coroutines Coroutines or iterators\n * @returns Composed coroutine\n */\nfunction concurrent(coroutines) {\n    return new ComposedCoroutine(coroutines.map(function (c) { return create(c); }), function (children) {\n        for (var i = children.length - 1; 0 <= i; i--) {\n            if (!children[i].isAlive)\n                children.splice(i, 1);\n        }\n        return true;\n    });\n}\nexports.concurrent = concurrent;\n/**\n * Create a new coroutine to iterate all `coroutines`\n * concurrently until the all of them are dead.\n *\n * @param coroutines Coroutines or iterators\n * @returns Composed coroutine\n */\nfunction all(coroutines) {\n    return new ComposedCoroutine(coroutines.map(function (c) { return create(c); }), function (children) {\n        for (var _i = 0, children_1 = children; _i < children_1.length; _i++) {\n            var coro = children_1[_i];\n            if (coro.isAlive)\n                return true;\n        }\n        return false;\n    });\n}\nexports.all = all;\n/**\n * Create a new coroutine to iterate all `coroutines`\n * concurrently until one of them is dead.\n *\n * @param coroutines Coroutines or iterators\n * @returns Composed coroutine\n */\nfunction race(coroutines) {\n    return new ComposedCoroutine(coroutines.map(function (c) { return create(c); }), function (children) {\n        if (children.length === 0)\n            return false;\n        for (var _i = 0, children_2 = children; _i < children_2.length; _i++) {\n            var coro = children_2[_i];\n            if (!coro.isAlive)\n                return false;\n        }\n        return true;\n    });\n}\nexports.race = race;\n/**\n * Create a new coroutine that repeats\n * generating iterator and iterating it forever.\n *\n * @param generator Generator (instance methods must be `bind`ed, be careful)\n * @returns Composed coroutine\n */\nfunction forever(generator) {\n    return new Coroutine(function () {\n        var coro, isNew, v;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (!true) return [3 /*break*/, 2];\n                    isNew = false;\n                    if (!(coro && coro.isAlive)) {\n                        coro = new Coroutine(generator());\n                        isNew = true;\n                    }\n                    v = coro.resume();\n                    if (!coro.isAlive && v == null && !isNew) {\n                        return [3 /*break*/, 0];\n                    }\n                    return [4 /*yield*/, v];\n                case 1:\n                    _a.sent();\n                    return [3 /*break*/, 0];\n                case 2: return [2 /*return*/];\n            }\n        });\n    }());\n}\nexports.forever = forever;\n//# sourceMappingURL=index.js.map","import * as luacoro from 'luacoro'\n\nconst bpm = 160 // tempo\nconst n8 = Math.round(60 * 60 / bpm / 2) // frame count of 8th note\nconst n4 = n8 * 2\nconst n4d = n8 * 3\nconst n1 = n8 * 8\n\ninterface MessageFrame {\n  text: string\n  wait: number\n}\n\nfunction* maryHadA (): luacoro.Iterator<MessageFrame> {\n  yield { text: 'Ma', wait: n4d } // `resume()` returns this value and\n                                  // wait `n4d` frames with suspending here\n  yield { text: 'ry ', wait: n8 }\n  yield { text: 'had ', wait: n4 }\n  yield { text: 'a ', wait: n4 }\n}\n\nfunction* littleLamb (withoutRest?: boolean): luacoro.Iterator<MessageFrame> {\n  yield { text: 'lit', wait: n4 }\n  yield { text: 'tle ', wait: n4 }\n  yield { text: 'lamb ', wait: n4 }\n  if (!withoutRest) {\n    yield n4\n  }\n}\n\nfunction* maryHadALittleLamb (): luacoro.Iterator<MessageFrame> {\n  yield maryHadA() // To go to another iterator and come back, just yield it\n  yield littleLamb()\n  yield littleLamb()\n  yield littleLamb()\n  yield maryHadA()\n  yield littleLamb(true)\n  yield { text: 'its ', wait: n4 }\n  yield { text: 'fleece ', wait: n4 }\n  yield { text: 'was ', wait: n4 }\n  yield { text: 'white ', wait: n4 }\n  yield { text: 'as ', wait: n4 }\n  yield { text: 'snow ', wait: n1 }\n}\n\nlet request: number = null\n\nexport function start () {\n  const textarea = document.getElementById('basic-textarea') as HTMLTextAreaElement\n  textarea.textContent = ''\n\n  const coro = luacoro.create(maryHadALittleLamb())\n\n  function update () {\n    const v = coro.resume()\n    if (v && v.text) {\n      textarea.textContent += v.text\n    }\n    if (coro.isAlive) {\n      request = requestAnimationFrame(update)\n    }\n  }\n\n  request = requestAnimationFrame(update)\n}\n\nexport function stop () {\n  if (request) cancelAnimationFrame(request)\n  request = null\n}\n","export default class Vector {\n  x: number\n  y: number\n\n  constructor (x: number = .0, y: number = .0) {\n    this.x = x\n    this.y = y\n  }\n\n  clone (): Vector {\n    return new Vector(this.x, this.y)\n  }\n\n  size (): number {\n    return Math.sqrt(this.x * this.x + this.y * this.y)\n  }\n\n  add (v: Vector): Vector {\n    return new Vector(this.x + v.x, this.y + v.y)\n  }\n\n  sub (v: Vector): Vector {\n    return new Vector(this.x - v.x, this.y - v.y)\n  }\n\n  mul (r: number): Vector {\n    return new Vector(this.x * r, this.y * r)\n  }\n\n  div (r: number): Vector {\n    return new Vector(this.x / r, this.y / r)\n  }\n\n  normalize (): Vector {\n    return this.div(this.size())\n  }\n\n  rotate (rad: number): Vector {\n    const c = Math.cos(rad)\n    const s = Math.sin(rad)\n    return new Vector(\n      this.x * c - this.y * s,\n      this.x * s + this.y * c\n    )\n  }\n\n  lerp (v: Vector, r: number): Vector {\n    return new Vector(\n      this.x * (1 - r) + v.x * r,\n      this.y * (1 - r) + v.y * r\n    )\n  }\n}\n","import * as luacoro from 'luacoro'\nimport Vector from './vector'\n\nconst size = 300\nconst topLeft = new Vector(size * .3, size * .3)\nconst topRight = new Vector(size * .7, size * .3)\nconst bottomRight = new Vector(size * .7, size * .7)\nconst bottomLeft = new Vector(size * .3, size * .7)\nconst absoluteVelocity = 3\n\nclass Sprite {\n  style: string\n  pos: Vector\n\n  constructor (style: string, pos: Vector) {\n    this.style = style\n    this.pos = pos.clone()\n  }\n\n  *move (to: Vector): luacoro.Iterator<{}> {\n    const distance = to.sub(this.pos)\n    const direction = distance.normalize()\n    const velocity = direction.mul(absoluteVelocity)\n    const division = Math.ceil(distance.size() / absoluteVelocity)\n    for (let i = 1; i < division; i++) {\n      this.pos = this.pos.add(velocity)\n      yield // wait 1 frame\n    }\n    this.pos = to.clone()\n    yield // wait 1 frame\n  }\n\n  *goRound (): luacoro.Iterator<{}> {\n    yield this.move(topRight) // To go to another iterator and come back, just yield it\n    yield this.move(bottomRight)\n    yield this.move(bottomLeft)\n    yield this.move(topLeft)\n  }\n\n  *backAndForth (): luacoro.Iterator<{}> {\n    yield this.move(bottomRight)\n    yield this.move(topLeft)\n  }\n\n  repaint (ctx: CanvasRenderingContext2D) {\n    ctx.fillStyle = this.style\n    ctx.fillRect(this.pos.x - 8, this.pos.y - 8, 16, 16)\n  }\n}\n\nlet request: number = null\n\nexport function start () {\n  const canvas = document.getElementById('concurrent-canvas') as HTMLCanvasElement\n  canvas.width = size\n  canvas.height = size\n\n  const redSprite = new Sprite('red', topLeft)\n  const blueSprite = new Sprite('blue', topLeft)\n\n  function repaint () {\n    const ctx = canvas.getContext('2d')\n    ctx.fillStyle = '#eeeeee'\n    ctx.fillRect(0, 0, size, size)\n    redSprite.repaint(ctx)\n    blueSprite.repaint(ctx)\n  }\n\n  const coro = luacoro.all([\n    luacoro.forever(redSprite.goRound.bind(redSprite)),\n    luacoro.forever(blueSprite.backAndForth.bind(blueSprite))\n  ])\n\n  function update () {\n    coro.resume()\n    repaint()\n    request = requestAnimationFrame(update)\n  }\n\n  request = requestAnimationFrame(update)\n}\n\nexport function stop () {\n  if (request) cancelAnimationFrame(request)\n  request = null\n}\n","import * as luacoro from 'luacoro'\nimport Vector from './vector'\n\nconst eps = 2.0\nconst size = 300\n\nfunction* koch (v: Vector): luacoro.Iterator<Vector> {\n  if (v.size() <= eps) {\n    yield v // resume() returns v and wait 1 frame\n            // (different from `return v`, be careful)\n    return // back to the caller iterator (with no return value)\n  }\n  const t = v.mul(1.0 / 3.0)\n                                       // ＿/\\＿\n  yield koch(t)                        // ＿\n  yield koch(t.rotate(-Math.PI / 3.0)) //   /\n  yield koch(t.rotate(Math.PI / 3.0))  //    \\\n  yield koch(t)                        //     ＿\n  // back to the caller iterator (with no return value)\n}\n\nlet request: number = null\n\nexport function start () {\n  const info = document.getElementById('recursion-info') as HTMLDivElement\n\n  const canvas = document.getElementById('recursion-canvas') as HTMLCanvasElement\n  canvas.width = size\n  canvas.height = size\n\n  const ctx = canvas.getContext('2d')\n  ctx.fillStyle = '#eeeeee'\n  ctx.fillRect(0, 0, size, size)\n\n  let frame = 0\n  function drawLine (from: Vector, to: Vector) {\n    ctx.beginPath()\n    ctx.strokeStyle = '#000000'\n    ctx.lineWidth = 1\n    ctx.moveTo(from.x, from.y)\n    ctx.lineTo(to.x, to.y)\n    ctx.stroke()\n    info.textContent = `frame: ${frame} / position: (${Math.round(to.x)}, ${Math.round(to.y)})`\n    frame++\n  }\n\n  let pos = new Vector(0, size * .8)\n  const vec = new Vector(size, 0)\n  const coro = luacoro.create(koch(vec))\n\n  function update () {\n    request = null\n\n    const v = coro.resume()\n    if (v) {\n      drawLine(pos, pos.add(v))\n      pos = pos.add(v)\n    }\n    if (coro.isAlive) {\n      request = requestAnimationFrame(update)\n    }\n  }\n\n  request = requestAnimationFrame(update)\n}\n\nexport function stop () {\n  if (request) cancelAnimationFrame(request)\n  request = null\n}\n","import * as luacoro from 'luacoro'\n\n///////////////////////////////////////////////////////////////////////////\n// Main game system and API implementations\n\nlet mode: string\n\nlet limitKeys: string[]\nlet lastKey: string\nwindow.addEventListener('keydown', (e: KeyboardEvent) => {\n  if (mode !== 'waitKey') return\n  if (limitKeys && limitKeys.indexOf(e.key) < 0) return\n  lastKey = e.key\n  mode = 'normal'\n  limitKeys = null\n})\n\nlet luminance: number\nfunction updateLuminance () {\n  const e = document.getElementById('inn')\n  e.style.background = `rgb(${luminance}, ${luminance}, ${luminance})`\n}\n\nfunction message (msg: string) {\n  const e = document.createElement('div') as HTMLDivElement\n  e.textContent = msg\n  document.getElementById('inn').appendChild(e)\n}\n\nlet waitingFrames: number\n\nlet request: number = null\n\nexport function start () {\n  mode = 'normal'\n  limitKeys = null\n  lastKey = null\n  luminance = 255\n  updateLuminance()\n  waitingFrames = 0\n  document.getElementById('inn').innerHTML = ''\n\n  let coro = luacoro.create(inn())\n  let frame = 0\n\n  function update () {\n    request = null\n\n    let r\n    const e = document.getElementById('inn')\n    e.classList.remove('showCursor')\n    switch (mode) {\n      case 'waitKey':\n        if (frame % 60 < 30) {\n          e.classList.add('showCursor')\n        }\n        break\n\n      case 'waitFrame':\n        waitingFrames--\n        if (waitingFrames <= 0) {\n          mode = 'normal'\n        }\n        break\n\n      case 'waitFadeOut':\n        luminance -= 5\n        if (luminance <= 0) {\n          luminance = 0\n          mode = 'normal'\n        }\n        updateLuminance()\n        break\n\n      case 'waitFadeIn':\n        luminance += 5\n        if (255 <= luminance) {\n          luminance = 255\n          mode = 'normal'\n        }\n        updateLuminance()\n        break\n\n      default:\n        r = coro.resume()\n        if (r) mode = r\n    }\n    frame++\n    if (coro.isAlive) {\n      request = requestAnimationFrame(update)\n    }\n  }\n\n  request = requestAnimationFrame(update)\n}\n\nexport function stop () {\n  if (request) cancelAnimationFrame(request)\n  request = null\n}\n\n///////////////////////////////////////////////////////////////////////////\n// Helpers\n\nfunction* waitKey (keys?: string[]): luacoro.Iterator<string> {\n  limitKeys = keys\n  yield 'waitKey'\n  return lastKey\n}\n\nfunction* waitFrame (f: number): luacoro.Iterator<string> {\n  waitingFrames = f\n  yield 'waitFrame'\n}\n\nfunction* waitFadeOut (): luacoro.Iterator<string> {\n  yield 'waitFadeOut'\n}\n\nfunction* waitFadeIn (): luacoro.Iterator<string> {\n  yield 'waitFadeIn'\n}\n\n///////////////////////////////////////////////////////////////////////////\n// Scenario implementations\n\nfunction* inn (): luacoro.Iterator<string> {\n  message('Welcome to the traveler\\'s Inn.')\n  message('Room and board is 6 GOLD per night.')\n  message('Dost thou want a room? (Y/N)')\n  const key = yield waitKey(['y', 'n'])\n\n  if (key === 'y') {\n    message('Good night.')\n    yield waitFrame(30)\n    yield waitFadeOut()\n    yield waitFrame(30)\n    // player.money -= 6\n    // player.hp = player.maxHP\n    // player.mp = player.maxMP\n    yield waitFadeIn()\n    message('Good morning.')\n    message('Thou hast had a good night\\'s sleep I hope.')\n    yield waitKey()\n  }\n\n  message('I shall see thee again.')\n  yield waitKey()\n}\n","import * as luacoro from 'luacoro'\nimport Vector from './vector'\n\nlet request: number = null\nlet coro: luacoro.ComposedCoroutine<{}>\n\nexport function start () {\n  coro = luacoro.concurrent([ guide() ])\n\n  function update () {\n    coro.resume()\n    request = requestAnimationFrame(update)\n  }\n\n  request = requestAnimationFrame(update)\n}\n\nexport function stop () {\n  if (request) cancelAnimationFrame(request)\n  request = null\n  coro = null\n  reset()\n}\n\n///////////////////////////////////////////////////////////////////////////\n// Event handlers\n\nfunction updateTitle () {\n  const e = document.getElementById('guide-form-title') as HTMLInputElement\n  document.getElementById('guide-preview-title').textContent = e.value\n}\ndocument.getElementById('guide-form-title').addEventListener('input', updateTitle)\n\nfunction updateBgColor () {\n  const r = parseFloat((document.getElementById('guide-form-color-r') as HTMLInputElement).value)\n  const g = parseFloat((document.getElementById('guide-form-color-g') as HTMLInputElement).value)\n  const b = parseFloat((document.getElementById('guide-form-color-b') as HTMLInputElement).value)\n  document.getElementById('guide-preview').style.backgroundColor = `rgb(${r}, ${g}, ${b})`\n}\ndocument.getElementById('guide-form-color-r').addEventListener('input', updateBgColor)\ndocument.getElementById('guide-form-color-g').addEventListener('input', updateBgColor)\ndocument.getElementById('guide-form-color-b').addEventListener('input', updateBgColor)\n\nfunction showSettingsDialog () {\n  document.getElementById('guide-dialog').style.display = 'block'\n}\ndocument.getElementById('guide-open').addEventListener('click', showSettingsDialog)\n\nfunction hideSettingsDialog () {\n  document.getElementById('guide-dialog').style.display = 'none'\n}\ndocument.getElementById('guide-form-ok').addEventListener('click', hideSettingsDialog)\n\n///////////////////////////////////////////////////////////////////////////\n// Helpers\n\nfunction showCursor () {\n  document.getElementById('guide-cursor').style.display = 'block'\n}\n\nfunction reset () {\n  document.getElementById('guide-message').style.display = 'none'\n  document.getElementById('guide-cursor').style.display = 'none'\n  document.getElementById('guide-dialog').style.display = 'none'\n}\n\nfunction updateHover (p: Vector, isFocused: boolean) {\n  let e = document.elementFromPoint(p.x, p.y)\n  while (e && e.id !== 'guide') {\n    if (isFocused) {\n      e.classList.add('hover')\n    } else {\n      e.classList.remove('hover')\n    }\n    e = e.parentElement\n  }\n}\n\nfunction getElementPos (id: string, anchorX?: number, anchorY?: number): Vector {\n  const e = document.getElementById(id) as HTMLElement\n  if (anchorX == null) anchorX = .5\n  if (anchorY == null) anchorY = .5\n  const rect = e.getBoundingClientRect()\n  return new Vector(\n    window.pageXOffset + rect.left + rect.width * anchorX,\n    window.pageYOffset + rect.top + rect.height * anchorY\n  )\n}\n\nconst sliderThumbSize = 12\n\nfunction getSliderPos (id: string, value?: number): Vector {\n  const e = document.getElementById(id) as HTMLInputElement\n  if (value == null) value = parseFloat(e.value)\n  const rect = e.getBoundingClientRect()\n  const w = rect.width - sliderThumbSize\n  const min = parseFloat(e.min)\n  const max = parseFloat(e.max)\n  const r = (value - min) / (max - min)\n  return new Vector(\n    window.pageXOffset + rect.left + sliderThumbSize * .5 + w * r,\n    window.pageYOffset + rect.top + rect.height * .5\n  )\n}\n\nfunction setSliderPos (id: string, x: number) {\n  const e = document.getElementById(id) as HTMLInputElement\n  const rect = e.getBoundingClientRect()\n  const w = rect.width - sliderThumbSize\n  const x0 = window.pageXOffset + rect.left + sliderThumbSize * .5\n  const r = Math.max(0, Math.min((x - x0) / w, 1))\n  const min = parseFloat(e.min)\n  const max = parseFloat(e.max)\n  e.value = `${min + (max - min) * r}`\n}\n\nlet lastCursorPos: Vector = null\nfunction setCursorPos (pos: Vector) {\n  const e = document.getElementById('guide-cursor') as HTMLElement\n  e.style.left = `${pos.x}px`\n  e.style.top = `${pos.y}px`\n  if (lastCursorPos) updateHover(lastCursorPos, false)\n  updateHover(pos, true)\n  lastCursorPos = pos.clone()\n}\n\nfunction message (msg: string) {\n  const e = document.getElementById('guide-message') as HTMLDivElement\n  e.textContent = msg\n  e.style.display = 'block'\n}\n\nfunction easingIn (v: number): number {\n  return v * v * v\n}\n\nfunction easingOut (v: number): number {\n  return 1 - easingIn(1 - v)\n}\n\nfunction easingInOut (v: number): number {\n  if (.5 < v) return 1 - easingInOut(1 - v)\n  return easingIn(v * 2) * .5\n}\n\n///////////////////////////////////////////////////////////////////////////\n// Guide implementations\n\nconst waitFrames = 30\nconst longWaitFrames = 120\nconst baseMoveFrames = 15\nconst moveFramesPerDistance = .15\nconst beforeTypeFrames = 20\nconst typeFrames = 4\nconst clickEffectFrames = 30\nconst exampleTitles = [\n  'JavaScript tutorial',\n  'My diary'\n]\nconst exampleColors = [\n  [ 128, 192, 255 ],\n  [ 255, 255, 128 ]\n]\nlet trial = 0\n\nfunction *moveTo (to: Vector, fn?: (r: number, p: Vector) => void): luacoro.Iterator<{}> {\n  const from = lastCursorPos.clone()\n  const distance = to.sub(from).size()\n  const frames = baseMoveFrames + distance * moveFramesPerDistance\n  for (let i = 0; i < frames; i++) {\n    const r = easingInOut(i / (frames - 1))\n    const p = from.lerp(to, r)\n    setCursorPos(p)\n    if (fn) fn(r, p)\n    yield // wait 1 frame\n  }\n}\n\nfunction *moveSlider (id: string, valueTo: number, fn: () => void) {\n  yield moveTo(getSliderPos(id))\n  yield moveTo(getSliderPos(id, valueTo), (r: number, p: Vector) => {\n    setSliderPos(id, p.x)\n    if (fn) fn()\n  })\n}\n\nfunction *inputText (id: string, text: string, fn?: (e: HTMLInputElement, text: string) => void): luacoro.Iterator<{}> {\n  const e = document.getElementById(id) as HTMLInputElement\n  e.focus()\n  e.setSelectionRange(0, e.value.length)\n  yield beforeTypeFrames\n  for (let i = 1; i <= text.length; i++) {\n    e.value = text.substr(0, i)\n    if (fn) fn(e, e.value)\n    yield typeFrames\n  }\n}\n\nfunction addClickEffect () {\n  coro.add(function* (): luacoro.Iterator<{}> {\n    const e = document.createElement('div')\n    e.classList.add('guide-click-effect')\n    document.getElementById('guide').appendChild(e)\n    luacoro.defer(() => {\n      e.remove()\n    })\n    e.style.left = `${lastCursorPos.x}px`\n    e.style.top = `${lastCursorPos.y}px`\n\n    for (let i = 1; i <= clickEffectFrames; i++) {\n      const s = easingOut(i / clickEffectFrames)\n      e.style.transform = `translate(-50%, -50%) scale(${s}, ${s})`\n      e.style.opacity = `${1 - s}`\n      yield\n    }\n  })\n}\n\nfunction* guide (): luacoro.Iterator<{}> {\n  reset()\n  setCursorPos(getElementPos('guide'))\n  showCursor()\n  yield waitFrames\n\n  message('To customize theme, click the gear icon at top-right.')\n  yield waitFrames\n  yield moveTo(getElementPos('guide-open'))\n  yield waitFrames\n  addClickEffect()\n  showSettingsDialog()\n  message('The settings dialog is appeared.')\n  yield longWaitFrames\n\n  message('Input your blog title.')\n  yield waitFrames\n  yield moveTo(getElementPos('guide-form-title', .9))\n  yield waitFrames\n  const title = exampleTitles[trial % exampleTitles.length]\n  addClickEffect()\n  yield inputText('guide-form-title', title, () => updateTitle())\n  yield waitFrames\n\n  message('Change background color.')\n  yield waitFrames\n  const color = exampleColors[trial % exampleColors.length]\n  yield moveSlider('guide-form-color-r', color[0], () => updateBgColor())\n  yield moveSlider('guide-form-color-g', color[1], () => updateBgColor())\n  yield moveSlider('guide-form-color-b', color[2], () => updateBgColor())\n  trial++\n  yield waitFrames\n\n  message('Click \"OK\" button.')\n  yield waitFrames\n  yield moveTo(getElementPos('guide-form-ok'))\n  yield waitFrames\n  addClickEffect()\n  hideSettingsDialog()\n  yield longWaitFrames\n\n  reset()\n}\n","import * as basic from './basic'\nimport * as concurrent from './concurrent'\nimport * as recursion from './recursion'\nimport * as inn from './inn'\nimport * as guide from './guide'\n\ninterface Demo {\n  start (): void\n  stop (): void\n}\n\nconst examples: {[name: string]: Demo} = {\n  basic,\n  concurrent,\n  recursion,\n  inn,\n  guide\n}\n\nconst buttons = document.getElementById('buttons') as HTMLDivElement\nbuttons.innerHTML = ''\n\nfor (let name in examples) {\n  const button = document.createElement('button') as HTMLButtonElement\n  button.textContent = name\n  buttons.appendChild(button)\n  let currentDemo: Demo = null\n  button.addEventListener('click', function (button: HTMLButtonElement, name: string, demo: Demo, e: Event) {\n    button.blur()\n    const divs = document.getElementsByClassName('example')\n    for (let i = 0; i < divs.length; i++) {\n      divs[i].classList.remove('visible')\n    }\n    document.getElementById(name).classList.add('visible')\n    if (currentDemo) currentDemo.stop()\n    demo.start()\n    currentDemo = demo\n  }.bind(null, button, name, examples[name]))\n}\n"]}