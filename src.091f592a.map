{"version":3,"sources":["node_modules/luacoro/dist/index.js","src/basic.ts","src/vector.ts","src/concurrent.ts","src/recursion.ts","src/inn.ts","node_modules/bezier-easing/src/index.js","src/guide.ts","src/index.ts"],"names":[],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA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,SAAA,QAAA,GAAA;AKmDA,AHhEA,IAAA,UAAA,aAAA,QAAA,SAAA,CAAA,CAAA;AGiEA,AHhEA,AEDA,IFCA,AEDA,UAAA,CFCA,YEDA,IFCA,IEDA,IFCA,KEDA,CAAA,CAAA,GFCA,CAAA,CAAA;AGiEA,AH/DA,AEDA,ADFA,IDGM,ACHN,ODGa,GAAb,ACHA,aAAA,QAAA,SAAA,CAAA,CAAA;AEmEA,ALrDE,AEVF,AEDA,ADFA,IDGM,ACHN,UDGgB,CCHhB,GDGoB,KFUlB,CAAA,CAAA,CAAA,CEVkB,ICHpB,GDGgB,CFUd,AEVyB,EFUnB,EAAE,AGbV,GDGkC,EAAlB,CFUA,CEVsB,GFU9B,AGbR,CAAA,CHasB,AGbtB,EDG6C,EAA7B,CAAhB,CFU4B;AKsD5B,ALrDkC,AEVlC,AEAA,ADFA,IDEM,AEAF,ADFE,ICEN,EDFY,GAAZ,EDEiB,IAAI,SAAA,OAAJ,CAAW,OAAO,EAAlB,EAAsB,OAAO,EAA7B,CAAjB;AGgEA,ALvDQ,AERR,AECA,ADHA,IDEM,AECF,ADHE,OAAO,ECGb,CDHA,GHUE,CAAA,AERkB,EFQc,EERV,SAAA,OAAJ,CAAW,OAAO,EAAlB,EAAsB,OAAO,EAA7B,CAApB;AGgEA,AH/DA,AECA,ADFA,IDCM,AECF,KDFJ,ECEA,EDFA,CAAgB,CAAhB,EDCmB,ACDM,IDCF,SAAA,OAAJ,CAAW,OAAO,EAAlB,EAAsB,OAAO,EAA7B,CAAnB;AGgEA,ALzDE,AENF,AECA,IFDM,GECC,YJKL,IAAA,AENuB,AECzB,CFDA,AECwB,GJKU,MILlC,EAAmC,UAAC,CAAD,EAAiB;AC+DpD,ALzDkC,AELlC,AEAE,IFAF,IEAM,KFAN,IEAe,SFAf,AEAE,EAAwB,UFA1B;AG+DA,ALzDE,AEFA,AEHA,QAAI,KFGJ,MAAA,CAAa,CEHI,EJKjB,CAAA,CAAA,AEFA,CFEA,CEF4B,GAA5B,CEH2B,CFGY,GFEvC,EAAM,CILW,CJKT,AIL2B,EAAE,GAApB,CJKH,GIL8B,CAA5C,CJKM,CILyC,CJK1B,MAAM,EAArB,EAAN,CAAA;AK0DF,AH3DI,AEHF,aFGO,CEHG,EAAE,EFGV,CEHF,EFGe,KAAb;AG4DJ,AL5DkC,AEC9B,AEHF,WAAO,EFGA,GAAL,GAAW,AEHb,GDNI,CDSa,CCTX,IDSO,ACTT,EDSF,ICTc,MAAZ,OAAA,CAAA,CAAA,CAAA,SAAA,EAAA,CAAA,CAAA;AEqEN,AL5DE,AECC,AEHD,ADNE,gBCMU,GJEZ,CIFA,GJEA,AGRE,CAAA,CAAA,CAAA,SAAA,EAAM;AEqEV,AL5DE,AEEC,AEJF,ADNW,CCAZ,UFUG,SAAA,CAAA,EFFD,CAAA,CAAA,AEEC,CFFD,EEEA,OFFA,EAAM,CEEC,CFFC,CEER,EAAiB,GFFH,MAAR,EAAgB,MAAM,EAAtB,EAAN,CAAA;AK6DF,AD7DA,ADTI,ICSA,SAAJ,IDTI,EAAQ;AEuEZ,AL9DE,AICF,SAAA,UJDE,IAAA,CICF,GAAA;AC8DA,AL9DE,AICA,ADXE,QCWI,IAAI,ODXR,ECWiB,EJDnB,AGVE,CHUF,CAAA,CAAA,CGVU,QHUV,AICU,CAAwB,CJD5B,EAAE,EICE,CAAV,GJDc,IAAR,EAAc,MAAM,EAApB,EAAN,CAAA;AK+DF,AD7DE,ADXU,MCWR,KAAF,CAAQ,UAAR,GAAqB,SAAO,SAAP,GAAgB,IAAhB,GAAqB,SAArB,GAA8B,IAA9B,GAAmC,SAAnC,GAA4C,GAAjE;AC8DF,ALhEE,AEEQ,AECT,ADXG,mBHQF,IAAA,AGRE,CAAA,CAAA,CAAA,KDUiB,GAAG,ECVpB,CDUiB,ACVjB,CDUwB,CCVjB,IDUsB,GAAZ,CAAX;AG+DV,AH9DU,AEEV,SAAA,OAAA,CAAkB,GAAlB,EAA6B,UFFP,SAAS,SAAT,EAAZ;AG+DV,AH9DU,AEER,ADZM,QCYA,IAAI,QDZA,CCYS,CDZP,GAAF,CAAM,KDUG,CCVG,ECYZ,CAAuB,ADZvB,CAAJ,ICYI,CFFmB,AEE7B,GFFmB,CAAc,gBAAd,CAAX;AG+DV,AH9DU,AEER,ADZqC,MCYnC,WAAF,GAAgB,GAAhB,QFFmB,KAAK,IAAL,CAAU,SAAS,IAAT,KAAkB,gBAA5B,CAAX;AG+DV,ALnEC,AEKY,AEEX,ADZA,aCYS,UDZT,CDUe,ACVf,CDUW,ACVX,CAAA,CCYA,CAAwB,KAAxB,EAA+B,ADZ/B,EAAM,KAAK,CAAL,CAAN,CAAA,CCYA,CAA2C,ADZN,CCYrC;AC6DF,ALlEA,AIMC,SJND,UAAA,CAAsB,WAAtB,EAA2C;AKmE3C,AD3DA,ADhBuC,ICgBnC,aAAJ;AC4DA,AD1DA,ADjBE,ICiBE,UAAkB,IAAtB,CDjBE,IAAA,GDUkB,CCVmB,GDUf,WAAQ,OAAA,CAAA,CAAA,CAAA,SAAA,EAAA,CAAA,CAAA;AGkEhC,AHjEM,AEQN,ADlBE,SCkBF,KAAA,GAAA,MDlBE,CAAA,CDUS,ACVT,CAAA,EDUI,GAAW,ICVf,CDUoB,CCVd,EDUS,CAAS,ECVb,CDUI,CAAa,ACVf,MAAF,CAAS,CDUL,ACVM,CDUjB,ICVsB,EAAN,GAAW,GAApB,CAAL,CAAN,CAAA,EAAqC;AE4EvC,ALrEE,AEII,AEQJ,WAAO,QAAP,IJZA,CAAA,CAAA,CAAA,CEII,CAAA,CAAA,CAAA,KFJJ,EAAM,EAAE,AEIJ,CAAA,EAAM,GFJI,KAAR,EAAe,MAAM,EAArB,EAAN,CAAA;AKsEF,ADzDE,ADpBA,gBCoBY,GDpBZ,CCoBA,GDpBA,IAAqC;AE8EvC,ALvEE,AEII,AEUJ,ADpBA,cCoBU,IAAV,CJdA,IAAA,AEII,ACVJ,CAAA,CAAA,CAAA,CDUI,IAAM,ICVV,EAAM,KAAK,EAAE,MAAF,CAAS,KAAK,EAAL,GAAU,GAAnB,CAAL,CAAN,CAAA,EAAqC;AE8EvC,ALvEE,AIcA,gBAAY,GAAZ,IJdA,CAAA,CAAA,CAAA,SAAA,EAAM,EAAE,MAAM,MAAR,EAAgB,MAAM,EAAtB,EAAN,CAAA;AKwEF,ADzDE,ADtBA,mBAAA,IAAA,IAAqC;AEgFvC,ALzEE,AECgC,AEehC,ADtBA,mBHMA,CIgBgB,CAAhB,EJhBA,AGNA,CAAA,CAAA,CAAA,SAAA,EAAM,KAAK,CAAL;AEgFR,ALzEE,AIgBA,ADtBA,aCsBS,UJhBT,CAAA,CAAA,CAAA,CIgBA,CAAwB,KAAxB,EJhBA,AIgB+B,EJhBzB,EAAE,KIgBR,CJhBc,EIgB6B,EAA3C,GJhBM,EAAiB,MAAM,EAAvB,EAAN,CAAA;AK0EF,ADxDE,ADzBA,QCyBI,OAAO,EDzBX,EAAqC,ICyBlB,MAAR,CAAe,KAAf,CAAX;ACyDF,AL3EE,AEIE,AEeF,QAAI,QAAQ,CAAZ,EJnBA,IAAA,EEIO,GAAL,GAAW,GAAG,KAAH,EAAX;AGwEJ,AHvEI,AEgBF,AD5BA,aC4BA,MAAA,AD5BA,EHQI,CAAC,AIoBL,CD5BA,IDYE,ACZmC,CDYnC,CAAA,CAAA,KFJE,IEIF,CAAA,EFJE,AEII,CFJJ,CAAA,CAAA,SAAA,EAAA,CAAA,CAAA;AK4EN,AL3EI,AIoBA,kBAAU,IAAV,CJpBA,CAAA,CAAA,CAAA,SAAA,EAAM,EAAN,CAAA;AK4EJ,AHzEI,AEmBA,YAAI,CAAJ,UFnBA,IAAA,IAAM;AG0EV,AL7EI,AIuBA,YAAM,IAAI,GJvBV,IAAA,EIuBmB,cAAT,CAAwB,KAAxB,CAAV;ACuDJ,ADtDI,AD/BH,UC+BK,SAAF,CAAY,MAAZ,CAAmB,YAAnB;AACA,AD9BJ,IAAI,UAAkB,EC8BV,ED9BZ,EC8BI;AFrBD,AEsBG,AD7BN,KDJG,ICIH,KAAA,GC6BW,AD7BX,SC6BM;AFpBH,AEqBK,AD7BN,QAAM,GDQL,ICRY,KDQZ,AEqBS,CFrBT,GCRqB,IDQrB,AEqBiB,EAAR,CFrBV,EEqBuB,EAAjB,EAAqB,CD7Bd,CAAwB,IDQrC,YCRa,CAAb;AC8BQ,AD5BR,QAAM,SAAS,KC4BL,ID5Bc,KC4BhB,CAAY,GAAZ,CAAgB,ID5BT,CAAwB,OC4B/B,WD5BO,CAAf;AHED,AI2BQ,AD5BP,WAAO,KAAP,GAAe,IAAf;AHGF,AI0BQ,AD5BN,SHEF,EGFS,MAAP,GAAgB,IAAhB,GHEF,GAAA;AEGI,AEyBE,AD5BJ,QAAM,MAAM,GC4BH,ID5BU,MDGjB,CAAA,AEyBE,CFzBF,CAAA,CCHU,CAAkB,IAAlB,CAAZ,EDGE,EAAM,KAAK,IAAL,CAAU,QAAV,CAAN,CAAA,EAA0B;AE0BtB,AD5BN,QAAI,SAAJ,GAAgB,SAAhB;ADEE,AE2BI,AD5BN,QAAI,QAAJ,CAAa,CAAb,EC4BU,AD5BM,CAAhB,EDCE,ACDiB,IDCjB,ACDF,EAAyB,EDCG,ECD5B,IC4B2B,CAArB,EAAwB;AJ7B9B,AEGE,AE2BM,AD3BR,QAAI,QAAQ,CAAZ,MHHA,CAAA,CAAA,CAAA,CEGE,AE2Ba,CF3Bb,CAAA,CAAA,KFHF,AI8BQ,EJ9BF,EEGJ,EAAM,KAAK,CFHb,CAAA,EAAiB,AEGT,CAAU,WAAV,CAAN,CAAA;AE4BK,AD3BP,aAAA,QAAA,CAAmB,IAAnB,EAAiC,EAAjC,EAA2C;AHJ3C,AEGE,AE6BI,AD3BJ,YAAI,OHLN,EGKE,EHLF,AEGE,IFHe,AEGf;AFFF,AEGE,AE8BE,AD5BF,YAAI,KC4BG,MJjCT,AGKE,CHLF,CAAA,CAAA,AGKoB,CDFlB,CAAA,CAAA,CAAA,AE8BE,KJjCJ,AGKE,EHLI,EEGJ,EAAM,KAAK,GFHb,CAAA,AEGQ,CAAU,UAAV,CAAN,CAAA;AE+BI,AD5BJ,YAAI,SAAJ,GAAgB,CAAhB,IC4BiB,CAAb;AJlCN,AEGE,AKnCJ,AHmEQ,AD5BJ,IIvCJ,QAAA,AJuCQ,MAAJ,CHPF,AGOa,CC4BH,GJnCV,AEGE,CCIgB,CIvCpB,AJuCI,EDJA,ACImB,KAAK,CIvC5B,AHmEyB,AD5BrB,CC4BI,EAAoB,MGnE5B,CAAA,CAAA;APiCE,AEGE,AKnCJ,AHmEU,AD5BN,IIvCJ,QJuCQ,KIvCR,CJuCI,CAAW,GAAG,CHPhB,AGOE,CHPF,CAAA,AGOmB,CHPnB,CEGE,CAAA,ACIoB,CDJpB,ACIA,CDJA,AKnCJ,EHmEsB,CAAZ,EJnCR,EAAM,COhCR,CLmCI,EAAM,KAAK,GFHb,CAAA,AEGQ,CAAU,CKnCpB,CAAA,CAAA,ILmCU,CAAN,CAAA;AKlCJ,AHmEU,AD5BN,IIvCJ,QJuCQ,IIvCR,EJuCI,SC4Ba,EGnEjB,MHmEU,EGnEV,aAAA,CAAA,CAAA;AP+BE,AEGE,AKjCJ,AHmES,AD5BL,IIvCJ,MAAA,GJuCS,MHTP,IAAA,AEGE,AKjCJ,CJuCI,GDNA,ACMmB,IIvCvB,OAAA,CAAA,AJuCiC,CIvCjC,IJuCuB,GAAe,gBAAf,GAAgC,KAAK,KAAL,CAAW,GAAG,CAAd,CAAhC,GAAgD,IAAhD,GAAqD,KAAK,KAAL,CAAW,GAAG,CAAd,CAArD,GAAqE,GAAxF;AHRF,AO9BF,AHmEQ,AD5BJ,IIvCJ,QAAA,WP8BE,CAAA,CAAA,AO9BF,CP8BE,OO9BF,EP8BE,EAAM,KO9BR,CAAA,CAAA,KP8BE,CAAA;AOvBF,AH6DQ,AD5BL,IIjCG,WAAmC;APuBvC,AOtBA,AH8DI,AD5BJ,QAAI,GIlCC,GJkCK,EInC6B,CH+D9B,CD5BK,CHZd,IAAA,IGYc,EC4BV,KD5BM,CAAW,CAAX,EAAc,OAAO,EAArB,CAAV;AHXA,AEEC,AKxBD,AH8DM,AD5BN,KDfC,GCeK,MAAM,EIlCF,EJkCM,KHZhB,CAAA,CAAA,CAAA,AOxBuC,CJoCvB,EC4BG,CAAb,ID5BM,CHZZ,AGYuB,EHZjB,EGYM,EAAiB,CAAjB,CAAZ,IHZA,CAAA;AEIC,AKzBD,AH8DM,AD5BN,QAAM,GDTL,IKzBQ,AJkCI,KDTZ,AEqCS,CFrCT,ECSoB,CIrCkB,GHiEtB,ED5BJ,CAAe,GDT3B,ECSgC,CDTjC,AEqCM,EAAsB,AD5BA,CAAf,CAAb,QDTA;AFJA,AOpBA,AH8DQ,AD3BR,SInCG,GAJoC,CJuCvC,MHfA,AGeA,GAAA,CHfA,SI0CoB,GAAZ;AJzCR,AOpBA,AH8DQ,AD3BN,WInCG,OJmCO,IAAV,CHfF,CAAA,CAAA,CAAA,CI0Ce,QJ1Cf,AI0CQ,EJ1CF,WAAW,IAAX,CAAN,CAAA;AOzBuC,AHoEhC,AD1BL,CI1CJ,WJ0CU,IAAI,KAAK,MAAL,EAAV;AHjBF,AEIE,AKrBJ,AH6DQ,AD1BJ,IInCE,QJmCE,CAAJ,CInCY,CJmCL,IHlBT,IAAA,AOjBuB,ILqBrB,CAAA,CAAA,CAAA,OKrBY,CAAwB,CLqBpC,EAAM,KAAK,CKrBC,CAAhB,ELqBU,CAAU,WAAV,CAAN,CAAA;AFHF,AOjBF,AH6DQ,AD1BF,QInCE,SAAR,GAAoB,CJmCL,CInCf,CPiBE,CAAA,AGkBI,CHlBJ,CAAA,AGkBkB,IAAI,GAAJ,CAAQ,CHlB1B,AGkBkB,CAAd,CHlBE,EAAE,MAAM,MAAR,EAAgB,MAAM,EAAtB,EAAN,CAAA;AEGE,AE2CE,AD3BA,kBAAM,IAAI,CDhBZ,ECgBQ,CAAQ,CDhBhB,ACgBQ,CAAN,GIlCG,MAAI;APeX,AEIE,AKlBF,AH6DM,AD3BH,QIlCG,SAAS,EPcf,CI+CU,GJ/CV,EI+Ce,CG7DS,CLkBtB,CAAA,CAAA,CAAA,CE2CQ,EAAJ,MF3CJ,AKlBa,CAAuB,CLkB9B,KAAK,EKlBE,CAAf,CLkBQ,CAAU,OAAV,CAAN,CAAA;AFHF,AOdA,AH6DM,AD3BJ,WIlCK,CJkCD,KAAK,GC2BD,CAAJ,CG7DN,CPcA,AI+Ca,CJ/Cb,AGoBE,CHpBF,AOdqB,CPcrB,AGoBoB,GIlCpB,CH6DoB,CAAP,IJ/Cb,EAAM,EAAE,MAAM,SAAR,EAAmB,MAAM,EAAzB,EAAN,CAAA;AEGE,AKhBF,AH0BE,ADQE,YIlCI,UJkCM,CDlBZ,AKhBF,CAAoB,GLgBlB,GKhBF,cJkCoC,MAAtB,CAAV;AHrBJ,AOZA,AH6DE,AD3BC,QIlCC,WPYJ,GOZwB,CPYxB,GOZA;APaA,AOZA,AH6DE,AD3BD,WIlCM,CH6DD,KAAK,MJjDX,CAAA,AIiDE,CJjDF,CAAA,AIiDoB,CG7DpB,CAAwB,OPYxB,AOZA,EPYM,AOZ2B,EPYzB,MAAM,EOZ6B,IPYrC,EAAgB,AOZW,EAAqC,IPY1C,AOZK,EPY3B,AOZ8E,EPYpF,CAAA,COZiC,EAA+D,CAA/D,EAAuE;AACtG,AH6DE,AD1BJ,cAAU,CInCD,IAAP,GH6DY,cD1BkB,MAAtB,CAAV,CC0BoC,MAAtB,CAAV;AJlDJ,AEGC,AKbC,AH6DC,AD1BJ,KDzBE,OKVO,OPUR,AOVe,IPUf,KOVwB,sBAAT,CAAgC,SAAhC,CAAb;APWF,AEIA,AKdE,AH6DD,ADpEH,QAAA,GDqBE,EKdO,AJPT,GAAA,CIOa,GLcX,CAAA,AKde,AJPjB,CIOI,CPUF,CAAA,AOVkB,CPUlB,CAAA,EEIA,AKdsB,GLctB,EKd2B,EPU3B,EAAM,EAAE,AOVN,ELcO,AKd0B,GLcnC,AKdE,CPUY,CEIwB,AKdE,OPUlC,EAAkB,MAAM,EAAxB,EAAN,CAAA;AEKE,AKdE,AH8DJ,AD3BF,SAAA,GDrBQ,CCqBR,CC2BY,ED3BZ,CInCW,CAAL,EAAQ,CLcV,GAAgB,KAAK,AKdnB,CAAkB,ILcpB,EKdE,AH8D4B,CG9DH,KH8DnB,CAAV,GG9DI;APSJ,AEME,AKdC,AH8DJ,AD3BC,QAAI,IDrBE,GCqBN,EAAa,EH3Bb,CEME,CAAa,EFNf,GEMoB,GAAL,CAAS,CAAT,GAAa,CAA1B,EAA6B,CCqBG,IDrBE,GAAL,ACqBlB,CDrB2B,CAAT,GAAa,CAA1C,EAA6C,EAA7C,EAAiD,EAAjD;AFLF,AEMC,AKdC,AHAJ,ADmCE,KDxBA,GEXF,KAAA,CDmCY,ECnCZ,CGAa,CJmCX,GCnCF,EJQE,CAAA,CAAA,CAAA,KORE,CAAwB,GPQ1B,CORE,CPQI,COR0B,CPQxB,MAAM,EORZ,CAAwC,EPQpC,CORJ,CPQmB,AORyB,MPQnB,EAArB,CORJ,CPQF,CAAA;AEOF,AKdI,AH8DJ,AD3BC,SC2BD,EFhDA,CKdQ,CH8DR,GAAA,CFhDA,MKdI,EAAiB,YAAY,IAAZ;APOnB,AE/BF,AKyBI,AH8DF,AD/BF,CDxDA,EAAA,KEuFM,AD/BN,IAAA,CI/BS,EH8DP,AD/BF,EC+Be,CG9DX,CPMF,AGyBF,IHzBE,eIwDkC,OAArB;AJvDb,AEQF,AKdI,AH8DF,IFhDE,UAAkB,AEgDV,IFhDZ,AEgDE,IG9DgB,CPMhB,CAAA,CAAA,CAAA,AONE,SPMF,EAAM,EAAE,MAAM,OAAR,EAAiB,MAAM,EAAvB,EAAN,CAAA;AEUF,AKfG,AH8DF,KGxEkC,CAU/B,GLeJ,CKzBmC,CAU1B,GLeT,CKzBmC,ELyBnC,AKfe,MAVoB,EAUZ,IAVY,EAUN,SAAS,IAAT,CAVM,CAAjC;APeA,AEWA,AKfD,AH0DD,QF3CQ,AE2CR,IAAA,GAAA,EF3CiB,EFXf,AIsDF,IJtDE,GEWwB,cAAT,CAAwB,mBAAxB,CAAf;AACA,AKhCF,AH+EA,KG/EK,IAAI,ELgCA,EKhCT,GLgCE,CKhCe,ELgCA,IAAf,EKhCF,EAAyB;ALiCvB,AE+CF,WF/CS,CKjCA,KLiCP,GAAgB,IAAhB;AAEA,AKnBD,AHkED,QF/CQ,CE+CR,OAAA,CAAmB,GF/CC,CE+CpB,EAAkC,CF/CV,MAAJ,CAAW,KAAX,EAAkB,OAAlB,CAAlB;AFdD,AEeC,QAAM,aAAa,IAAI,MAAJ,CAAW,MAAX,EAAmB,OAAnB,CAAnB;AFbF,AEeE,IFfE,SEeF,CFfoB,IAAtB,EEeE,GAAA;AFbF,AEcI,SFdJ,GEcU,EFdV,GAAA,CEcgB,OAAO,UAAP,CAAkB,IAAlB,CAAZ;AFbF,AEcE,AE2CF,QJzDM,IEcA,OFdW,EEcf,GAAgB,IFdQ,AIyDd,IAAZ,CF3CE,SFde,CAAwB,gBAAxB,CAAjB;AACA,AEcE,AE2CF,YF3CM,CFdG,OEcP,CAAa,CAAb,CE2CF,CJzDA,AEckB,AE2ClB,CF3CE,AE2CF,CAAA,CJzDuB,AEcF,EFdrB,EEcE,EAAyB,EE2C3B,EF3CE,AE2CI,SAAN,CAAA;AJvDA,AEaE,QFbI,OAAO,GEaD,KFbS,EEanB,CAAkB,GFbP,AEaX,CFb0B,oBAAf,CAAb;AAEA,AEYE,AEyCF,aJrDA,MAAA,AEYa,AEyCb,GJrDA,CIqDA,GFzCE,CAAmB,GAAnB;AFXA,AEYD,AEyCD,YJrDQ,IAAI,KAAK,EIqDjB,CAAA,CAAA,CAAA,CJrDY,EAAV,OIqDF,EAAO,OAAP,CAAA;AJpDE,AEaF,QAAM,IFbA,GEaO,EFbF,EAAE,IAAX,AEamB,EFbF,CEaN,CAAY,CACvB,QAAQ,OAAR,CAAgB,UAAU,OAAV,CAAkB,IAAlB,CAAuB,SAAvB,CAAhB,CADuB,EAEvB,QAAQ,OAAR,CAAgB,WAAW,YAAX,CAAwB,IAAxB,CAA6B,UAA7B,CAAhB,CAFuB,CAAZ,CAAb;AFZI,AEiBJ,aAAA,MAAA,EFjBa,CEiBb,UFjBI,IAAwB,EAAE,IAA1B;AACD,AEiBD,AEkCH,aFlCQ,MAAL;AFhBA,AEiBA,AEmCJ,SAAA,GJpDQ,KAAK,CIoDb,CAAqB,CAArB,EAA8B,EJpD1B,EAAkB;AAChB,AEiBF,kBAAU,IFjBE,kBEiBoB,IFjBE,EEiBxB,CAAV,GFjBY,CAAV;AACD,AEiBF;AFhBA,AEkBD,cAAU,sBAAsB,MAAtB,CAAV;AFhBA,AEiBD,AE+BC,cJhDU,kBIgDM,CAAhB,GJhDgC,MAAtB,CAAV;AACD,AEZD,AE4DE,QF5DF,KAAA,GAAA,KAAA,EE4DE,CAAA,CAAA,CAAA,SAAA,EAAM,WAAN,CAAA;AJjEF,AEmCA,QFnCA,CEmCA,IFnCA,AEmCA,GFnCA,AEmCA,KFnCA;AAmBA,AEiBE,AE6BA,QF7BI,CFjBN,IAAA,EEiBE,CFjBF,CEiBe,EE6Bb,IAAA,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","file":"src.091f592a.map","sourcesContent":["\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [0, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Check if the value is an iterator.\n *\n * @param v The value to check\n */\nfunction isIterator(v) {\n    if (v == null || typeof v !== 'object') {\n        return false;\n    }\n    return 'next' in v && typeof v.next === 'function';\n}\n/**\n * The Lua-like pseudo-coroutine that wraps iterators.\n */\nvar Coroutine = /** @class */ (function () {\n    /**\n     * Create a new coroutine to iterate `start` first.\n     * Read `create<T>` for details.\n     *\n     * @param start Iterator to be started to iterate first\n     */\n    function Coroutine(start) {\n        this.waitingFrames = 0;\n        this.iteratorStack = [];\n        if (start) {\n            this.iteratorStack.push(start);\n        }\n    }\n    Object.defineProperty(Coroutine.prototype, \"isAlive\", {\n        /**\n         * Whether this coroutine is alive.\n         */\n        get: function () {\n            return 0 < this.iteratorStack.length;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Stop this coroutine.\n     */\n    Coroutine.prototype.stop = function () {\n        this.iteratorStack = [];\n    };\n    /**\n     * Resume the current iterator and receive the yielded value at the next frame.\n     * This method will return nulls forever after the coroutine stops.\n     *\n     * @returns The value at the next frame\n     */\n    Coroutine.prototype.resume = function (resumeValue) {\n        var result = null;\n        if (--this.waitingFrames < 1) {\n            if (this.iteratorStack.length === 0) {\n                return null;\n            }\n            var wait = 1; // will be set waitingFrames\n            while (0 < this.iteratorStack.length) {\n                // get the next value `yield`ed from the current iterator\n                var iter = this.iteratorStack[this.iteratorStack.length - 1];\n                var r = iter.next(resumeValue);\n                resumeValue = undefined;\n                if (r.done) {\n                    this.iteratorStack.pop();\n                }\n                var y = r.value;\n                if (typeof y === 'undefined') {\n                    if (r.done) {\n                        // bare `return` (continue the caller iterator on the stack top)\n                        continue;\n                    }\n                    // bare `yield` (wait 1 frame)\n                    y = null;\n                }\n                if (isIterator(y)) {\n                    // pause and save the current iterator and start the `yield`ed iterator\n                    var iter_1 = y;\n                    this.iteratorStack.push(iter_1);\n                    continue;\n                }\n                else if (typeof y === 'number') {\n                    // wait `y` frames\n                    wait = y;\n                    break;\n                }\n                else {\n                    // `y` is a value of `T`\n                    if (r.done && 0 < this.iteratorStack.length) {\n                        // y is `return`ed from the current iterator so it has been stopped,\n                        // and y is to be the value of `yield` expression in the caller iterator\n                        resumeValue = y;\n                        continue;\n                    }\n                    // y is the `resume()` value of the current frame\n                    result = y;\n                    wait = 1;\n                    if (result && typeof result.wait === 'number') {\n                        wait = result.wait;\n                    }\n                    break;\n                }\n            }\n            this.waitingFrames = Math.ceil(wait);\n        }\n        return result;\n    };\n    return Coroutine;\n}());\nexports.Coroutine = Coroutine;\n/**\n * Create a new coroutine to iterate `start` first.\n *\n * `start` normally must be an iterator generated by a generator\n * implemented to `yield` (or `return`) values of the following 3 types:\n *\n * - `o`: An object of an arbitary class\n *   - `resume()` returns `o`.\n *   - If `o` has a `wait` field, `resume()` returns `null` through `o.wait - 1` frames after that.\n *     The iterator is not resumed while this, which means that\n *     this coroutine waits `n` frames including the current frame.\n *   - In principle, values of this type must be `yield`ed.\n *     If a value of this type is `return`ed, the coroutine will be stopped.\n *\n * - `n`: A number\n *   - `resume()` returns `null`.\n *   - After that, `resume()` returns `null` through `n - 1` frames.\n *     The iterator is not resumed while this, which means that\n *     this coroutine waits `n` frames including the current frame.\n *\n * - `i`: An iterator of the same type as `start`\n *   - When `i` is `return`ed, the current iterator is terminated\n *     and `i` is immediately started to iterate as the replacement.\n *   - When `i` is `yield`ed, the current iterator is paused and pushed onto the stack,\n *     and `i` is immediately started to iterate.\n *     After `i` is terminated, the caller iterator is popped from the stack and continued.\n *\n * @param start Iterator to be started to iterate first\n */\nfunction create(start) {\n    if (start instanceof Coroutine) {\n        return start;\n    }\n    if (isIterator(start)) {\n        return new Coroutine(start);\n    }\n    return new Coroutine(start());\n}\nexports.create = create;\n/**\n * Create a new coroutine to iterate all `coroutines`\n * concurrently until the all of them are dead.\n *\n * @param coroutines Coroutines or iterators\n * @returns Composed coroutine\n */\nfunction all(coroutines) {\n    return new Coroutine(function (coroutines) {\n        var isAlive, result, _i, coroutines_1, coro;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (!true) return [3 /*break*/, 2];\n                    isAlive = false;\n                    result = [];\n                    for (_i = 0, coroutines_1 = coroutines; _i < coroutines_1.length; _i++) {\n                        coro = coroutines_1[_i];\n                        result.push(coro.resume());\n                        if (coro.isAlive) {\n                            isAlive = true;\n                        }\n                    }\n                    if (!isAlive) {\n                        return [2 /*return*/, result];\n                    }\n                    return [4 /*yield*/, result];\n                case 1:\n                    _a.sent();\n                    return [3 /*break*/, 0];\n                case 2: return [2 /*return*/];\n            }\n        });\n    }(coroutines.map(function (c) { return create(c); })));\n}\nexports.all = all;\n/**\n * Create a new coroutine to iterate all `coroutines`\n * concurrently until one of them is dead.\n *\n * @param coroutines Coroutines or iterators\n * @returns Composed coroutine\n */\nfunction race(coroutines) {\n    return new Coroutine(function (coros) {\n        var isAlive, result, _i, coros_1, coro;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (!true) return [3 /*break*/, 2];\n                    isAlive = true;\n                    result = [];\n                    for (_i = 0, coros_1 = coros; _i < coros_1.length; _i++) {\n                        coro = coros_1[_i];\n                        result.push(coro.resume());\n                        if (!coro.isAlive) {\n                            isAlive = false;\n                        }\n                    }\n                    if (!isAlive) {\n                        return [2 /*return*/, result];\n                    }\n                    return [4 /*yield*/, result];\n                case 1:\n                    _a.sent();\n                    return [3 /*break*/, 0];\n                case 2: return [2 /*return*/];\n            }\n        });\n    }(coroutines.map(function (c) { return create(c); })));\n}\nexports.race = race;\n/**\n * Create a new coroutine that repeats\n * generating iterator and iterating it forever.\n *\n * @param generator Generator (instance methods must be `bind`ed, be careful)\n * @returns Composed coroutine\n */\nfunction forever(generator) {\n    return new Coroutine(function () {\n        var coro, isNew, v;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (!true) return [3 /*break*/, 2];\n                    isNew = false;\n                    if (!(coro && coro.isAlive)) {\n                        coro = new Coroutine(generator());\n                        isNew = true;\n                    }\n                    v = coro.resume();\n                    if (!coro.isAlive && v == null && !isNew) {\n                        return [3 /*break*/, 0];\n                    }\n                    return [4 /*yield*/, v];\n                case 1:\n                    _a.sent();\n                    return [3 /*break*/, 0];\n                case 2: return [2 /*return*/];\n            }\n        });\n    }());\n}\nexports.forever = forever;\n//# sourceMappingURL=index.js.map","import * as luacoro from 'luacoro'\n\nconst bpm = 160 // tempo\nconst n8 = Math.round(60 * 60 / bpm / 2) // frame count of 8th note\nconst n4 = n8 * 2\nconst n4d = n8 * 3\nconst n1 = n8 * 8\n\ninterface MessageFrame {\n  text: string\n  wait: number\n}\n\nfunction* maryHadA (): luacoro.Iterator<MessageFrame> {\n  yield { text: 'Ma', wait: n4d } // `resume()` returns this value and\n                                  // wait `n4d` frames with suspending here\n  yield { text: 'ry ', wait: n8 }\n  yield { text: 'had ', wait: n4 }\n  yield { text: 'a ', wait: n4 }\n}\n\nfunction* littleLamb (withoutRest?: boolean): luacoro.Iterator<MessageFrame> {\n  yield { text: 'lit', wait: n4 }\n  yield { text: 'tle ', wait: n4 }\n  yield { text: 'lamb ', wait: n4 }\n  if (!withoutRest) {\n    yield n4\n  }\n}\n\nfunction* maryHadALittleLamb (): luacoro.Iterator<MessageFrame> {\n  yield maryHadA() // To go to another iterator and come back, just yield it\n  yield littleLamb()\n  yield littleLamb()\n  yield littleLamb()\n  yield maryHadA()\n  yield littleLamb(true)\n  yield { text: 'its ', wait: n4 }\n  yield { text: 'fleece ', wait: n4 }\n  yield { text: 'was ', wait: n4 }\n  yield { text: 'white ', wait: n4 }\n  yield { text: 'as ', wait: n4 }\n  yield { text: 'snow ', wait: n1 }\n}\n\nlet request: number = null\n\nexport function start () {\n  const textarea = document.getElementById('basic-textarea') as HTMLTextAreaElement\n  textarea.textContent = ''\n\n  const coro = luacoro.create(maryHadALittleLamb())\n\n  function update () {\n    const v = coro.resume()\n    if (v && v.text) {\n      textarea.textContent += v.text\n    }\n    if (coro.isAlive) {\n      request = requestAnimationFrame(update)\n    }\n  }\n\n  request = requestAnimationFrame(update)\n}\n\nexport function stop () {\n  if (request) cancelAnimationFrame(request)\n  request = null\n}\n","export default class Vector {\n  x: number\n  y: number\n\n  constructor (x: number = .0, y: number = .0) {\n    this.x = x\n    this.y = y\n  }\n\n  clone (): Vector {\n    return new Vector(this.x, this.y)\n  }\n\n  size (): number {\n    return Math.sqrt(this.x * this.x + this.y * this.y)\n  }\n\n  add (v: Vector): Vector {\n    return new Vector(this.x + v.x, this.y + v.y)\n  }\n\n  sub (v: Vector): Vector {\n    return new Vector(this.x - v.x, this.y - v.y)\n  }\n\n  mul (r: number): Vector {\n    return new Vector(this.x * r, this.y * r)\n  }\n\n  div (r: number): Vector {\n    return new Vector(this.x / r, this.y / r)\n  }\n\n  normalize (): Vector {\n    return this.div(this.size())\n  }\n\n  rotate (rad: number): Vector {\n    const c = Math.cos(rad)\n    const s = Math.sin(rad)\n    return new Vector(\n      this.x * c - this.y * s,\n      this.x * s + this.y * c\n    )\n  }\n\n  lerp (v: Vector, r: number): Vector {\n    return new Vector(\n      this.x * (1 - r) + v.x * r,\n      this.y * (1 - r) + v.y * r\n    )\n  }\n}\n","import * as luacoro from 'luacoro'\nimport Vector from './vector'\n\nconst size = 300\nconst topLeft = new Vector(size * .3, size * .3)\nconst topRight = new Vector(size * .7, size * .3)\nconst bottomRight = new Vector(size * .7, size * .7)\nconst bottomLeft = new Vector(size * .3, size * .7)\nconst absoluteVelocity = 3\n\nclass Sprite {\n  style: string\n  pos: Vector\n\n  constructor (style: string, pos: Vector) {\n    this.style = style\n    this.pos = pos.clone()\n  }\n\n  *move (to: Vector): luacoro.Iterator<{}> {\n    const distance = to.sub(this.pos)\n    const direction = distance.normalize()\n    const velocity = direction.mul(absoluteVelocity)\n    const division = Math.ceil(distance.size() / absoluteVelocity)\n    for (let i = 1; i < division; i++) {\n      this.pos = this.pos.add(velocity)\n      yield // wait 1 frame\n    }\n    this.pos = to.clone()\n    yield // wait 1 frame\n  }\n\n  *goRound (): luacoro.Iterator<{}> {\n    yield this.move(topRight) // To go to another iterator and come back, just yield it\n    yield this.move(bottomRight)\n    yield this.move(bottomLeft)\n    yield this.move(topLeft)\n  }\n\n  *backAndForth (): luacoro.Iterator<{}> {\n    yield this.move(bottomRight)\n    yield this.move(topLeft)\n  }\n\n  repaint (ctx: CanvasRenderingContext2D) {\n    ctx.fillStyle = this.style\n    ctx.fillRect(this.pos.x - 8, this.pos.y - 8, 16, 16)\n  }\n}\n\nlet request: number = null\n\nexport function start () {\n  const canvas = document.getElementById('concurrent-canvas') as HTMLCanvasElement\n  canvas.width = size\n  canvas.height = size\n\n  const redSprite = new Sprite('red', topLeft)\n  const blueSprite = new Sprite('blue', topLeft)\n\n  function repaint () {\n    const ctx = canvas.getContext('2d')\n    ctx.fillStyle = '#eeeeee'\n    ctx.fillRect(0, 0, size, size)\n    redSprite.repaint(ctx)\n    blueSprite.repaint(ctx)\n  }\n\n  const coro = luacoro.all([\n    luacoro.forever(redSprite.goRound.bind(redSprite)),\n    luacoro.forever(blueSprite.backAndForth.bind(blueSprite))\n  ])\n\n  function update () {\n    coro.resume()\n    repaint()\n    request = requestAnimationFrame(update)\n  }\n\n  request = requestAnimationFrame(update)\n}\n\nexport function stop () {\n  if (request) cancelAnimationFrame(request)\n  request = null\n}\n","import * as luacoro from 'luacoro'\nimport Vector from './vector'\n\nconst eps = 2.0\nconst size = 300\n\nfunction* koch (v: Vector): luacoro.Iterator<Vector> {\n  if (v.size() <= eps) {\n    yield v // resume() returns v and wait 1 frame\n            // (different from `return v`, be careful)\n    return // back to the caller iterator (with no return value)\n  }\n  const t = v.mul(1.0 / 3.0)\n                                       // ＿/\\＿\n  yield koch(t)                        // ＿\n  yield koch(t.rotate(-Math.PI / 3.0)) //   /\n  yield koch(t.rotate(Math.PI / 3.0))  //    \\\n  yield koch(t)                        //     ＿\n  // back to the caller iterator (with no return value)\n}\n\nlet request: number = null\n\nexport function start () {\n  const info = document.getElementById('recursion-info') as HTMLDivElement\n\n  const canvas = document.getElementById('recursion-canvas') as HTMLCanvasElement\n  canvas.width = size\n  canvas.height = size\n\n  const ctx = canvas.getContext('2d')\n  ctx.fillStyle = '#eeeeee'\n  ctx.fillRect(0, 0, size, size)\n\n  let frame = 0\n  function drawLine (from: Vector, to: Vector) {\n    ctx.beginPath()\n    ctx.strokeStyle = '#000000'\n    ctx.lineWidth = 1\n    ctx.moveTo(from.x, from.y)\n    ctx.lineTo(to.x, to.y)\n    ctx.stroke()\n    info.textContent = `frame: ${frame} / position: (${Math.round(to.x)}, ${Math.round(to.y)})`\n    frame++\n  }\n\n  let pos = new Vector(0, size * .8)\n  const vec = new Vector(size, 0)\n  const coro = luacoro.create(koch(vec))\n\n  function update () {\n    request = null\n\n    const v = coro.resume()\n    if (v) {\n      drawLine(pos, pos.add(v))\n      pos = pos.add(v)\n    }\n    if (coro.isAlive) {\n      request = requestAnimationFrame(update)\n    }\n  }\n\n  request = requestAnimationFrame(update)\n}\n\nexport function stop () {\n  if (request) cancelAnimationFrame(request)\n  request = null\n}\n","import * as luacoro from 'luacoro'\n\n///////////////////////////////////////////////////////////////////////////\n// Main game system and API implementations\n\nlet mode: string\n\nlet limitKeys: string[]\nlet lastKey: string\nwindow.addEventListener('keydown', (e: KeyboardEvent) => {\n  if (mode !== 'waitKey') return\n  if (limitKeys && limitKeys.indexOf(e.key) < 0) return\n  lastKey = e.key\n  mode = 'normal'\n  limitKeys = null\n})\n\nlet luminance: number\nfunction updateLuminance () {\n  const e = document.getElementById('inn')\n  e.style.background = `rgb(${luminance}, ${luminance}, ${luminance})`\n}\n\nfunction message (msg: string) {\n  const e = document.createElement('div') as HTMLDivElement\n  e.textContent = msg\n  document.getElementById('inn').appendChild(e)\n}\n\nlet waitingFrames: number\n\nlet request: number = null\n\nexport function start () {\n  mode = 'normal'\n  limitKeys = null\n  lastKey = null\n  luminance = 255\n  updateLuminance()\n  waitingFrames = 0\n  document.getElementById('inn').innerHTML = ''\n\n  let coro = luacoro.create(inn())\n  let frame = 0\n\n  function update () {\n    request = null\n\n    let r\n    const e = document.getElementById('inn')\n    e.classList.remove('showCursor')\n    switch (mode) {\n      case 'waitKey':\n        if (frame % 60 < 30) {\n          e.classList.add('showCursor')\n        }\n        break\n\n      case 'waitFrame':\n        waitingFrames--\n        if (waitingFrames <= 0) {\n          mode = 'normal'\n        }\n        break\n\n      case 'waitFadeOut':\n        luminance -= 5\n        if (luminance <= 0) {\n          luminance = 0\n          mode = 'normal'\n        }\n        updateLuminance()\n        break\n\n      case 'waitFadeIn':\n        luminance += 5\n        if (255 <= luminance) {\n          luminance = 255\n          mode = 'normal'\n        }\n        updateLuminance()\n        break\n\n      default:\n        r = coro.resume()\n        if (r) mode = r\n    }\n    frame++\n    if (coro.isAlive) {\n      request = requestAnimationFrame(update)\n    }\n  }\n\n  request = requestAnimationFrame(update)\n}\n\nexport function stop () {\n  if (request) cancelAnimationFrame(request)\n  request = null\n}\n\n///////////////////////////////////////////////////////////////////////////\n// Helpers\n\nfunction* waitKey (keys?: string[]): luacoro.Iterator<string> {\n  limitKeys = keys\n  yield 'waitKey'\n  return lastKey\n}\n\nfunction* waitFrame (f: number): luacoro.Iterator<string> {\n  waitingFrames = f\n  yield 'waitFrame'\n}\n\nfunction* waitFadeOut (): luacoro.Iterator<string> {\n  yield 'waitFadeOut'\n}\n\nfunction* waitFadeIn (): luacoro.Iterator<string> {\n  yield 'waitFadeIn'\n}\n\n///////////////////////////////////////////////////////////////////////////\n// Scenario implementations\n\nfunction* inn (): luacoro.Iterator<string> {\n  message('Welcome to the traveler\\'s Inn.')\n  message('Room and board is 6 GOLD per night.')\n  message('Dost thou want a room? (Y/N)')\n  const key = yield waitKey(['y', 'n'])\n\n  if (key === 'y') {\n    message('Good night.')\n    yield waitFrame(30)\n    yield waitFadeOut()\n    yield waitFrame(30)\n    // player.money -= 6\n    // player.hp = player.maxHP\n    // player.mp = player.maxMP\n    yield waitFadeIn()\n    message('Good morning.')\n    message('Thou hast had a good night\\'s sleep I hope.')\n    yield waitKey()\n  }\n\n  message('I shall see thee again.')\n  yield waitKey()\n}\n","/**\n * https://github.com/gre/bezier-easing\n * BezierEasing - use bezier curve for transition easing function\n * by Gaëtan Renaudeau 2014 - 2015 – MIT License\n */\n\n// These values are established by empiricism with tests (tradeoff: performance VS precision)\nvar NEWTON_ITERATIONS = 4;\nvar NEWTON_MIN_SLOPE = 0.001;\nvar SUBDIVISION_PRECISION = 0.0000001;\nvar SUBDIVISION_MAX_ITERATIONS = 10;\n\nvar kSplineTableSize = 11;\nvar kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n\nvar float32ArraySupported = typeof Float32Array === 'function';\n\nfunction A (aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1; }\nfunction B (aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1; }\nfunction C (aA1)      { return 3.0 * aA1; }\n\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\nfunction calcBezier (aT, aA1, aA2) { return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT; }\n\n// Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\nfunction getSlope (aT, aA1, aA2) { return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1); }\n\nfunction binarySubdivide (aX, aA, aB, mX1, mX2) {\n  var currentX, currentT, i = 0;\n  do {\n    currentT = aA + (aB - aA) / 2.0;\n    currentX = calcBezier(currentT, mX1, mX2) - aX;\n    if (currentX > 0.0) {\n      aB = currentT;\n    } else {\n      aA = currentT;\n    }\n  } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\n  return currentT;\n}\n\nfunction newtonRaphsonIterate (aX, aGuessT, mX1, mX2) {\n for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\n   var currentSlope = getSlope(aGuessT, mX1, mX2);\n   if (currentSlope === 0.0) {\n     return aGuessT;\n   }\n   var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n   aGuessT -= currentX / currentSlope;\n }\n return aGuessT;\n}\n\nmodule.exports = function bezier (mX1, mY1, mX2, mY2) {\n  if (!(0 <= mX1 && mX1 <= 1 && 0 <= mX2 && mX2 <= 1)) {\n    throw new Error('bezier x values must be in [0, 1] range');\n  }\n\n  // Precompute samples table\n  var sampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\n  if (mX1 !== mY1 || mX2 !== mY2) {\n    for (var i = 0; i < kSplineTableSize; ++i) {\n      sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n    }\n  }\n\n  function getTForX (aX) {\n    var intervalStart = 0.0;\n    var currentSample = 1;\n    var lastSample = kSplineTableSize - 1;\n\n    for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {\n      intervalStart += kSampleStepSize;\n    }\n    --currentSample;\n\n    // Interpolate to provide an initial guess for t\n    var dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n    var guessForT = intervalStart + dist * kSampleStepSize;\n\n    var initialSlope = getSlope(guessForT, mX1, mX2);\n    if (initialSlope >= NEWTON_MIN_SLOPE) {\n      return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n    } else if (initialSlope === 0.0) {\n      return guessForT;\n    } else {\n      return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n    }\n  }\n\n  return function BezierEasing (x) {\n    if (mX1 === mY1 && mX2 === mY2) {\n      return x; // linear\n    }\n    // Because JavaScript number are imprecise, we should guarantee the extremes are right.\n    if (x === 0) {\n      return 0;\n    }\n    if (x === 1) {\n      return 1;\n    }\n    return calcBezier(getTForX(x), mY1, mY2);\n  };\n};\n","import * as luacoro from 'luacoro'\nimport Vector from './vector'\nimport BezierEasing from 'bezier-easing'\n\nlet request: number = null\n\nexport function start () {\n  let coro = luacoro.create(guide())\n\n  function update () {\n    coro.resume()\n    if (coro.isAlive) {\n      request = requestAnimationFrame(update)\n    }\n  }\n\n  request = requestAnimationFrame(update)\n}\n\nexport function stop () {\n  if (request) cancelAnimationFrame(request)\n  request = null\n  reset()\n}\n\n///////////////////////////////////////////////////////////////////////////\n// Event handlers\n\nfunction updateTitle () {\n  const e = document.getElementById('guide-form-title') as HTMLInputElement\n  document.getElementById('guide-preview-title').textContent = e.value\n}\ndocument.getElementById('guide-form-title').addEventListener('input', updateTitle)\n\nfunction updateBgColor () {\n  const r = parseFloat((document.getElementById('guide-form-color-r') as HTMLInputElement).value)\n  const g = parseFloat((document.getElementById('guide-form-color-g') as HTMLInputElement).value)\n  const b = parseFloat((document.getElementById('guide-form-color-b') as HTMLInputElement).value)\n  document.getElementById('guide-preview').style.backgroundColor = `rgb(${r}, ${g}, ${b})`\n}\ndocument.getElementById('guide-form-color-r').addEventListener('input', updateBgColor)\ndocument.getElementById('guide-form-color-g').addEventListener('input', updateBgColor)\ndocument.getElementById('guide-form-color-b').addEventListener('input', updateBgColor)\n\nfunction showSettingsDialog () {\n  document.getElementById('guide-dialog').style.display = 'block'\n}\ndocument.getElementById('guide-open').addEventListener('click', showSettingsDialog)\n\nfunction hideSettingsDialog () {\n  document.getElementById('guide-dialog').style.display = 'none'\n}\ndocument.getElementById('guide-form-ok').addEventListener('click', hideSettingsDialog)\n\n///////////////////////////////////////////////////////////////////////////\n// Helpers\n\nfunction showCursor () {\n  document.getElementById('guide-cursor').style.display = 'block'\n}\n\nfunction reset () {\n  document.getElementById('guide-message').style.display = 'none'\n  document.getElementById('guide-cursor').style.display = 'none'\n  document.getElementById('guide-dialog').style.display = 'none'\n}\n\nfunction updateHover (p: Vector, isFocused: boolean) {\n  let e = document.elementFromPoint(p.x, p.y)\n  while (e && e.id !== 'guide') {\n    if (isFocused) {\n      e.classList.add('hover')\n    } else {\n      e.classList.remove('hover')\n    }\n    e = e.parentElement\n  }\n}\n\nfunction getElementPos (id: string, anchorX?: number, anchorY?: number): Vector {\n  const e = document.getElementById(id) as HTMLElement\n  if (anchorX == null) anchorX = .5\n  if (anchorY == null) anchorY = .5\n  const rect = e.getBoundingClientRect()\n  return new Vector(\n    window.pageXOffset + rect.left + rect.width * anchorX,\n    window.pageYOffset + rect.top + rect.height * anchorY\n  )\n}\n\nconst sliderThumbSize = 12\n\nfunction getSliderPos (id: string, value?: number): Vector {\n  const e = document.getElementById(id) as HTMLInputElement\n  if (value == null) value = parseFloat(e.value)\n  const rect = e.getBoundingClientRect()\n  const w = rect.width - sliderThumbSize\n  const min = parseFloat(e.min)\n  const max = parseFloat(e.max)\n  const r = (value - min) / (max - min)\n  return new Vector(\n    window.pageXOffset + rect.left + sliderThumbSize * .5 + w * r,\n    window.pageYOffset + rect.top + rect.height * .5\n  )\n}\n\nfunction setSliderPos (id: string, x: number) {\n  const e = document.getElementById(id) as HTMLInputElement\n  const rect = e.getBoundingClientRect()\n  const w = rect.width - sliderThumbSize\n  const x0 = window.pageXOffset + rect.left + sliderThumbSize * .5\n  const r = Math.max(0, Math.min((x - x0) / w, 1))\n  const min = parseFloat(e.min)\n  const max = parseFloat(e.max)\n  e.value = `${min + (max - min) * r}`\n}\n\nlet lastCursorPos: Vector = null\nfunction setCursorPos (pos: Vector) {\n  const e = document.getElementById('guide-cursor') as HTMLElement\n  e.style.left = `${pos.x}px`\n  e.style.top = `${pos.y}px`\n  if (lastCursorPos) updateHover(lastCursorPos, false)\n  updateHover(pos, true)\n  lastCursorPos = pos.clone()\n}\n\nfunction message (msg: string) {\n  const e = document.getElementById('guide-message') as HTMLDivElement\n  e.textContent = msg\n  e.style.display = 'block'\n}\n\n///////////////////////////////////////////////////////////////////////////\n// Guide implementations\n\nconst waitFrames = 30\nconst longWaitFrames = 120\nconst baseMoveFrames = 15\nconst moveFramesPerDistance = .15\nconst beforeTypeFrames = 20\nconst typeFrames = 4\nconst exampleTitles = [\n  'JavaScript tutorial',\n  'My diary'\n]\nconst exampleColors = [\n  [ 128, 192, 255 ],\n  [ 255, 255, 128 ]\n]\nlet trial = 0\n\nfunction *moveTo (to: Vector, fn?: (r: number, p: Vector) => void): luacoro.Iterator<{}> {\n  const easing = BezierEasing(0.42, 0, 0.58, 1.0)\n  const from = lastCursorPos.clone()\n  const distance = to.sub(from).size()\n  const frames = baseMoveFrames + distance * moveFramesPerDistance\n  for (let i = 0; i < frames; i++) {\n    const r = easing(i / (frames - 1))\n    const p = from.lerp(to, r)\n    setCursorPos(p)\n    if (fn) fn(r, p)\n    yield // wait 1 frame\n  }\n}\n\nfunction *moveSlider (id: string, valueTo: number, fn: () => void) {\n  yield moveTo(getSliderPos(id))\n  yield moveTo(getSliderPos(id, valueTo), (r: number, p: Vector) => {\n    setSliderPos(id, p.x)\n    if (fn) fn()\n  })\n}\n\nfunction *inputText (id: string, text: string, fn?: (e: HTMLInputElement, text: string) => void): luacoro.Iterator<{}> {\n  const e = document.getElementById(id) as HTMLInputElement\n  e.focus()\n  e.setSelectionRange(0, e.value.length)\n  yield beforeTypeFrames\n  for (let i = 1; i <= text.length; i++) {\n    e.value = text.substr(0, i)\n    if (fn) fn(e, e.value)\n    yield typeFrames\n  }\n}\n\nfunction* guide (): luacoro.Iterator<{}> {\n  reset()\n  setCursorPos(getElementPos('guide'))\n  showCursor()\n  yield waitFrames\n\n  message('To customize theme, click the gear icon at top-right.')\n  yield waitFrames\n  yield moveTo(getElementPos('guide-open'))\n  yield waitFrames\n  showSettingsDialog()\n  message('The settings dialog is appeared.')\n  yield longWaitFrames\n\n  message('Input your blog title.')\n  yield waitFrames\n  yield moveTo(getElementPos('guide-form-title', .9))\n  yield waitFrames\n  const title = exampleTitles[trial % exampleTitles.length]\n  yield inputText('guide-form-title', title, () => updateTitle())\n  yield waitFrames\n\n  message('Change background color.')\n  yield waitFrames\n  const color = exampleColors[trial % exampleColors.length]\n  yield moveSlider('guide-form-color-r', color[0], () => updateBgColor())\n  yield moveSlider('guide-form-color-g', color[1], () => updateBgColor())\n  yield moveSlider('guide-form-color-b', color[2], () => updateBgColor())\n  trial++\n  yield waitFrames\n\n  message('Click \"OK\" button.')\n  yield waitFrames\n  yield moveTo(getElementPos('guide-form-ok'))\n  yield waitFrames\n  hideSettingsDialog()\n  yield longWaitFrames\n\n  reset()\n}\n\n(window as any).BezierEasing = BezierEasing\n","import * as basic from './basic'\nimport * as concurrent from './concurrent'\nimport * as recursion from './recursion'\nimport * as inn from './inn'\nimport * as guide from './guide'\n\ninterface Demo {\n  start (): void\n  stop (): void\n}\n\nconst examples: {[name: string]: Demo} = {\n  basic,\n  concurrent,\n  recursion,\n  inn,\n  guide\n}\n\nconst buttons = document.getElementById('buttons') as HTMLDivElement\nbuttons.innerHTML = ''\n\nfor (let name in examples) {\n  const button = document.createElement('button') as HTMLButtonElement\n  button.textContent = name\n  buttons.appendChild(button)\n  let currentDemo: Demo = null\n  button.addEventListener('click', function (button: HTMLButtonElement, name: string, demo: Demo, e: Event) {\n    button.blur()\n    const divs = document.getElementsByClassName('example')\n    for (let i = 0; i < divs.length; i++) {\n      divs[i].classList.remove('visible')\n    }\n    document.getElementById(name).classList.add('visible')\n    if (currentDemo) currentDemo.stop()\n    demo.start()\n    currentDemo = demo\n  }.bind(null, button, name, examples[name]))\n}\n"]}